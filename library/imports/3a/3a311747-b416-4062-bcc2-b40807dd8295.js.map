{"version":3,"sources":["../../../../../../assets/resources/Script/view/assets/resources/Script/view/Game.js"],"names":["self","requestHandler","require","onfire","events","GameData","cc","Class","extends","Component","properties","playerNode","Node","seatNode","btnReady","bankerNode","betNode","operation","centerNode","myPlayer","onLoad","userInfo","getUserInfo","roomCode","getRoomCode","initWidget","listenerList","hall","HALL_DATA","onReceive_login","game","S2C_SEAT_CHOOSE","onReceive_sitDown","S2C_SYN_SEATS","onReceive_syn_seat","S2C_READY","onReceive_Ready","S2C_CARDS","onReceive_cards","S2C_GAME_STATE","onReceive_gameState","S2C_ROB_BANKER","onReceive_robBanker","S2C_BET","onReceive_bet","S2C_ROOM_BANKER","onReceive_roomBanker","S2C_LAST_CARD","onReceive_lastCard","forEach","on","element","players","seats","index","getChildByName","getComponent","myPlayerObj","active","data","console","log","un","sitDown","event","seatId","seatInfo","ready","Number","mySeatId","sitUp","roomNo","sendRequest","C2S_SEAT_CHOOSE","seatPlayers","list","seatIndex","indexOf","splice","uid","user","id","node","create","state","setBetNum","robBankerBet","banker","bet","sendReady","C2S_READY","result","sendCardAction","playerCards","currentGameNum","setReady","setBanker","onClickForBanker","multiple","betPointQuantity","C2S_ROB_BANKER","onClickForBet","C2S_BET"],"mappings":"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","file":"Game.js","sourceRoot":"../../../../../../assets/resources/Script/view","sourcesContent":["var self;\nvar requestHandler = require(\"RequestHandler\");\nvar onfire = require(\"onfire\");\nvar events = require(\"CustomEvents\");\nvar GameData = require(\"GameData\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        playerNode: cc.Node,\n        seatNode: cc.Node,\n        btnReady: cc.Node,\n        bankerNode: cc.Node,\n        betNode: cc.Node,\n        operation: cc.Node,\n        centerNode: cc.Node,        //中心点\n        myPlayer: cc.Node,          //我的节点\n\n    },\n\n    // use this for initialization\n    onLoad: function () {\n\n        self = this;\n        self.userInfo = GameData.getUserInfo();\n        self.roomCode = GameData.getRoomCode();\n        // 初始化控件\n        self.initWidget()\n        // 设置监听\n        var listenerList = [\n            [events.hall.HALL_DATA, this.onReceive_login, this],\n            [events.game.S2C_SEAT_CHOOSE, this.onReceive_sitDown, this],\n            [events.game.S2C_SYN_SEATS, this.onReceive_syn_seat, this],\n            [events.game.S2C_READY, this.onReceive_Ready, this],\n            [events.game.S2C_CARDS, this.onReceive_cards, this],\n            [events.game.S2C_GAME_STATE, this.onReceive_gameState, this],\n            [events.game.S2C_ROB_BANKER, this.onReceive_robBanker, this],\n            [events.game.S2C_BET, this.onReceive_bet, this],\n            [events.game.S2C_ROOM_BANKER, this.onReceive_roomBanker, this],\n            [events.game.S2C_LAST_CARD, this.onReceive_lastCard, this],\n\n\n\n        ]\n        listenerList.forEach(element => {\n            onfire.on(element[0], element[1], element[2]);\n        });\n\n    },\n\n    /**\n     * 初始化控件\n     */\n    initWidget() {\n        // 玩家\n        self.players = [];\n        // 座位\n        self.seats = [];\n        for (let index = 1; index < 13; index++) {\n            // 设置玩家\n            self.players[index] = self.playerNode.getChildByName(\"player\" + index).getComponent(\"Player\");\n            // 设置座位\n            self.seats[index] = self.seatNode.getChildByName(\"site\" + index)\n        }\n        self.myPlayerObj = self.myPlayer.getComponent(\"Player\");\n        self.btnReady.active = false;\n\n        // self.players[8].create();\n        // self.players[8].sendCardAction(this.centerNode);\n\n        // self.players[1].create();\n        // self.players[1].sendCardAction(this.centerNode);\n\n        // self.myPlayerObj.create();\n        // self.myPlayerObj.sendCardAction(this.centerNode);\n\n        // self.myPlayerObj.openLastCard([17, 18, 19, 20, 21], 21);\n\n    },\n\n    /**\n     * 登录返回结果\n     * @param {*} data \n     */\n    onReceive_login(data) {\n        console.log(\"进入游戏，接受数据：\", data)\n        self.userInfo = data.userInfo;\n        onfire.un(events.hall.HALL_DATA);\n    },\n    /**\n     * 坐下\n     * @param {*} seatId \n     */\n    sitDown(event, seatId) {\n\n        if (self.seatInfo && !self.seatInfo.ready) {\n            return;\n        }\n        seatId = Number(seatId);\n        if (self.mySeatId) {\n            // self.seats[self.mySeatId].active = true;\n            self.players[self.mySeatId].sitUp()\n        }\n\n        self.mySeatId = seatId;\n        console.log(\"选择座位：\", seatId);\n        var data = {\n            roomNo: self.roomCode,\n            seatId: seatId\n        }\n        requestHandler.sendRequest(events.game.C2S_SEAT_CHOOSE, data);\n    },\n\n    /**\n     * 收到坐下回调\n     * @param {*} data \n     */\n    onReceive_sitDown(data) {\n        // self.seats[self.mySeatId].active = false;\n        // self.players[self.mySeatId].create(self.userInfo)\n        console.log(\"坐下返回：\", data);\n    },\n\n    /**\n     * 同步坐下情况\n     * @param {*} data \n     */\n    onReceive_syn_seat(data) {\n        console.log(\"同步坐下玩家信息：\", data);\n        self.seatPlayers = data.seatPlayers;\n        var list = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\n        data.seatPlayers.forEach(element => {\n            // 显示玩家数据\n            var seatId = element.seatIndex\n           \n            // 隐藏坐下按钮\n            self.seats[self.mySeatId].active = false;\n            var index = list.indexOf(seatId);\n            list.splice(index, 1);\n\n            // 复制自己的信息\n            if (self.userInfo.uid == element.user.id) {\n                self.seatInfo = element;\n                self.btnReady.active = !element.ready;\n\n                if (!self.myPlayerObj.node.active){\n                    self.players[seatId].create(element)\n                }\n                else if(self.state == 2){\n                    self.myPlayerObj.setBetNum(element.robBankerBet)\n                }\n                else if(self.state == 3 && (!element.banker)){\n                    self.myPlayerObj.setBetNum(element.bet)\n                }\n                else if(self.state == 6){\n                    self.myPlayerObj.setBetNum(0)\n                }\n\n\n            }else{\n                if(!self.players.node.active){\n                    self.players[seatId].create(element)\n                }\n                else if(self.state == 2){\n                    self.players[seatId].setBetNum(element.robBankerBet)\n                }\n                else if(self.state == 3 && (!element.banker)){\n                    self.players[seatId].setBetNum(element.bet)\n                }\n                else if(self.state == 6){\n                    self.players[seatId].setBetNum(0)\n                }\n                \n            }\n        });\n\n        // 显示其他 坐下按钮\n        list.forEach(element => {\n            self.seats[element].active = true;\n        });\n\n\n    },\n\n    sendReady() {\n        var data = {\n            roomNo: self.roomCode,\n            seatId: self.mySeatId\n        }\n        requestHandler.sendRequest(events.game.C2S_READY, data);\n    },\n\n    /**\n     * 准备 返回\n     * @param {*} data \n     */\n    onReceive_Ready(data) {\n        if (data.result == 0) {\n            self.myPlayerObj.create(self.seatInfo);\n            self.players[self.mySeatId].sitUp();\n        }\n    },\n\n    /**\n     *  发送牌数据\n     * @param {*} data \n     */\n    onReceive_cards(data) {\n        console.log(\"发送牌数据：\", data)\n\n        self.seatPlayers.forEach(element => {\n            if (self.userInfo.uid == element.user.id) {\n                self.myPlayerObj.sendCardAction(this.centerNode, data.playerCards)\n\n            } else {\n                self.players[element.seatIndex].sendCardAction(this.centerNode)\n            }\n\n        });\n    },\n\n    /**\n     * 游戏状态值\n     * @param {*} data \n     */\n    onReceive_gameState(data) {\n        console.log(\"游戏状态：\", data.state, data.currentGameNum)\n\n        // 设置状态值\n        self.state = data.state;\n\n        // 座位显示\n        self.seatNode.active = self.state == 0 || self.state == 6;\n        // 抢庄面板显示\n        self.bankerNode.active = self.state == 2;\n        // 下注倍数显示\n        self.betNode.active == self.state == 3 && (!self.seatInfo.banker);\n        //未开始\n        if (data.state == 0) {\n\n            //开始游戏，发牌\n        } else if (data.state == 1) {\n            // 设置 准备状态消失\n            self.players.forEach(element => {\n                element.setReady(false);\n            });\n            //抢庄\n        } else if (data.state == 2) {\n\n            //普通玩家下注\n        } else if (data.state == 3) {\n            console.log(\"下注按钮：查看自己是否是庄家\",self.seatInfo.banker);\n            //玩家看牌\n        } else if (data.state == 4) {\n\n            //所有人开牌\n        } else if (data.state == 5) {\n\n            //自动准备\n        } else if (data.state == 6) {\n\n            self.players.forEach(element => {\n\n                element.setBanker(false);\n            });\n\n            self.myPlayerObj.setBanker(false);\n\n        }\n\n    },\n\n\n    /**\n     * 抢庄\n     * @param {*} event \n     * @param {*} multiple \n     */\n    onClickForBanker(event, multiple) {\n        var data = {\n            roomNo: self.roomCode,\n            seatId: self.mySeatId,\n            betPointQuantity: Number(multiple)\n        }\n        requestHandler.sendRequest(events.game.C2S_ROB_BANKER, data);\n    },\n\n    /**\n     * 抢庄回调\n     * @param {*} data \n     */\n    onReceive_robBanker(data) {\n        console.log(\"抢庄回调：\", data);\n        self.bankerNode.active = false;\n    },\n\n\n\n    /**\n     * 下注\n     * @param {*} event \n     * @param {*} multiple \n     */\n    onClickForBet(event, multiple) {\n        var data = {\n            roomNo: self.roomCode,\n            seatId: self.mySeatId,\n            betPointQuantity: Number(multiple)\n        }\n        requestHandler.sendRequest(events.game.C2S_BET, data);\n    },\n\n    /**\n     * 下注回调\n     * @param {*} data \n     */\n    onReceive_bet(data) {\n        console.log(\"下注回调：\", data);\n    },\n\n    /**\n     * 抢庄结果回调\n     * @param {*} data \n     */\n    onReceive_roomBanker(data) {\n        console.log(\"庄家ID 回调：\", data)\n        if (data.seatId == self.mySeatId){\n            self.myPlayerObj.setBanker(true)\n        }else{\n            self.players[data.seatId].setBanker(true)\n        }\n    },\n\n    /**\n    * 接受最后一张牌\n    * @param {*} data \n    */\n    onReceive_lastCard(data) {\n        console.log(\"庄家ID 回调：\", data)\n    },\n\n    /**\n    * \n    * @param {*} data \n    */\n    onReceive_lastCard(data) {\n        console.log(\"庄家ID 回调：\", data)\n    },\n\n    /**\n     * 设置状态\n     * @param {*} state \n     */\n    setGameState(state) {\n\n    },\n\n\n});\n"]}