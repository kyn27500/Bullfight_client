{"version":3,"sources":["../../../../../../assets/resources/Script/view/assets/resources/Script/view/Hall.js"],"names":["self","serverConnect","require","requestHandler","onfire","events","cc","Class","extends","Component","properties","labelNotice","Label","labelName","labelPlayerId","labelScore","btnRoom_niuniu","Button","btnJoinRoom","onLoad","connect","on","OPEN","onServerConnectOpen","ERROR","onServerConnectError","start","data","name","playerId","notice","score","setUserInfo","onDestroy","obj","console","log","JSON","stringify","un","hall","S2C_LOGIN","data1","data2","loginId","sendRequest","C2S_LOGIN","joinRoom","onResourceLoaded","errorMessage","loadedResource","Prefab","gamePrefab","instantiate","node","addChild","loader","loadRes","string"],"mappings":";;;;;;AACA,IAAIA,IAAJ;AACA,IAAIC,gBAAgBC,QAAQ,eAAR,CAApB;AACA,IAAIC,iBAAiBD,QAAQ,gBAAR,CAArB;AACA,IAAIE,SAASF,QAAQ,QAAR,CAAb;AACA,IAAIG,SAASH,QAAQ,cAAR,CAAb;;AAEAI,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAERC,qBAAaL,GAAGM,KAFR;AAGRC,mBAAWP,GAAGM,KAHN;AAIRE,uBAAeR,GAAGM,KAJV;AAKRG,oBAAYT,GAAGM,KALP;;AAORI,wBAAgBV,GAAGW,MAPX;AAQRC,qBAAaZ,GAAGW;AARR,KAHP;;AAcL;AACAE,YAAQ,kBAAY;AAChBnB,eAAO,IAAP;;AAEAC,sBAAcmB,OAAd,CAAsB,IAAtB;AACAhB,eAAOiB,EAAP,CAAUhB,OAAOD,MAAP,CAAckB,IAAxB,EAA8B,KAAKC,mBAAnC;AACAnB,eAAOiB,EAAP,CAAUhB,OAAOD,MAAP,CAAcoB,KAAxB,EAA+B,KAAKC,oBAApC;AACH,KArBI;;AAuBL;AACA;;AAEA;AACAC,SA3BK,mBA2BG;;AAEJ,YAAIC,OAAO;AACPC,kBAAM,KADC;AAEPC,sBAAU,GAFH;AAGPC,oBAAQ,OAHD;AAIPC,mBAAO;AAJA,SAAX;AAMA/B,aAAKgC,WAAL,CAAiBL,IAAjB;AACH,KApCI;AAsCLM,aAtCK,uBAsCO,CAEX,CAxCI;;;AA0CLR,0BAAsB,8BAASS,GAAT,EAAc;AAChCC,gBAAQC,GAAR,CAAYC,KAAKC,SAAL,CAAeJ,GAAf,CAAZ;AACH,KA5CI;;AA8CLX,yBAAqB,+BAAW;AAC5BY,gBAAQC,GAAR,CAAY,kBAAZ;AACAhC,eAAOmC,EAAP,CAAUlC,OAAOD,MAAP,CAAckB,IAAxB;;AAEAlB,eAAOiB,EAAP,CAAUhB,OAAOmC,IAAP,CAAYC,SAAtB,EAAiC,UAASC,KAAT,EAAgBC,KAAhB,EAAuB;AACpDR,oBAAQC,GAAR,CAAY,mBAAZ,EAAiCM,KAAjC;AACAtC,mBAAOmC,EAAP,CAAUlC,OAAOmC,IAAP,CAAYC,SAAtB;AACH,SAHD;;AAKA,YAAId,OAAO;AACPiB,qBAAQ;AADD,SAAX;AAGAzC,uBAAe0C,WAAf,CAA2BxC,OAAOmC,IAAP,CAAYM,SAAvC,EAAkDnB,IAAlD;AACH,KA3DI;;AA6DLoB,YA7DK,sBA6DM;AACP,YAAIC,mBAAmB,SAAnBA,gBAAmB,CAASC,YAAT,EAAuBC,cAAvB,EAAuC;AAC1D;AACA,gBAAID,YAAJ,EAAkB;AACd3C,mBAAG8B,GAAH,CAAO,cAAca,YAArB;AACA;AACH;AACD,gBAAI,EAAEC,0BAA0B5C,GAAG6C,MAA/B,CAAJ,EAA4C;AACxC7C,mBAAG8B,GAAH,CAAO,OAAP;AACA;AACH,aATyD,CASxD;;AAEF;AACA,gBAAIgB,aAAa9C,GAAG+C,WAAH,CAAeH,cAAf,CAAjB;AACAlD,iBAAKsD,IAAL,CAAUC,QAAV,CAAmBH,UAAnB;AAEH,SAfD;AAgBA;AACA9C,WAAGkD,MAAH,CAAUC,OAAV,CAAkB,kBAAlB,EAAsCT,gBAAtC;AACH,KAhFI;AAkFLhB,eAlFK,uBAkFOL,IAlFP,EAkFa;AACd3B,aAAKa,SAAL,CAAe6C,MAAf,GAAwB/B,KAAKC,IAA7B;AACA5B,aAAKc,aAAL,CAAmB4C,MAAnB,GAA4B/B,KAAKE,QAAjC;AACA7B,aAAKW,WAAL,CAAiB+C,MAAjB,GAA0B/B,KAAKG,MAA/B;AACA9B,aAAKe,UAAL,CAAgB2C,MAAhB,GAAyB/B,KAAKI,KAA9B;AACH;AAvFI,CAAT","file":"Hall.js","sourceRoot":"../../../../../../assets/resources/Script/view","sourcesContent":["\nvar self;\nvar serverConnect = require(\"ServerConnect\");\nvar requestHandler = require(\"RequestHandler\");\nvar onfire = require(\"onfire\");\nvar events = require(\"CustomEvents\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        labelNotice: cc.Label,\n        labelName: cc.Label,\n        labelPlayerId: cc.Label,\n        labelScore: cc.Label,\n\n        btnRoom_niuniu: cc.Button,\n        btnJoinRoom: cc.Button,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        self = this;\n\n        serverConnect.connect(true);\n        onfire.on(events.onfire.OPEN, this.onServerConnectOpen);\n        onfire.on(events.onfire.ERROR, this.onServerConnectError);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n    start() {\n\n        var data = {\n            name: \"唱山歌\",\n            playerId: 123,\n            notice: \"我是公告！\",\n            score: 23422,\n        }\n        self.setUserInfo(data)\n    },\n\n    onDestroy() {\n\n    },\n\n    onServerConnectError: function(obj) {\n        console.log(JSON.stringify(obj));\n    },\n\n    onServerConnectOpen: function() {\n        console.log(\"server connected\");\n        onfire.un(events.onfire.OPEN);\n\n        onfire.on(events.hall.S2C_LOGIN, function(data1, data2) {\n            console.log(\"s_game_login=====\", data1);\n            onfire.un(events.hall.S2C_LOGIN);\n        });\n\n        var data = {\n            loginId:123\n        };\n        requestHandler.sendRequest(events.hall.C2S_LOGIN, data);\n    },\n\n    joinRoom() {\n        var onResourceLoaded = function(errorMessage, loadedResource) {\n            //检查失败原因\n            if (errorMessage) {\n                cc.log('加载失败, 原因:' + errorMessage);\n                return;\n            }\n            if (!(loadedResource instanceof cc.Prefab)) {\n                cc.log('类型不对！');\n                return;\n            } //這個是型別的檢查\n\n            //接著，我們就可以進行實例化了\n            var gamePrefab = cc.instantiate(loadedResource);\n            self.node.addChild(gamePrefab);\n            \n        };\n        //這邊才是真的使用cc.loader進行載入，並且呼叫我們上面寫的方法\n        cc.loader.loadRes(\"Prefab/join_room\", onResourceLoaded);\n    },\n\n    setUserInfo(data) {\n        self.labelName.string = data.name;\n        self.labelPlayerId.string = data.playerId;\n        self.labelNotice.string = data.notice;\n        self.labelScore.string = data.score;\n    }\n});\n"]}