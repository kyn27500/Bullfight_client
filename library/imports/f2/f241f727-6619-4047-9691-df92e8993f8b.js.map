{"version":3,"sources":["../../../../../../../../assets/resources/Script/view/games/doushouqi/assets/resources/Script/view/games/doushouqi/Doushouqi.js"],"names":["Com","require","onfire","requestHandler","config","Tools","events","scenes","HallData","globalData","consts","myUserInfo","otherUserInfo","prefabHelper","texts","cc","Class","extends","Component","properties","sp_head_red","default","type","Sprite","sp_head_blue","node_table","Node","sp_tip","label_tip","Label","sp_alert","label_alert","label_red_btn","label_blue_btn","node_dir","sp_up","Animation","sp_down","sp_left","sp_right","sp_destory","sp_white","sp_red_time","sp_blue_time","label_red_time","label_blue_time","nodeResult","btn_help","Button","node_help","newPlayerNode","sp_hand","myName","otherName","animal_blue_Prefab","Prefab","animal_red_Prefab","animal_Prefab","empty_prefab","result_prefab","defalutTiem","count","ndMyGenderMale","ndMyGenderFemale","ndOtherGenderMale","ndOtherGenderFemale","onLoad","onLoadAudio","deleteItem","isNetwork","init","initUI","onOptionalTimeAni","listenerList","game","GAME_DATA","onReceive_login","doushouqi","S2C_START","onReceive_start","S2C_MOVE","onReceive_move","S2C_TALK","onReceive_talk","S2C_ANIMAL","onReceive_animal","S2C_GAMEOVER","onReceive_overGame","S2C_ASK_FOR_DRAW","onReceive_qiuHeOther","S2C_ASK_FOR_DRAW_AGREE","onReceive_qiuHeAgreeOther","forEach","on","element","addButtonListener","onDestroy","un","start","data1","data2","console","log","allData","gameData","string","name","_selfUID","uid","_otherUID","_doItUID","s_douShouQi_doIt","doIt","icon","loadRemoteImage","active","sex","gender","FEMALE","MALE","success","openUpdate","onShowValidOptionalObj","row","r","col","c","myCode","doItID","_isFirst","firstCode","animalIndex","baseData","firstUID","firstAnimal","setItem","node","stopAllActions","getItem","animalCode","tableNodes","animal","getComponent","COMPONENT_ANIMAL","playAnimation","onAnimaltionBreakCallback","bind","onReceive_MyCode","data","_myCode","index0","index1","moveR","moveC","doItObj","targetPos","x","allPos","y","selectedPos","moveData","selectedRow","selectedCol","winAnimalIdx","setLocalZOrder","onMoveToTarget","onMoveCallbackDel","onCheckOptionSelf","onRecive_doIt","JSON","stringify","closeUpdate","resultData","topPortrait","leftPortrait","rightPortrait","leftName","rightName","leftGender","rightGender","result","appId","youWin","getCurGameInfo","createResultScreen","_alertStr","ASK_FOR_DRAW","onAddAlert","onAddTip","ASK_FOR_DRAW_DENIED","onSendGameData","packgeName","sendRequest","scale","opacity","scaleY","onHideTipDir","_blueAnimal","_redAnimal","_rand01","_blueSelf","_pinkSelf","_isShowTip","_isShowAlert","_isCanOptional","_selectedPoint","_rand0Count","_rand1Count","_firstAnimalIndex","_helpNode","_isNewPlayer","_selectedObj","_compareState","eq","gt","lt","same","width","winSize","height","Vec2","allBtnEmpty","pos","emptyNode","index","jndex","getChildByName","toString","position","onInitTable","$this","EventType","TOUCH_START","event","TOUCH_END","TOUCH_CANCEL","onTouchListener","customEventData","BACK","EXIT","EXIT_CONFIRM","C2S_ASK_FOR_DRAW","SURRENDER","SURRENDER_CONFIRM","BUTTON_REFUSE","iDo","C2S_ASK_FOR_DRAW_AGREE","onHideAlert","BUTTON_AGREE","C2S_SURRENDER","token","C2S_EXIT_GAME","director","loadScene","hall","HALL","fire","HALL_DATA","rawData","onLoadHeadImg","onDelRepeatRandBlue","onDelRepeatRandPink","btnEmpty","_componentStr","_gameDataContent","length","instantiate","addComponent","parent","onSetRowAndCol","onSetTouchCallback","onEmptyTouchCallback","onCreateAnimal","onNewPlayerGuid","animalStatus","isDie","_animal","onLoadAnimal","onBreakBombCallback","onBombTouchCallback","onTouchCallback","onRandAnimal","rand01","onRandomNum","idx","randNum","push","splice","objCode","isSelected","onIsSelfdoit","WAITING_FOR_OPPONENT","onRunBig","onCheckRoundMove","onRunSmall","onCheckOptionalValid","CANNOT_CONTROL_OPPONENT","onClearAlgorithm","C2S_MOVE","componentStr","C2S_ANIMAL","selected0","selected1","moveState","onPlayGameEffect","onMoveCallback","onPlayDestoryAni","onDestory","onGetAnimalIndex","targetDie","onSetOptionalTime","onResetStatus","onRedBoardAni","onBlueBoardAni","isClear","onCheckCompare","targetObj","selectedIndex","targetIndex","compareState","onCheckAnimalSame","isSame","targetComStr","selectedStr","tempNode","comStr","currCode","onGetAnimalCode","getAnimalIsBreak","onShowSelfTip","onHideTip","onOptionalObj","getAnimalIsBig","onClearTabel","onRestart","interval","repeat","delay","schedule","onTimeDownCallback","unschedule","onCanOptionalObj","obj","moveDir","up","down","left","right","isShowDir","onFindAnimalOfIndex","onTipMoveDirection","onRepeatAction","ANI_UP","ANI_DOWN","ANI_LEFT","ANI_RIGHT","nodeObj","dirStr","animState","play","wrapMode","WrapMode","Loop","repeatCount","Infinity","onStopRepeatAction","stop","onDestoryAnimation","ANI_DESTROY","self","onFinished","optionalObj","onFinishCallback","scale2","scaleTo","runAction","delayTime","seq","sequence","callFunc","scale1","onWhiteBoardAni","OBJ_RED","onActiconHand","repeatForever","moveTo","tipStr","onShowtip","onActionFinishCall","onHidetip","descStr","labelRedBtn","REFUSE","labelBlueBtn","AGREE","onShowAlert"],"mappings":"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","file":"Doushouqi.js","sourceRoot":"../../../../../../../../assets/resources/Script/view/games/doushouqi","sourcesContent":["/**\n * @brief: 斗兽棋主场景(单机-网络版调试)（如果没有网络的情况下，可以完单机的）\n * @time:  2018-05-8\n * @author: JiangTao kungfupandajt@163.com\n */\n\nvar Com = require('Com');\nvar onfire = require(\"onfire\"); //处理事件的类库\nvar requestHandler = require(\"RequestHandler\");\nvar config = require(\"config\");\nvar Tools = require(\"Tools\");\nvar events = require(\"CustomEvents\");\nvar scenes = require(\"SceneList\");\nvar HallData = require(\"HallData\");\nvar globalData = require(\"Global\");\nvar consts = require(\"Constants\");\nvar myUserInfo = null;\nvar otherUserInfo = null;\nvar prefabHelper = require(\"PrefabHelper\");\nvar texts = require(\"Text\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        sp_head_red: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        sp_head_blue: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        node_table: {\n            default: null,\n            type: cc.Node,\n        },\n\n        sp_tip: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        label_tip: {\n            default: null,\n            type: cc.Label,\n        },\n\n        sp_alert: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        label_alert: {\n            default: null,\n            type: cc.Label,\n        },\n\n        // 红色按钮文字\n        label_red_btn: {\n            default: null,\n            type: cc.Label,\n        },\n\n        // 蓝色按钮文字\n        label_blue_btn: {\n            default: null,\n            type: cc.Label,\n        },\n\n        node_dir: {\n            default: null,\n            type: cc.Node\n        },\n\n        sp_up: {\n            default: null,\n            type: cc.Animation\n        },\n\n        sp_down: {\n            default: null,\n            type: cc.Animation\n        },\n\n        sp_left: {\n            default: null,\n            type: cc.Animation\n        },\n\n        sp_right: {\n            default: null,\n            type: cc.Animation\n        },\n\n        sp_destory: {\n            default: null,\n            type: cc.Animation\n        },\n\n        // 白板\n        sp_white: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        // 红色方时间面板\n        sp_red_time: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        // 蓝色方时间面板\n        sp_blue_time: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        // 红方时间\n        label_red_time: {\n            default: null,\n            type: cc.Label\n        },\n\n        // 蓝方时间\n        label_blue_time: {\n            default: null,\n            type: cc.Label\n        },\n\n        nodeResult: {\n            default: null,\n            type: cc.Node\n        },\n\n        btn_help: {\n            default: null,\n            type: cc.Button\n        },\n\n        node_help: {\n            default: null,\n            type: cc.Node\n        },\n\n        newPlayerNode: {\n            default: null,\n            type: cc.Node\n        },\n\n        sp_hand: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        myName: cc.Label,\n\n        otherName: cc.Label,\n\n        animal_blue_Prefab: cc.Prefab, // 蓝方预制资源\n\n        animal_red_Prefab: cc.Prefab, // 红方预制资源\n\n        animal_Prefab: cc.Prefab, // 默认动物预制资源\n\n        empty_prefab: cc.Prefab, // 空的预制资源\n\n        result_prefab: cc.Prefab, // 结果预知资源\n\n        defalutTiem: 30, //  默认操作时间\n\n        count: 30, //  倒计时计次\n\n        ndMyGenderMale: cc.Node,\n        ndMyGenderFemale: cc.Node,\n        ndOtherGenderMale: cc.Node,\n        ndOtherGenderFemale: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n\n        // 加载斗兽棋音效\n        Com.onLoadAudio();\n\n        Com.deleteItem();\n\n        // this.onActiconHand();\n\n        // 单机模式\n        if (!config.isNetwork) {\n\n            this.init();\n\n            this.initUI();\n\n            this.onOptionalTimeAni();\n\n        } else {\n\n            // 网络监听列表\n            var listenerList = [\n                [events.game.GAME_DATA, this.onReceive_login, this],\n                [events.game.doushouqi.S2C_START, this.onReceive_start, this],\n                [events.game.doushouqi.S2C_MOVE, this.onReceive_move, this],\n                [events.game.doushouqi.S2C_TALK, this.onReceive_talk, this],\n                [events.game.doushouqi.S2C_ANIMAL, this.onReceive_animal, this],\n                [events.game.doushouqi.S2C_GAMEOVER, this.onReceive_overGame, this],\n                [events.game.doushouqi.S2C_ASK_FOR_DRAW, this.onReceive_qiuHeOther, this],\n                [events.game.doushouqi.S2C_ASK_FOR_DRAW_AGREE, this.onReceive_qiuHeAgreeOther, this],\n            ];\n\n            listenerList.forEach(element => {\n\n                onfire.on(element[0], element[1], element[2]);\n\n            });\n        }\n\n        this.addButtonListener();\n\n    },\n\n    // 销毁时调用\n    onDestroy() {\n\n        var listenerList = [\n            [events.game.GAME_DATA, this.onReceive_login, this],\n            [events.game.doushouqi.S2C_START, this.onReceive_start, this],\n            [events.game.doushouqi.S2C_MOVE, this.onReceive_move, this],\n            [events.game.doushouqi.S2C_TALK, this.onReceive_talk, this],\n            [events.game.doushouqi.S2C_ANIMAL, this.onReceive_animal, this],\n            [events.game.doushouqi.S2C_GAMEOVER, this.onReceive_overGame, this],\n            [events.game.doushouqi.S2C_ASK_FOR_DRAW, this.onReceive_qiuHeOther, this],\n            [events.game.doushouqi.S2C_ASK_FOR_DRAW_AGREE, this.onReceive_qiuHeAgreeOther, this],\n        ];\n\n        // 移除监听\n        listenerList.forEach(element => {\n\n            onfire.un(element[0]);\n\n        });\n    },\n\n    start() {\n\n\n\n    },\n\n    // ******************    数据通讯   ******************\n\n    // 进入游戏\n    onReceive_login(data1, data2) {\n\n        console.log(\" onReceive_login ++++++++++++++++++++++++ Doushouqi \");\n\n        this.allData = data1;\n\n        this.gameData = data1[\"gameData\"];\n\n        // 初始化用户数据\n        myUserInfo = data1.myUserInfo;\n        otherUserInfo = data1.otherUserInfo;\n        this.myName.string = data1.myUserInfo.name;\n        this.otherName.string = data1.otherUserInfo.name;\n        this._selfUID = data1.myUserInfo.uid;\n        this._otherUID = data1.otherUserInfo.uid;\n        this._doItUID = data1.s_douShouQi_doIt.doIt;\n        console.log(\"my icon url ===== \", data1.myUserInfo.icon);\n        console.log(\"other icon url ===== \", data1.otherUserInfo.icon);\n        Tools.loadRemoteImage(data1.myUserInfo.icon, this.sp_head_red);\n        Tools.loadRemoteImage(data1.otherUserInfo.icon, this.sp_head_blue);\n        this.ndMyGenderFemale.active = (myUserInfo.sex == consts.gender.FEMALE);\n        this.ndMyGenderMale.active = (myUserInfo.sex == consts.gender.MALE);\n        this.ndOtherGenderFemale.active = (otherUserInfo.sex == consts.gender.FEMALE);\n        this.ndOtherGenderMale.active = (otherUserInfo.sex == consts.gender.MALE);\n\n        // 初始化 斗兽棋棋盘\n        this.init();\n        this.initUI();\n    },\n\n    // 游戏开始\n    onReceive_start(data1, data2) {\n\n        console.log(\"***************c_doushouqi_play***************\", data1[\"success\"])\n\n        if (data1.success == 0) {\n\n            this.openUpdate();\n\n            this.onOptionalTimeAni();\n\n            // 找出当前可以操作的动物\n            this.onShowValidOptionalObj();\n\n        }\n\n    },\n\n    // 点击箱子后请求到的动物\n    onReceive_animal(data1, data2) {\n\n        if (data1.success == 0) {\n\n            var row = data1.r;\n\n            var col = data1.c;\n\n            var myCode = -1;\n\n            // 切换操作对象\n            var doItID = data1.s_douShouQi_doIt.doIt;\n\n            // console.log( \" all UID ==== \", this._doItUID, this._selfUID, this._otherUID );\n\n            // console.log( \" this._isFirst ==== \", this._isFirst, doItID );\n\n            if (this._isFirst) {\n\n                this._isFirst = false;\n\n                var firstCode = 0;\n\n                if (data1.animalIndex < 10) {\n\n                    // 红色 都属于第一个操作用户的\n                    firstCode = 1;\n\n                } else {\n\n                    // 蓝色 都属于第一个操作用户的\n                    firstCode = 2;\n\n                }\n\n                var baseData = {\n\n                    firstUID: this._doItUID,\n\n                    firstAnimal: firstCode,\n\n                };\n\n                Com.setItem(baseData);\n\n                // 确定自己动物的颜色\n                if (this._doItUID == this._selfUID) {\n\n                    myCode = this._selfUID;\n\n                } else {\n\n                    myCode = this._otherUID;\n\n                }\n\n                this.sp_hand.node.stopAllActions();\n\n            } else {\n\n                var firstAnimal = Com.getItem().firstAnimal;\n\n                var firstUID = Com.getItem().firstUID;\n\n                var animalCode = 0;\n\n                if (firstUID == this._selfUID) {\n\n                    if (firstAnimal == 1) {\n\n                        // 所有红色动物mycode都标记为this._selfUID\n                        if (data1.animalIndex < 10) {\n\n                            myCode = this._selfUID;\n\n                        } else {\n\n                            myCode = this._otherUID;\n\n                        }\n\n                    } else {\n\n                        // 所有蓝色动物mycode都标记为this._selfUID\n                        if (data1.animalIndex > 10) {\n\n                            myCode = this._selfUID;\n\n                        } else {\n\n                            myCode = this._otherUID;\n\n                        }\n\n                    }\n\n                } else {\n\n                    if (firstAnimal == 1) {\n\n                        // 所有红色动物mycode都标记为this._otherUID\n                        if (data1.animalIndex < 10) {\n\n                            myCode = this._otherUID;\n\n                        } else {\n\n                            myCode = this._selfUID;\n\n                        }\n\n                    } else {\n\n                        // 所有蓝色动物mycode都标记为this._otherUID\n\n                        if (data1.animalIndex > 10) {\n\n                            myCode = this._otherUID;\n\n                        } else {\n\n                            myCode = this._selfUID;\n\n                        }\n\n                    }\n\n                }\n\n            }\n\n            this._doItUID = doItID;\n\n            this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).playAnimation(this.onAnimaltionBreakCallback.bind(this), data1.animalIndex, myCode);\n\n        }\n\n    },\n\n    onReceive_MyCode(data) {\n\n        console.log(\" onReceive_MyCode ==== \", data[\"myCode\"]);\n\n        this._myCode = data.myCode;\n\n    },\n\n    // 移动动物\n    onReceive_move(data1, data2) {\n\n        // console.log( \"  onReceive_move ++++++++++++++++++++++++++++ \" );\n\n        if (data1.success != 0) {\n\n            console.log(\"  success move errcode \", data1.success);\n            return;\n        }\n\n        var index0 = data1.r;\n\n        var index1 = data1.c;\n\n        var row = data1.moveR;\n\n        var col = data1.moveC;\n\n        var myCode = -1;\n\n        var doItObj = data1.s_douShouQi_doIt;\n\n        if (doItObj != null) {\n\n            var doItID = data1.s_douShouQi_doIt.doIt;\n\n            this._doItUID = doItID;\n\n        }\n\n        var targetPos = {\n            x: this.allPos[row][col].x,\n            y: this.allPos[row][col].y\n        };\n\n        var selectedPos = {\n            x: this.allPos[index0][index1].x,\n            y: this.allPos[index0][index1].y\n        };\n\n        var moveData = {\n            targetPos: targetPos,\n            selectedRow: index0,\n            selectedCol: index1,\n            row: row,\n            col: col,\n            winAnimalIdx: data1.animalIndex\n        };\n\n        this.tableNodes[index0][index1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).node.setLocalZOrder(99);\n\n        this.tableNodes[index0][index1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onMoveToTarget(moveData, this.onMoveCallbackDel.bind(this));\n\n        this.onCheckOptionSelf();\n\n    },\n\n    // 操作方 暂时不用\n    onRecive_doIt(data1, data2) {\n\n\n    },\n\n    // 游戏结束\n    onReceive_overGame(data1, data2) {\n        // this.closeUpdate();\n        console.log(\"onReceive_overGame s \", JSON.stringify(data1));\n        // this.onResultCall = function(result) {\n        //     console.log(\" onResultCall  === \");\n        // 清除本地缓存的数据：记录的自己的动物的颜色以及UID\n        Com.deleteItem();\n        this.closeUpdate();\n        //this.onAddResultLayer(data1[\"youWin\"]);\n\n        var resultData = {};\n        if (!config.isNetwork) {\n            resultData.topPortrait = \"http://zyhdheads.oss-cn-beijing.aliyuncs.com/default1.png\";\n            resultData.leftPortrait = \"http://zyhdheads.oss-cn-beijing.aliyuncs.com/default1.png\";\n            resultData.rightPortrait = \"http://zyhdheads.oss-cn-beijing.aliyuncs.com/default1.png\";\n            resultData.leftName = \"左边的玩家\";\n            resultData.rightName = \"右边的玩家\";\n            resultData.leftGender = 1; // 左边性别 0:男 1:女\n            resultData.rightGender = 0; // 右边性别 0:男 1:女\n            resultData.result = 1; // 结果 1:胜利 0:平局 -1:失败\n            resultData.appId = 2; // 游戏id\n        } else {\n            resultData.topPortrait = myUserInfo.icon;\n            resultData.leftPortrait = myUserInfo.icon;\n            resultData.rightPortrait = otherUserInfo.icon;\n            resultData.leftName = myUserInfo.name;\n            resultData.rightName = otherUserInfo.name;\n            resultData.leftGender = myUserInfo.sex;\n            resultData.rightGender = otherUserInfo.sex;\n            resultData.result = data1.youWin;\n            resultData.appId = HallData.getCurGameInfo().appId;\n        }\n        prefabHelper.createResultScreen(this.nodeResult, resultData);\n        // };\n        // this.scheduleOnce(this.onResultCall(result), 0.5);\n        // 切换场景\n        // cc.director.loadScene(\"hall\",function(){\n        //     onfire.fire(\"hall_gameOver\",data1, data2);\n        // });\n    },\n\n    // 求和询问提示\n    onReceive_qiuHeOther() {\n\n        this._alertStr = consts.game.doushouqi.ASK_FOR_DRAW;\n\n        this.onAddAlert(texts.game.doushouqi.ASK_FOR_DRAW);\n\n    },\n\n    onReceive_qiuHeAgreeOther() {\n\n        this.onAddTip(texts.game.doushouqi.ASK_FOR_DRAW_DENIED);\n\n    },\n\n    // 发送数据\n    /**\n     * @brief: 发送数据到服务器\n     * @data: 发送的数据\n     * @packgeName: 发送的数据的包明\n     */\n    onSendGameData: function(packgeName, data) {\n\n        requestHandler.sendRequest(packgeName, data);\n\n    },\n\n    onReceive_talk: function(data1, data2) {\n\n        if (data1.success == 0) {\n\n\n\n        }\n\n    },\n\n\n    // ******************    数据通讯   ******************\n\n    // update (dt) {},\n\n    initUI: function() {\n\n        this.sp_tip.node.active = true;\n\n        this.sp_tip.node.scale = 0;\n\n        this.sp_alert.node.active = true;\n\n        this.sp_alert.node.scale = 0;\n\n        this.sp_destory.node.active = false;\n\n        this.sp_destory.node.opacity = 0;\n\n        this.sp_white.node.active = true;\n\n        this.sp_white.node.opacity = 255;\n\n        this.sp_red_time.node.active = true\n\n        this.sp_red_time.node.opacity = 255;\n\n        this.sp_red_time.node.scaleY = 0;\n\n        this.sp_blue_time.node.active = true\n\n        this.sp_blue_time.node.opacity = 255;\n\n        this.sp_blue_time.node.scaleY = 0;\n\n        this.onHideTipDir();\n\n        this.node_dir.setLocalZOrder(100);\n\n        this.sp_destory.node.setLocalZOrder(100);\n\n    },\n\n    // init 初始化\n    init: function() {\n\n        this._blueAnimal = [];\n\n        this._redAnimal = [];\n\n        this._rand01 = -1;\n\n        this._blueSelf = true;\n\n        this._pinkSelf = false;\n\n        this._isShowTip = false;\n\n        this._isShowAlert = false;\n\n        this._isCanOptional = false; //当前是否可以进行操作\n\n        this._selectedPoint = [-1, -1]; //记录被选中的动物\n\n        this._alertStr = \"\"; //标记当前是求和还是认输按钮 默认是空\n\n        this._rand0Count = 0;\n\n        this._rand1Count = 0;\n\n        this._isFirst = true;\n\n        this._firstAnimalIndex = -1;\n\n        this._helpNode = null;\n\n        this._isNewPlayer = false;\n\n        // row:行\n        this._selectedObj = {\n            row: -1,\n            col: -1,\n            count: 0\n        }; //\n\n        // eq:相等 gt:(greater than) 大于 lt:(less than) 小与\n        this._compareState = {\n            eq: 0,\n            gt: 1,\n            lt: 2,\n            same: 3\n        };\n\n        this.width = cc.winSize.width;\n\n        this.height = cc.winSize.height;\n\n        // 所有点集合\n        this.allPos = [\n            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\n            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\n            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\n            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\n        ];\n\n        this.allBtnEmpty = [\n\n            [cc.Button, cc.Button, cc.Button, cc.Button],\n            [cc.Button, cc.Button, cc.Button, cc.Button],\n            [cc.Button, cc.Button, cc.Button, cc.Button],\n            [cc.Button, cc.Button, cc.Button, cc.Button],\n\n        ];\n\n        var pos = null;\n\n        var emptyNode = null;\n\n        for (let index = 0; index < 4; index++) {\n\n            for (let jndex = 0; jndex < 4; jndex++) {\n\n                emptyNode = this.node_table.getChildByName(\"node_pos_\" + index.toString() + jndex.toString())\n\n                pos = emptyNode.position;\n\n                this.allPos[index][jndex] = pos;\n\n            }\n\n        }\n\n        // 所有动物集合\n\n        this.tableNodes = [\n            [{}, {}, {}, {}],\n            [{}, {}, {}, {}],\n            [{}, {}, {}, {}],\n            [{}, {}, {}, {}],\n        ];\n\n        this.onInitTable();\n\n    },\n\n    addButtonListener: function() {\n\n        var $this = this;\n\n        this.btn_help.node.on(cc.Node.EventType.TOUCH_START, function(event) {\n\n            console.log(\"TOUCH_START\")\n\n            $this.node_help.active = true;\n\n            $this.node_help.opacity = 255;\n\n        });\n\n        this.btn_help.node.on(cc.Node.EventType.TOUCH_END, function(event) {\n\n            $this.node_help.active = false;\n\n            $this.node_help.opacity = 0;\n\n        });\n\n        this.btn_help.node.on(cc.Node.EventType.TOUCH_CANCEL, function(event) {\n\n            $this.node_help.active = false;\n\n            $this.node_help.opacity = 0;\n\n        });\n\n    },\n\n    // 按钮事件监听\n    onTouchListener: function(event, customEventData) {\n\n        console.log(\" customEventData \", customEventData);\n\n        if (customEventData == consts.game.doushouqi.BACK) {\n            this._alertStr = consts.game.doushouqi.EXIT;\n            this.onAddAlert(texts.game.doushouqi.EXIT_CONFIRM);\n        } else if (customEventData == consts.game.doushouqi.ASK_FOR_DRAW) {\n\n            this._alertStr = consts.game.doushouqi.ASK_FOR_DRAW;\n\n            var data = {};\n\n            this.onSendGameData(events.game.doushouqi.C2S_ASK_FOR_DRAW, data);\n\n        } else if (customEventData == consts.game.doushouqi.SURRENDER) {\n\n            this._alertStr = consts.game.doushouqi.SURRENDER;\n\n            this.onAddAlert(texts.game.doushouqi.SURRENDER_CONFIRM);\n\n        } else if (customEventData == consts.game.doushouqi.BUTTON_REFUSE) {\n\n            if (this._alertStr == consts.game.doushouqi.ASK_FOR_DRAW) {\n\n                var data = {\n                    iDo: 1\n                };\n\n                this.onSendGameData(events.game.doushouqi.C2S_ASK_FOR_DRAW_AGREE, data);\n\n            } else if (this._alertStr == consts.game.doushouqi.SURRENDER) {\n\n\n\n            }\n\n            // 拒绝按钮\n            this.onHideAlert();\n\n        } else if (customEventData == consts.game.doushouqi.BUTTON_AGREE) {\n\n            if (this._alertStr == consts.game.doushouqi.ASK_FOR_DRAW) {\n\n                var data = {\n                    iDo: 0\n                };\n\n                this.onSendGameData(events.game.doushouqi.C2S_ASK_FOR_DRAW_AGREE, data);\n\n            } else if (this._alertStr == consts.game.doushouqi.SURRENDER) {\n\n                var data = {};\n\n                this.onSendGameData(events.game.doushouqi.C2S_SURRENDER, data);\n\n            } else if (this._alertStr == consts.game.doushouqi.EXIT) {\n                var data = {\n                    appId: HallData.getCurGameInfo().appId,\n                    token: globalData.myUserInfo.token,\n                };\n                requestHandler.sendRequest(events.game.C2S_EXIT_GAME, data);\n                cc.director.loadScene(scenes.hall.HALL, function() {\n                    onfire.fire(events.hall.HALL_DATA, HallData.rawData);\n                });\n            }\n\n            // 确认按钮\n            this.onHideAlert();\n\n        }\n\n    },\n\n    // 玩家头像加载\n    onLoadHeadImg: function() {\n\n\n\n    },\n\n    // 初始化玩家棋盘\n    onInitTable: function() {\n        // 随机生成动物\n        /**\n         *  首先：当前格子生成那个颜色的动物 0 蓝色动物 1 粉色动物\n         *  其次：根据颜色，随机生成相应的动物。【1-8】 分别代表不同的动物，去重随机，如果发现\n         *      随机到相同的数字，则删除，重新随机\n         *  在每次随机的时候都要判断0或1（也就是蓝色动物或粉色动物）是否已经随机了8中动物，如果随机够了，则不在\n         *  进行随机；此时只随机另一种颜色的动物。 如果两种动物都随机够了，则停止。\n         */\n        this.onDelRepeatRandBlue();\n\n        this.onDelRepeatRandPink();\n\n        var btnEmpty = null;\n\n        var _componentStr = '';\n\n        var _gameDataContent = 0;\n\n        for (let index = 0; index < this.gameData.length; index++) {\n\n            for (let jndex = 0; jndex < this.gameData[index].length; jndex++) {\n\n                _gameDataContent = this.gameData[index][jndex];\n\n                btnEmpty = cc.instantiate(this.empty_prefab);\n\n                btnEmpty.addComponent('BtnEmpty');\n\n                btnEmpty.x = this.allPos[index][jndex].x;\n\n                btnEmpty.y = this.allPos[index][jndex].y;\n\n                btnEmpty.setLocalZOrder(0);\n\n                btnEmpty.parent = this.node_table;\n\n                this.allBtnEmpty[index][jndex] = btnEmpty;\n\n                btnEmpty.getComponent('BtnEmpty').onSetRowAndCol(index, jndex);\n\n                btnEmpty.getComponent('BtnEmpty').onSetTouchCallback(this.onEmptyTouchCallback.bind(this));\n\n                // 初始化小动物\n                this.onCreateAnimal(index, jndex, _gameDataContent);\n\n            }\n\n        }\n\n        this.onNewPlayerGuid();\n\n    },\n\n    onCreateAnimal: function(index, jndex, animalStatus) {\n\n        if (animalStatus == -1) {\n\n            this.tableNodes[index][jndex] = {\n                isDie: true,\n                animal: null\n            };\n            return;\n\n        }\n\n        var _animal = cc.instantiate(this.animal_Prefab);\n\n        _animal.addComponent('Animal');\n\n        _animal.getComponent('Animal').init();\n\n        _animal.x = this.allPos[index][jndex].x;\n\n        _animal.y = this.allPos[index][jndex].y;\n\n        _animal.active = true;\n\n        _animal.opacity = 255;\n\n        _animal.setLocalZOrder(10);\n\n        _animal.parent = this.node_table;\n\n        console.log(\" 创建动物： \", animalStatus);\n\n        if (animalStatus == 0) {\n\n            // 箱子 不需要任何操作\n\n        } else {\n\n            _animal.getComponent('Animal').onLoadAnimal(animalStatus);\n\n            // onSetAnimalCode\n            // var stoargeUID = Com.getItem().firstUID;\n\n            // if ( stoargeUID == this._selfUID ) {\n\n            //     _animal.getComponent('Animal').onSetAnimalCode( Com.getItem().myAnimal );\n\n            // } else {\n\n            //     _animal.getComponent('Animal').onSetAnimalCode( Com.getItem().otherAnimal );\n\n            // }\n\n        }\n\n        this.tableNodes[index][jndex] = {\n            isDie: false,\n            animal: _animal\n        };\n\n        _animal.getComponent('Animal').onSetRowAndCol(index, jndex);\n\n        _animal.getComponent('Animal').onBreakBombCallback(this.onBombTouchCallback.bind(this));\n\n        _animal.getComponent('Animal').onSetTouchCallback(this.onTouchCallback.bind(this));\n\n    },\n\n    onRandAnimal: function() {\n\n        var rand01 = Com.onRandomNum(0, 2);\n\n        if (this._rand0Count == 8) {\n\n            rand01 = 1;\n\n        } else if (this._rand1Count == 8) {\n\n            rand01 = 0;\n\n        }\n\n        if (rand01 == 0) {\n\n            this._rand0Count += 1;\n\n            return this._blueAnimal[this._rand0Count - 1];\n\n        } else {\n\n            this._rand1Count += 1;\n\n            return this._redAnimal[this._rand1Count - 1];\n\n        }\n\n    },\n\n    // 去重随机 蓝色动物\n    /**\n     * for(i=0;i<10;i++)                    //产生10个随机数\n        {\n            A[i]=1+rand()%10;                //得到随机数(范围在1-10之间)\n                for(j=0;j<i;j++)                 //判断和前面的数是否重复\n                    if(A[i]==A[j]) {\n                        i--;\n                        break;\n                    }  //如果重复,重新产生随机数\n        }\n     */\n    onDelRepeatRandBlue: function() {\n\n        var idx = 0;\n\n        for (; idx < 8; idx++) {\n\n            var randNum = Com.onRandomNum(1, 9);\n\n            this._blueAnimal.push(randNum);\n\n            for (let jndex = 0; jndex < idx; jndex++) {\n\n                if (randNum == this._blueAnimal[jndex]) {\n\n                    this._blueAnimal.splice(idx, 1);\n\n                    idx--;\n\n                    break;\n\n                }\n\n            }\n\n        }\n\n\n    },\n\n    // 去重随机 粉色动物\n    onDelRepeatRandPink: function() {\n\n        var idx = 0;\n\n        for (; idx < 8; idx++) {\n\n            var randNum = Com.onRandomNum(11, 19);\n\n            this._redAnimal.push(randNum);\n\n            for (let jndex = 0; jndex < idx; jndex++) {\n\n                if (randNum == this._redAnimal[jndex]) {\n\n                    this._redAnimal.splice(idx, 1);\n\n                    idx--;\n\n                    break;\n\n                }\n\n            }\n\n        }\n\n    },\n\n    // 点击棋子回调；一次只能点击一个自己的棋子；如果点击自己的第二枚棋子，则取消前一个选中的棋子；\n    // 如果点击自己的棋子后，在点击对方的棋子则进行对比大小，然后进行消除的逻辑\n    // 如果点击的是初始的方块，则是翻棋子，然后轮到对方操作\n\n    // 首先判断当前是否为蓝方操作，如果是，在没有选中蓝方的情况下，是不可以点击粉色动物的；在选中蓝方情况下，\n    // 点击任意一种颜色动物，都要进行判断（是否相邻，如果相邻，可以进行比较吃或被吃，如果不相邻，取消被选中状态）\n\n\n    //切换动物操作时候有问题\n    /**\n     *  有哪些操作需要切换用户操作\n     *  1.默认是蓝色方操作（不管是蓝方操作还是粉方操作），在点击翻开棋子动作后切换用户\n     *  2.点击棋子移动（或者吃掉另一方的棋子），切换用户\n     */\n    onTouchCallback: function(row, col, objCode, isSelected) {\n\n        // console.log( \"onTouchCall&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\", this._isCanOptional );\n\n        if (!this.onIsSelfdoit()) {\n\n            this.onAddTip(texts.game.doushouqi.WAITING_FOR_OPPONENT);\n\n            return;\n\n        }\n\n        // 当前蓝色方是否被选中 选中（可以随便点任何一个地方，如果点击的地方不与它相邻，则恢复到正常状态，如果点击的\n        // 的是扣着的对象，则直接翻开，显示小动物并且恢复到正常状态）\n\n        // 首先操作对象要一致 然后判断当前是否被选中 在判断：如果选中了同颜色的 && this._selfUID == objCode\n        if (this._doItUID == objCode && isSelected) {\n\n            if (this._selectedObj.count == 0) {\n\n                this._selectedObj.count = 1;\n\n                this._selectedObj.row = row;\n\n                this._selectedObj.col = col;\n\n                this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunBig();\n\n                this.onCheckRoundMove(row, col, this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL));\n\n                console.log(\"this._selectedObj.count == 0\");\n\n            } else if (this._selectedObj.count >= 1) {\n\n                console.log(\"this._selectedObj.count >= 1\");\n\n                this.tableNodes[this._selectedObj.row][this._selectedObj.col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunSmall();\n\n                this.onHideTipDir();\n\n                this._selectedObj.count = 0;\n\n                this._selectedObj.row = -1;\n\n                this._selectedObj.col = -1;\n\n            }\n\n        } else if (this.onIsSelfdoit() && !isSelected) {\n\n            this._selectedObj.count = 0;\n\n            this._selectedObj.row = -1;\n\n            this._selectedObj.col = -1;\n\n            this.onHideTipDir();\n\n        } else {\n            //如果没有被选中的棋子，就点击了其它颜色的棋子 提示玩家不允许操作其它玩家的棋子\n            if (!this.onCheckOptionalValid()) {\n\n                this.onAddTip(texts.game.doushouqi.CANNOT_CONTROL_OPPONENT);\n\n                return;\n\n            }\n\n            // 消除操作 计算 根据\n            /**\n             *  已经记录了被选中的点\n             *  1.计算传过来的点是否与被选中的点是否相邻\n             *  2.具体算法：(row - 1 >= 0 && row - 1 == selected[0])\n             */\n\n            console.log(\" else 913 \");\n\n            if (this.onClearAlgorithm(row, col) && this._doItUID != objCode) {\n\n                // 可以进行消除逻辑 让当前被选中的小动物，进行移动到将被消除的小动物位置\n\n                var index0 = this._selectedObj.row;\n\n                var index1 = this._selectedObj.col;\n\n                var targetPos = {\n                    x: this.allPos[row][col].x,\n                    y: this.allPos[row][col].y\n                };\n\n                this.tableNodes[index0][index1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).node.setLocalZOrder(99);\n\n                // 移动 回调删除被吃掉的棋子（被吃掉的棋子进行删除）\n                var data = {\n                    r: index0,\n                    c: index1,\n                    moveR: row,\n                    moveC: col\n                };\n\n                this.onSendGameData(events.game.doushouqi.C2S_MOVE, data);\n\n            } else {\n\n                var index0 = this._selectedObj.row;\n\n                var index1 = this._selectedObj.col;\n\n                this.tableNodes[index0][index1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunSmall();\n\n                this.onHideTipDir();\n\n                // 不可以进行消除 原地不动\n                this._selectedObj.row = -1;\n\n                this._selectedObj.col = -1;\n\n            }\n\n\n        }\n\n    },\n\n    // 点击默认占位的对象后回调\n    onBombTouchCallback: function(row, col, componentStr) {\n\n        console.log(\"onBombTouchCall\", this.onIsSelfdoit());\n\n        if (!this.onIsSelfdoit()) {\n\n            this.onAddTip(texts.game.doushouqi.WAITING_FOR_OPPONENT);\n\n            return;\n\n        } else {\n\n            // 请求服务器 拿到当前位置的动物\n\n            var data = {\n                r: row,\n                c: col\n            };\n\n            this.onSendGameData(events.game.doushouqi.C2S_ANIMAL, data);\n\n        }\n\n    },\n\n    onAnimaltionBreakCallback: function(row, col) {\n\n        this.tableNodes[row][col].animal.active = true;\n\n        this.tableNodes[row][col].animal.opacity = 255;\n\n        this.onCheckOptionSelf();\n\n    },\n\n    // 点击空白方块的回调\n    onEmptyTouchCallback: function(row, col) {\n\n        console.log(\"onEmptyTouchCallback\", row, col);\n        // 把被选中的动物移动到当前位置\n        if (this.onClearAlgorithm(row, col)) {\n\n            var index0 = this._selectedObj.row;\n\n            var index1 = this._selectedObj.col;\n\n            // console.log( \" 1172 index0  index1 \", index0, index1 );\n\n            var data = {\n                r: index0,\n                c: index1,\n                moveR: row,\n                moveC: col\n            };\n\n            this.onSendGameData(events.game.doushouqi.C2S_MOVE, data);\n\n        } else {\n\n            // 不能移动\n\n        }\n\n\n    },\n\n    // 移动后并且删除被吃掉的棋子\n    onMoveCallbackDel: function(moveData) {\n\n        // 设置操作棋子的row col\n        var selected0 = moveData.selectedRow;\n\n        var selected1 = moveData.selectedCol;\n\n        var row = moveData.row;\n\n        var col = moveData.col;\n\n        var moveState = moveData.winAnimalIdx;\n\n        console.log(\"moveState == \", moveState);\n\n        if (moveState == -1) {\n\n            // 两个棋子都删除\n\n            // console.log( \" 1209 idDie  \",  this.tableNodes[row][col].isDie);\n\n            if (this.tableNodes[row][col].isDie) {\n\n                Com.onPlayGameEffect(1);\n\n                this.onMoveCallback(moveData);\n\n                return;\n            }\n\n            Com.onPlayGameEffect(5);\n\n            this.onPlayDestoryAni(row, col);\n\n            // 删除被吃掉的棋子\n            this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onDestory();\n\n            this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onDestory();\n\n            this.tableNodes[row][col].isDie = true;\n\n            this.tableNodes[selected0][selected1].isDie = true;\n\n        } else {\n\n            // selected被吃掉\n\n            if (this.tableNodes[row][col].isDie) {\n\n                Com.onPlayGameEffect(1);\n\n                this.onMoveCallback(moveData);\n\n                return;\n            }\n\n            console.log(\" row col \", this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex());\n\n            console.log(\" selected0 selected1 \", this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex());\n\n            if (this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex() == moveState) {\n\n                Com.onPlayGameEffect(3);\n\n                this.tableNodes[selected0][selected1].isDie = true;\n\n                this.tableNodes[row][col].isDie = false;\n\n                this.onPlayDestoryAni(row, col);\n                // 删除被吃掉的棋子\n                this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onDestory();\n\n            } else if (this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex() == moveState) {\n\n                // 目标被吃掉\n                Com.onPlayGameEffect(4);\n\n                this.tableNodes[row][col].isDie = true;\n\n                this.tableNodes[selected0][selected1].isDie = false;\n\n                this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).node.setLocalZOrder(1);\n\n                this.onPlayDestoryAni(row, col);\n                // 删除被吃掉的棋子\n                this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onDestory();\n\n                this.tableNodes[row][col].animal = this.tableNodes[selected0][selected1].animal;\n\n                this.tableNodes[row][col].isDie = this.tableNodes[selected0][selected1].isDie;\n\n                this.tableNodes[selected0][selected1].isDie = true;\n\n                this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onSetRowAndCol(row, col);\n\n            }\n\n        }\n\n    },\n\n    //  移动结果回调\n    onMoveCallback: function(moveData) {\n\n        // 切换操作用户\n        console.log(\"移动完成\");\n        // 移动后属性互换\n        var selected0 = moveData.selectedRow;\n\n        var selected1 = moveData.selectedCol;\n\n        var row = moveData.row;\n\n        var col = moveData.col;\n\n        var targetDie = this.tableNodes[row][col].isDie;\n\n\n        if (this.tableNodes[selected0][selected1].isDie) {\n\n            console.log(\" error 1374+++++ isDie true \");\n\n            return;\n\n        }\n\n        this.tableNodes[row][col].animal = this.tableNodes[selected0][selected1].animal;\n\n        this.tableNodes[row][col].isDie = this.tableNodes[selected0][selected1].isDie;\n\n        this.tableNodes[selected0][selected1].isDie = targetDie;\n\n        this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onSetRowAndCol(row, col);\n\n    },\n\n    // 切换用户\n    onCheckOptionSelf: function() {\n\n        this.closeUpdate();\n\n        this.onSetOptionalTime();\n\n        // 要清理 自己的棋子的状态\n        this.onResetStatus();\n\n        this._selectedObj.row = -1;\n\n        this._selectedObj.col = -1;\n\n        this._selectedObj.count = 0;\n\n        if (this.onIsSelfdoit()) {\n\n            this.onRedBoardAni(true);\n\n            this.onBlueBoardAni(false);\n\n        } else if (!this.onIsSelfdoit()) {\n\n            this.onBlueBoardAni(true);\n\n            this.onRedBoardAni(false);\n\n        }\n\n        this.onHideTipDir();\n\n        this.onShowValidOptionalObj();\n\n    },\n\n    onIsSelfdoit: function() {\n\n        if (this._selfUID == this._doItUID) {\n\n            return true;\n\n        } else if (this._selfUID != this._doItUID) {\n\n            return false;\n\n        }\n\n    },\n\n    //计算点击后是否可以进行移动\n    onClearAlgorithm: function(row, col) {\n\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        var isClear = false;\n\n        if (row - 1 == selected0 && col == selected1) {\n\n            // 消除\n            isClear = true;\n            // console.log( \" row  - 1 \" );\n\n        } else if (row + 1 == selected0 && col == selected1) {\n\n            // 消除\n            isClear = true;\n            // console.log( \" row  + 1 \" );\n\n        } else if (row == selected0 && col - 1 == selected1) {\n\n            // 消除\n            isClear = true;\n            // console.log( \" col  - 1 \" );\n\n        } else if (row == selected0 && col + 1 == selected1) {\n\n            // 消除\n            isClear = true;\n            // console.log( \" col + 1 \" );\n\n        } else if (selected0 == -1 && selected1 == -1) {\n\n            // 不可以消除 直接\n            isClear = false;\n            // console.log( \" selected0 -1 selected1 -1\" );\n\n        } else {\n\n            // 不可以消除 直接\n            isClear = false;\n            // console.log( \" else \" );  \n\n        }\n\n        console.log(\"isClear ===== \", isClear);\n\n        return isClear;\n\n    },\n\n    // 点击后是否能吃掉对方  消除\n    /**\n     *  比较大小\n     *  1.如果移动的棋子比固定的棋子大，则吃掉对方；否则被吃掉；\n     *  2.如果相等，则两个棋子都消失\n     */\n    onCheckCompare: function(row, col) {\n\n        // this._compareState\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        var targetObj = this.tableNodes[row][col].animal.componentStr;\n\n        var selectedIndex = this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex();\n\n        var targetIndex = this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex();\n\n        // 首先是特殊情况 老鼠可以吃大象 所以\n        /**\n         *  所有这个两个对象 如果index一个是8 并且一个是1  要特殊处理\n         *  要把大象吃掉\n         * \n         *  相同颜色的动物不可以互相吃掉\n         */\n\n        // console.log( \"selectedIndex targetIndex\", selectedIndex, targetIndex );\n\n        var compareState = -1;\n\n        if ((selectedIndex == 8 && targetIndex == 1)) {\n\n            // 假设被选中的是大象，目标是老鼠 这时候，大象被吃\n            compareState = this._compareState.lt;\n\n        } else if ((selectedIndex == 1 && targetIndex == 8)) {\n\n            // 假设被选中的是老鼠，目标是大象 这时候，大象被吃\n            compareState = this._compareState.gt;\n\n        } else if (selectedIndex == targetIndex) {\n\n            compareState = this._compareState.eq;\n\n        } else if (selectedIndex > targetIndex) {\n\n            compareState = this._compareState.gt;\n\n        } else if (selectedIndex < targetIndex) {\n\n            compareState = this._compareState.lt;\n\n        }\n\n        return compareState;\n\n    },\n\n    // 判断两个动物是否相同\n    onCheckAnimalSame: function(row, col) {\n\n        var isSame = false;\n\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        var targetComStr = this.tableNodes[row][col].animal.componentStr;\n\n        var selectedStr = this.tableNodes[selected0][selected1].animal.componentStr;\n\n        // console.log( \" onCheckAnimalSame \", row, col, targetComStr, selectedStr );\n\n        if (targetComStr == selectedStr) {\n\n            this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunSmall();\n\n            this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunSmall();\n\n            this.onHideTipDir();\n\n            isSame = true;\n\n        }\n\n        return isSame;\n\n    },\n\n    // 检测操作是否合法\n    onCheckOptionalValid: function() {\n\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        if (selected0 == -1 && selected1 == -1) {\n\n            return false;\n\n        }\n\n        return true;\n\n    },\n\n    // 显示有效的操作对象\n    onShowValidOptionalObj: function() {\n\n        var tempNode = null;\n\n        var comStr = '';\n\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\n        for (let index = 0; index < this.tableNodes.length; index++) {\n\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\n\n                if (!this.tableNodes[index][jndex].isDie) {\n\n                    tempNode = this.tableNodes[index][jndex].animal;\n\n                    // comStr   = tempNode.componentStr;\n                    comStr = \"Animal\";\n\n                    var currCode = tempNode.getComponent(comStr).onGetAnimalCode();\n\n                    // 如果当前为自己操作 显示可以操作的动物\n                    if (this.onIsSelfdoit()) {\n\n                        // 判断当前动物是否被翻出来\n                        if (tempNode.getComponent(comStr).getAnimalIsBreak()) {\n\n                            // 判断当前动物是否为自己的动物\n                            if (this._selfUID == currCode) {\n\n                                tempNode.getComponent(comStr).onShowSelfTip();\n\n                            } else {\n\n                                tempNode.getComponent(comStr).onHideTip();\n\n                            }\n\n                        } else {\n\n                            tempNode.getComponent(comStr).onOptionalObj();\n\n                        }\n\n                    } else {\n\n                        tempNode.getComponent(comStr).onHideTip();\n\n                    }\n\n                }\n\n            }\n        }\n\n    },\n\n    // 重置棋子的状态\n    onResetStatus: function() {\n\n        var tempNode = null;\n\n        var comStr = '';\n\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\n        for (let index = 0; index < this.tableNodes.length; index++) {\n\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\n\n                if (!this.tableNodes[index][jndex].isDie) {\n\n                    tempNode = this.tableNodes[index][jndex].animal;\n\n                    // comStr   = tempNode.componentStr;\n                    comStr = \"Animal\";\n\n                    if (this._selfUID == tempNode.getComponent(comStr).onGetAnimalCode()) {\n\n                        if (tempNode.getComponent(comStr).getAnimalIsBig()) {\n\n                            tempNode.getComponent(comStr).onRunSmall();\n\n                        } else {\n\n\n                        }\n                    }\n\n                }\n\n            }\n        }\n\n    },\n\n    onClearTabel: function() {\n\n        var tempNode = null;\n\n        var comStr = '';\n\n        // 清除所有动物 需要重新初始化\n        for (let index = 0; index < this.tableNodes.length; index++) {\n\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\n\n                if (!this.tableNodes[index][jndex].isDie) {\n\n                    tempNode = this.tableNodes[index][jndex].animal;\n\n                    // comStr   = tempNode.componentStr;\n                    comStr = consts.game.doushouqi.COMPONENT_ANIMAL;\n\n                    tempNode.getComponent(comStr).onDestory();\n\n                }\n\n            }\n        }\n\n\n    },\n\n    onRestart: function() {\n\n        this.onClearTabel();\n\n        this.init();\n\n        this.initUI();\n\n        this.openUpdate();\n\n        this.onOptionalTimeAni();\n\n    },\n\n    // ******** 操作倒计时 ************\n\n    // 打开倒计时函数\n    openUpdate: function() {\n\n        var interval = 1; //以秒为单位的时间间隔\n\n        var repeat = this.defalutTiem; //重复次数\n\n        var delay = 0; //开始延时\n\n        this.schedule(this.onTimeDownCallback, interval, repeat, delay);\n\n    },\n\n    // 关闭倒计时函数\n    closeUpdate: function() {\n\n        console.log(\" closeUpdate ********************** \");\n\n        this.unschedule(this.onTimeDownCallback);\n\n        this.count = 30;\n\n        this._isCanOptional = false;\n\n    },\n\n    // 倒计时回调\n    onTimeDownCallback: function() {\n\n        this.count -= 1;\n\n        if (this.count < 0) {\n\n            this.closeUpdate();\n\n            if (this.onIsSelfdoit())\n            {\n                this.onSendGameData(events.game.doushouqi.C2S_SURRENDER, {});\n            }\n\n            // 给服务器发送切换用户的操作\n\n        } else {\n\n            // 设置文本信息\n            this.onSetOptionalTime();\n\n        }\n\n\n\n    },\n\n    onCanOptionalObj: function() {\n\n        return this._isCanOptional;\n\n    },\n\n    // ******** 操作倒计时 ************\n\n\n    // ******** 对象可以移动的方向指示 ********\n\n    // 检测上下左右是否可以移动\n    /**\n     * \n     * 移动规则为：如果四周有空位置，提示➡箭头出现\n     * 1.如果旁边还有箱子，不提箭头\n     * 2.如果旁边右自己的动物，不提示箱子\n     * \n     */\n    onCheckRoundMove: function(row, col, obj) {\n\n        var moveDir = {\n            up: false,\n            down: false,\n            left: false,\n            right: false\n        };\n\n        if (row - 1 >= 0) {\n\n            // 找出(row-1, col) 这个位置的对像\n            // 上移动\n            var isShowDir = this.onFindAnimalOfIndex((row - 1), col);\n\n            if (isShowDir) {\n\n                moveDir.up = true;\n\n            }\n\n        }\n\n        if (row + 1 <= 3) {\n\n            // 下移动\n            var isShowDir = this.onFindAnimalOfIndex((row + 1), col);\n\n            if (isShowDir) {\n\n                moveDir.down = true;\n\n            }\n\n        }\n\n        if (col - 1 >= 0) {\n\n            // 左移动\n            var isShowDir = this.onFindAnimalOfIndex(row, (col - 1));\n\n            if (isShowDir) {\n\n                moveDir.left = true;\n\n            }\n\n        }\n\n        if (col + 1 <= 3) {\n\n            // 右移动\n            var isShowDir = this.onFindAnimalOfIndex(row, (col + 1));\n\n            if (isShowDir) {\n\n                moveDir.right = true;\n\n            }\n\n        }\n\n        if ((row < 0 || col < 0) || (row > 3 || col > 3)) {\n\n            moveDir = {\n                up: false,\n                down: false,\n                left: false,\n                right: false\n            };\n\n        }\n\n        this.node_dir.x = this.tableNodes[row][col].animal.x;\n\n        this.node_dir.y = this.tableNodes[row][col].animal.y + 10;\n\n        // if ( moveDir.up || moveDir.down || moveDir.left || moveDir.right ){\n\n        //     this.node_dir.node.active = true;\n\n        //     this.node_dir.node.opacity = 255;\n\n        // }\n\n        this.onTipMoveDirection(moveDir);\n\n    },\n\n    onFindAnimalOfIndex: function(row, col) {\n\n        var tempNode = null;\n\n        var comStr = '';\n\n        var isShowDir = false;\n\n        if (!this.tableNodes[row][col].isDie) {\n\n            tempNode = this.tableNodes[row][col].animal;\n\n            // comStr = tempNode.componentStr;\n            comStr = consts.game.doushouqi.COMPONENT_ANIMAL;\n\n            // 当前箱子没有坏掉\n            if (!tempNode.getComponent(comStr).getAnimalIsBreak()) {\n\n                // 此种情况 不显示这个方向的 方向标\n                isShowDir = false;\n\n            } else {\n\n                // isShowDir = true;\n                if (this.onIsSelfdoit() && this._selfUID == tempNode.getComponent(comStr).onGetAnimalCode()) {\n\n                    isShowDir = false;\n\n                } else {\n\n                    isShowDir = true;\n\n                }\n\n            }\n\n        } else {\n\n            isShowDir = true;\n\n        }\n\n        return isShowDir;\n\n    },\n\n    //  选中后提示玩家可以移动的方向 ()\n    /**\n     * 根据当前位置（x y）计算 上下左右 四个方向是否可以移动\n     * 如果某个方向可以移动，则展示提示动画\n     */\n    onTipMoveDirection: function(moveDir) {\n\n        if (moveDir.up) {\n\n            // 播放上动画\n            this.onRepeatAction(this.sp_up, consts.game.doushouqi.ANI_UP);\n\n        }\n\n        if (moveDir.down) {\n\n            // 播放下动画\n            this.onRepeatAction(this.sp_down, consts.game.doushouqi.ANI_DOWN);\n\n        }\n\n        if (moveDir.left) {\n\n            // 播放左动画\n            this.onRepeatAction(this.sp_left, consts.game.doushouqi.ANI_LEFT);\n\n        }\n\n        if (moveDir.right) {\n\n            // 播放右动画\n            this.onRepeatAction(this.sp_right, consts.game.doushouqi.ANI_RIGHT);\n\n        }\n\n    },\n\n    /**\n     * @nodeObj: 哪个对象执行\n     * @dirStr: 方向\n     */\n    onRepeatAction: function(nodeObj, dirStr) {\n\n        nodeObj.node.active = true;\n\n        nodeObj.node.opacity = 255;\n\n        var animState = nodeObj.play(dirStr);\n\n        // 设置循环模式为 Loop\n        animState.wrapMode = cc.WrapMode.Loop;\n\n        // 设置动画循环次数为无限次\n        animState.repeatCount = Infinity;\n\n    },\n\n    onStopRepeatAction: function(nodeObj, dirStr) {\n\n        nodeObj.node.active = false;\n\n        nodeObj.node.opacity = 0;\n\n        nodeObj.stop(dirStr);\n\n    },\n\n    // 隐藏四个方向小标\n    onHideTipDir: function() {\n\n        // 停止播放上动画\n        this.onStopRepeatAction(this.sp_up, consts.game.doushouqi.ANI_UP);\n\n        // 停止播放下动画\n        this.onStopRepeatAction(this.sp_down, consts.game.doushouqi.ANI_DOWN);\n\n        // 停止播放左动画\n        this.onStopRepeatAction(this.sp_left, consts.game.doushouqi.ANI_LEFT);\n\n        // 停止播放右动画\n        this.onStopRepeatAction(this.sp_right, consts.game.doushouqi.ANI_RIGHT);\n\n    },\n\n    // ****************** 对象可以移动的方向指示 ******************\n\n    // ******************     被消灭的动画     ******************\n\n    onPlayDestoryAni: function(row, col) {\n\n        this.sp_destory.node.x = this.allPos[row][col].x;\n\n        this.sp_destory.node.y = this.allPos[row][col].y;\n\n        this.onDestoryAnimation();\n\n    },\n\n    onDestoryAnimation: function() {\n\n        this.sp_destory.node.active = true;\n\n        this.sp_destory.node.opacity = 255;\n\n        var animState = this.sp_destory.play(consts.game.doushouqi.ANI_DESTROY);\n        console.log(\"animState:\", animState);\n\n        var self = this;\n\n        function onFinished() {\n\n            console.log(\"onFinished\");\n\n            self.sp_destory.node.active = false;\n\n            self.sp_destory.node.opacity = 0;\n\n        };\n\n        console.log(\"animState:\", animState);\n        animState.on('finished', onFinished, this.sp_destory);\n\n    },\n\n    // ******************  被消灭的动画   ******************\n\n    // ****************** 操作时间过度动画 ******************\n\n    /**\n     * 随机出操作方\n     * 根据随机出来的对象，显示操作时间\n     * 显示要求：（假设，随机出来的是红方先操作）\n     * 1.红方时间面板从0放大到1的过程；30s后面板从1到0缩小，然后显示白板0.5s，0.5s后白板隐藏，\n     * 蓝色面板从0放大到1的过程；然后重复循环此过程\n     */\n    onOptionalTimeAni: function() {\n\n        if (this.onIsSelfdoit()) {\n\n            this.onRedBoardAni(true);\n\n        } else {\n\n            this.onBlueBoardAni(true);\n\n        }\n\n    },\n\n    /**\n     * optionalObj: 操作方\n     */\n    onRedBoardAni: function(optionalObj) {\n\n        if (optionalObj) {\n\n            // 红面板从0放大到1的过程；\n\n            var scale = cc.scaleTo(0.2, 1, 1);\n\n            var delay = cc.delayTime(0.2);\n\n            var self = this;\n\n            function onFinishCallback() {\n\n                self.sp_white.node.scale = 0;\n\n                var scale2 = cc.scaleTo(0.2, 1, 1);\n\n                self.sp_red_time.node.runAction(scale2);\n\n                self._isCanOptional = true;\n\n                self.openUpdate();\n\n            };\n\n            var seq = cc.sequence(scale,\n                delay,\n                cc.callFunc(onFinishCallback, this, this.sp_white));\n\n            this.sp_white.node.runAction(seq);\n\n        } else {\n\n            // 红面板从1缩小到0的过程；\n            var scale = cc.scaleTo(0.2, 1, 0);\n\n            var self = this;\n\n            function onFinishCallback() {\n\n\n            };\n\n            var seq = cc.sequence(scale,\n                cc.callFunc(onFinishCallback, this, this.sp_red_time));\n\n            this.sp_red_time.node.runAction(seq);\n\n        }\n\n    },\n\n    /**\n     * optionalObj: 操作方\n     */\n    onBlueBoardAni: function(optionalObj) {\n\n        if (optionalObj) {\n\n            // 红面板从0放大到1的过程\n\n            var scale = cc.scaleTo(0.2, 1, 1);\n\n            var delay = cc.delayTime(0.2);\n\n            var self = this;\n\n            function onFinishCallback() {\n\n                self.sp_white.node.scale = 0;\n\n                var scale1 = cc.scaleTo(0.2, 1, 1);\n\n                self.sp_blue_time.node.runAction(scale1);\n\n                self._isCanOptional = true;\n\n                self.openUpdate();\n\n            };\n\n            var seq = cc.sequence(scale,\n                delay,\n                cc.callFunc(onFinishCallback, this, this.sp_white));\n\n            this.sp_white.node.runAction(seq);\n\n        } else {\n\n            // 红面板从1缩小到0的过程；\n            var scale = cc.scaleTo(0.2, 1, 0);\n\n            var self = this;\n\n            function onFinishCallback() {\n\n            };\n\n            var seq = cc.sequence(scale,\n                cc.callFunc(onFinishCallback, this, this.sp_blue_time));\n\n            this.sp_blue_time.node.runAction(seq);\n\n        }\n\n    },\n\n    /**\n     * optionalObj: 操作方\n     */\n    onWhiteBoardAni: function(optionalObj) {\n\n        var scale = cc.scaleTo(0.5, 1, 1);\n\n        var self = this;\n\n        function onFinishCallback() {\n\n            self.sp_white.node.active = false;\n\n            self.sp_white.node.opacity = 0;\n\n            self.sp_white.node.scaleY = 0;\n\n            console.log(\" onFinishCallback onWhiteBoardAni \", optionalObj);\n\n            if (optionalObj == consts.game.doushouqi.OBJ_RED) {\n\n                self.onBlueBoardAni(true);\n\n            } else {\n\n                self.onRedBoardAni(true);\n\n            }\n\n        }\n\n        var seq = cc.sequence(scale,\n            cc.callFunc(onFinishCallback, this, this.sp_white));\n\n        this.sp_white.node.runAction(seq);\n\n\n    },\n\n    // 设置玩家操作时间\n    onSetOptionalTime: function() {\n\n        if (this._doItUID != this._selfUID) {\n\n            this.label_blue_time.string = this.count.toString() + \"s\";\n\n        } else {\n\n            this.label_red_time.string = this.count.toString() + \"s\";\n\n        }\n\n    },\n\n    // ****************** 操作时间过度动画 ******************\n\n    // ******************     新手提示     ******************\n\n    onNewPlayerGuid: function() {\n\n        if (this._doItUID == this._selfUID && this._isNewPlayer) {\n\n            this.newPlayerNode.active = true;\n\n            this.newPlayerNode.opacity = 255;\n\n            // this.newPlayerNode.setLocalZOrder(1000);\n\n            this.onActiconHand();\n\n        } else {\n\n            this.newPlayerNode.active = false;\n\n            this.newPlayerNode.opacity = 0;\n\n            return;\n\n        }\n\n    },\n\n    /**\n     * 模拟手点击的动作\n     * 每3秒做一次动作，如果点击第一个箱子后，关闭这个动物\n     */\n    onActiconHand: function() {\n\n        this.sp_hand.node.stopAllActions();\n\n        this.newPlayerNode.active = true;\n\n        this.newPlayerNode.opacity = 255;\n\n        var seq = cc.repeatForever(\n            cc.sequence(\n                cc.moveTo(0.85, -50, -50),\n                cc.moveTo(0.5, 0, 0)\n            ));\n\n        this.sp_hand.node.runAction(seq);\n\n    },\n\n    // ******************     新手提示     ******************\n\n    // ******************     提示框     ******************\n    /**\n     * tipStr: 提示文字\n     */\n    onAddTip: function(tipStr) {\n\n        this.label_tip.string = tipStr;\n\n        if (this._isShowTip) {\n\n            return;\n\n        } else {\n\n            this.onShowtip();\n\n        }\n\n    },\n\n    onShowtip: function() {\n\n        var self = this;\n\n        this._isShowTip = true;\n\n        this.sp_tip.node.active = true;\n\n        this.sp_tip.node.opacity = 255;\n\n        // 缩小放大动画\n        var scale = cc.scaleTo(0.2, 1);\n\n        function onActionFinishCall() {\n\n            // this.sp_tip.node.scale = 0;\n            self.onHidetip();\n\n        };\n\n        var delay = cc.delayTime(0.8);\n\n        var seq = cc.sequence(scale, delay,\n            cc.callFunc(onActionFinishCall, this, this.sp_tip));\n\n        this.sp_tip.node.runAction(seq);\n\n    },\n\n    onHidetip: function() {\n\n        // 缩小放大动画\n        var scale = cc.scaleTo(0.1, 0);\n\n        function onActionFinishCall() {\n\n            this.sp_tip.node.scale = 0;\n\n            this._isShowTip = false;\n\n        };\n\n        var seq = cc.sequence(scale, cc.callFunc(onActionFinishCall, this, this.sp_tip));\n\n        this.sp_tip.node.runAction(seq);\n\n    },\n\n    // 弹出 确认取消框\n    onAddAlert: function(descStr, labelRedBtn = texts.game.doushouqi.REFUSE, labelBlueBtn = texts.game.doushouqi.AGREE) {\n\n        this.label_alert.string = descStr;\n\n        this.label_red_btn.string = labelRedBtn;\n\n        this.label_blue_btn.string = labelBlueBtn;\n\n        if (this._isShowAlert) {\n\n            return;\n\n        } else {\n\n            this.onShowAlert();\n\n        }\n\n    },\n\n    onShowAlert: function() {\n\n        var self = this;\n\n        this._isShowAlert = true;\n\n        // this.sp_alert.opacity = 255;\n\n        // 缩小放大动画\n        var scale = cc.scaleTo(0.2, 1);\n\n        function onActionFinishCall() {\n\n            console.log(\" onActionFinishCall \");\n\n        };\n\n        var delay = cc.delayTime(0.8);\n\n        var seq = cc.sequence(scale, delay,\n            cc.callFunc(onActionFinishCall, this, this.sp_alert));\n\n        this.sp_alert.node.runAction(seq);\n\n    },\n\n    onHideAlert: function() {\n\n        // 缩小放大动画\n        var scale = cc.scaleTo(0.1, 0);\n\n        var $this = this;\n\n        function onActionFinishCall() {\n\n            $this.sp_alert.node.scale = 0;\n\n            $this._isShowAlert = false;\n\n            $this._alertStr = \"\";\n\n        };\n\n        var seq = cc.sequence(scale, cc.callFunc(onActionFinishCall, this, this.sp_alert));\n\n        this.sp_alert.node.runAction(seq);\n\n    },\n});"]}