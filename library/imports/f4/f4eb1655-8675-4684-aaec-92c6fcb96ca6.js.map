{"version":3,"sources":["../../../../../../../../assets/resources/Script/view/games/doushouqi/assets/resources/Script/view/games/doushouqi/Doushouqi_back.js"],"names":["Com","require","onfire","requestHandler","cc","Class","extends","Component","properties","sp_head_red","default","type","Sprite","sp_head_blue","node_table","Node","sp_tip","label_tip","Label","sp_alert","label_alert","label_red_btn","label_blue_btn","node_dir","sp_up","Animation","sp_down","sp_left","sp_right","sp_destory","sp_white","sp_red_time","sp_blue_time","label_red_time","label_blue_time","sp_test","SpriteFrame","nodeResult","animal_blue_Prefab","Prefab","animal_red_Prefab","empty_prefab","result_prefab","defalutTiem","count","onLoad","onLoadAudio","init","initUI","openUpdate","onOptionalTimeAni","onDestroy","start","node","active","scale","opacity","scaleY","onHideTipDir","setLocalZOrder","_blueAnimal","_redAnimal","_rand01","_blueSelf","_pinkSelf","_isShowTip","_isShowAlert","_isCanOptional","_optionalObj","_selectedPoint","_selectedObj","row","col","_compareState","eq","gt","lt","same","width","winSize","height","allPos","Vec2","allBtnEmpty","Button","pos","emptyNode","index","jndex","getChildByName","toString","position","tableNodes","onInitTable","onTouchListener","event","customEventData","console","log","onAddTip","onAddAlert","onHideAlert","onLoadHeadImg","onDelRepeatRandBlue","onDelRepeatRandPink","empty","btnEmpty","_animal","_rand0Count","_rand1Count","_componentStr","length","instantiate","addComponent","x","y","parent","getComponent","onSetRowAndCol","onSetTouchCallback","onEmptyTouchCallback","bind","rand01","onRandomNum","componentStr","onLoadAnimal","onSetSelf","isDie","animal","onBreakBombCallback","onBombTouchCallback","onTouchCallback","idx","randNum","push","splice","isSelected","onRunBig","onCheckRoundMove","onRunSmall","onCheckOptionalValid","onClearAlgorithm","onCheckAnimalSame","index0","index1","targetPos","onMoveToTarget","onMoveCallbackDel","playAnimation","onAnimaltionBreakCallback","onCheckOptionSelf","onResetStatus","onMoveCallback","selected0","selected1","onCheckCompare","delStrTarget","delStrSelected","onPlayDestoryAni","onDestory","delStr","selectedStr","onCheckResult","targetDie","closeUpdate","onSetOptionalTime","onRedBoardAni","onBlueBoardAni","onShowValidOptionalObj","isClear","targetObj","selectedIndex","onGetAnimalIndex","targetIndex","compareState","isSame","targetComStr","tempNode","comStr","getAnimalIsBreak","onShowSelfTip","onHideTip","onOptionalObj","getAnimalIsBig","blueCount","pinkCount","isResult","_playAnimCallback","onAddResultLayer","scheduleOnce","onClearTabel","onRestart","interval","repeat","delay","schedule","onTimeDownCallback","unschedule","onCanOptionalObj","obj","moveDir","up","down","left","right","isShowDir","onFindAnimalOfIndex","onTipMoveDirection","onRepeatAction","nodeObj","dirStr","animState","play","wrapMode","WrapMode","Loop","repeatCount","Infinity","onDestoryAnimation","self","onFinished","on","optionalObj","onFinishCallback","scale2","scaleTo","runAction","delayTime","seq","sequence","callFunc","scale1","onWhiteBoardAni","string","tipStr","onShowtip","onActionFinishCall","onHidetip","descStr","labelRedBtn","labelBlueBtn","onShowAlert","resutlLayer","onCallback","onInitUI","onSetGameResultInfo"],"mappings":"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","file":"Doushouqi_back.js","sourceRoot":"../../../../../../../../assets/resources/Script/view/games/doushouqi","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\n/**\n * @brief: 斗兽棋主场景\n * @time:  2018-04-28\n * @author: JiangTao kungfupandajt@163.com\n */\n\nvar Com = require('Com');\nvar onfire=require(\"onfire\");           //处理事件的类库\nvar requestHandler = require(\"RequestHandler\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        sp_head_red: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        sp_head_blue: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        node_table: {\n            default: null,\n            type: cc.Node,\n        },\n\n        sp_tip: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        label_tip: {\n            default: null,\n            type: cc.Label,\n        },\n\n        sp_alert: {\n            default:null,\n            type:cc.Sprite,\n        },\n\n        label_alert: {\n            default:null,\n            type:cc.Label,\n        },\n\n        // 红色按钮文字\n        label_red_btn: {\n            default:null,\n            type:cc.Label,\n        },\n\n        // 蓝色按钮文字\n        label_blue_btn: {\n            default:null,\n            type:cc.Label,\n        },\n\n        node_dir: {\n            default: null,\n            type:cc.Node\n        },\n\n        sp_up: {\n            default: null,\n            type: cc.Animation\n        },\n\n        sp_down: {\n            default: null,\n            type: cc.Animation\n        },\n\n        sp_left: {\n            default: null,\n            type: cc.Animation\n        },\n\n        sp_right: {\n            default: null,\n            type: cc.Animation\n        },\n\n        sp_destory: {\n            default: null,\n            type: cc.Animation\n        },\n\n        // 白板\n        sp_white: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        // 红色方时间面板\n        sp_red_time: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        // 蓝色方时间面板\n        sp_blue_time: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        // 红方时间\n        label_red_time: {\n            default: null,\n            type: cc.Label\n        },\n\n        // 蓝方时间\n        label_blue_time: {\n            default: null,\n            type: cc.Label\n        },\n\n        sp_test:  {\n            default: null,\n            type: cc.SpriteFrame\n        },\n\n        nodeResult: {\n            default: null,\n            type: cc.Node\n        },\n\n        animal_blue_Prefab: cc.Prefab,      // 蓝方预制资源\n\n        animal_red_Prefab: cc.Prefab,       // 红方预制资源\n\n        empty_prefab: cc.Prefab,            // 空的预制资源\n\n        result_prefab: cc.Prefab,           // 结果预知资源\n\n        defalutTiem:30,     //  默认操作时间\n\n        count: 30,          //  倒计时计次\n        \n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n\n        Com.onLoadAudio();\n\n        this.init();\n\n        this.initUI();\n\n        this.openUpdate();\n\n        this.onOptionalTimeAni();\n\n    },\n\n    // 销毁时调用\n    onDestroy(){\n\n    },\n\n    start () {\n\n\n\n    },\n\n    // update (dt) {},\n\n    initUI: function (  ) {\n\n        this.sp_tip.node.active = true;\n\n        this.sp_tip.node.scale = 0;\n\n        this.sp_alert.node.active = true;\n\n        this.sp_alert.node.scale = 0;\n\n        this.sp_destory.node.active = false;\n\n        this.sp_destory.node.opacity = 0;\n\n        this.sp_white.node.active = true;\n\n        this.sp_white.node.opacity = 255;\n\n        this.sp_red_time.node.active = true\n\n        this.sp_red_time.node.opacity = 255;\n\n        this.sp_red_time.node.scaleY = 0;\n\n        this.sp_blue_time.node.active = true\n\n        this.sp_blue_time.node.opacity = 255;\n\n        this.sp_blue_time.node.scaleY = 0;\n\n        this.onHideTipDir();\n\n        this.node_dir.setLocalZOrder(100);\n\n        this.sp_destory.node.setLocalZOrder(100);\n\n    },\n\n    // init 初始化\n    init: function (  ) {\n\n        this._blueAnimal = [];\n\n        this._redAnimal = [];\n\n        this._rand01     = -1;\n\n        this._blueSelf   = true;\n\n        this._pinkSelf   = false;\n\n        this._isShowTip  = false;\n\n        this._isShowAlert = false;\n\n        this._isCanOptional = false;        //当前是否可以进行操作\n\n        this._optionalObj= \"Animal_blue\";   //默认操作对象为blue\n\n        this._selectedPoint = [-1, -1];     //记录被选中的动物\n\n        // row:行\n        this._selectedObj= {row:-1, col:-1, count:0}; //\n\n        // eq:相等 gt:(greater than) 大于 lt:(less than) 小与\n        this._compareState = { eq:0, gt:1, lt:2, same:3 };\n\n        this.width = cc.winSize.width;\n\n        this.height = cc.winSize.height;\n\n        // 所有点集合\n        this.allPos =   [   [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\n                            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\n                            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\n                            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\n                        ];\n\n        this.allBtnEmpty = [\n\n                            [cc.Button, cc.Button, cc.Button, cc.Button],\n                            [cc.Button, cc.Button, cc.Button, cc.Button],\n                            [cc.Button, cc.Button, cc.Button, cc.Button],\n                            [cc.Button, cc.Button, cc.Button, cc.Button],\n                            \n                        ];\n\n        var pos = null;\n\n        var emptyNode = null;\n\n        for (let index = 0; index < 4; index++) {\n\n            for (let jndex = 0; jndex < 4; jndex++ ) {\n\n                emptyNode = this.node_table.getChildByName(\"node_pos_\" + index.toString() + jndex.toString())\n\n                pos = emptyNode.position;\n\n                this.allPos[index][jndex] = pos;\n\n            }\n\n        }\n\n        // 所有动物集合\n        this.tableNodes =   [   [{}, {}, {}, {}],\n                                [{}, {}, {}, {}],\n                                [{}, {}, {}, {}],\n                                [{}, {}, {}, {}],\n                            ];\n\n        this.onInitTable();\n\n    },\n\n    // 按钮事件监听\n    onTouchListener: function ( event, customEventData ){\n\n        console.log( \" customEventData \", customEventData );\n\n        if ( customEventData == \"back\" ) {\n\n            this.onAddTip( \"back-home\" ); \n            // this.onAddAlert( \"确定要退出游戏吗？\", \"取消\", \"确认\" );\n\n        } else if ( customEventData == \"help\" ) {\n\n            // this.onBlueBoardAni( true );\n            // this.sp_test.node.height = 300;\n\n\n        } else if ( customEventData == \"qiuhe\" ) {\n\n            this.onAddAlert( \"对方向您求平局\", \"拒绝\", \"同意\" );\n\n        } else if ( customEventData == \"renshu\" ) {\n\n            this.onAddAlert( \"您确定要认输吗？\", \"取消\", \"确认\" );\n\n        } else if ( customEventData == \"btn_refuse\" ) {\n\n            // 拒绝按钮\n            this.onHideAlert();\n\n        } else if ( customEventData == \"btn_agree\" ) {\n\n            // 确认按钮\n            this.onHideAlert();\n\n        }\n\n    },\n\n    // 玩家头像加载\n    onLoadHeadImg: function (  ) {\n\n\n\n    },\n\n    // 初始化玩家棋盘\n    onInitTable: function () {\n        // 随机生成动物\n        /**\n         *  首先：当前格子生成那个颜色的动物 0 蓝色动物 1 粉色动物\n         *  其次：根据颜色，随机生成相应的动物。【1-8】 分别代表不同的动物，去重随机，如果发现\n         *      随机到相同的数字，则删除，重新随机\n         *  在每次随机的时候都要判断0或1（也就是蓝色动物或粉色动物）是否已经随机了8中动物，如果随机够了，则不在\n         *  进行随机；此时只随机另一种颜色的动物。 如果两种动物都随机够了，则停止。\n         */\n        this.onDelRepeatRandBlue();\n\n        this.onDelRepeatRandPink();\n\n        var empty = null;\n\n        var btnEmpty = null;\n\n        var _animal = null;\n\n        var _rand0Count = 0;\n\n        var _rand1Count = 0;\n\n        var _componentStr = '';\n\n        for (let index = 0; index < this.tableNodes.length; index++) {\n\n            for (let jndex =0; jndex < this.tableNodes[index].length; jndex++ ) {\n\n                btnEmpty = cc.instantiate( this.empty_prefab );\n\n                btnEmpty.addComponent('BtnEmpty');\n\n                btnEmpty.x = this.allPos[index][jndex].x;\n\n                btnEmpty.y = this.allPos[index][jndex].y;\n\n                btnEmpty.setLocalZOrder(0);\n\n                btnEmpty.parent = this.node_table;\n\n                this.allBtnEmpty[index][jndex] = btnEmpty;\n\n                btnEmpty.getComponent('BtnEmpty').onSetRowAndCol( index, jndex );\n\n                btnEmpty.getComponent('BtnEmpty').onSetTouchCallback( this.onEmptyTouchCallback.bind(this) );\n\n                var rand01 = Com.onRandomNum(0, 2);\n\n                if ( _rand0Count == 8 ) {\n\n                    rand01 = 1;\n\n                }else if ( _rand1Count == 8 ) {\n\n                    rand01 = 0;\n\n                }\n\n                if ( rand01 == 0 ) {\n\n                    _animal = cc.instantiate( this.animal_blue_Prefab )\n\n                    _rand0Count += 1;\n\n                    _componentStr = 'Animal_blue';\n\n                    _animal.componentStr = 'Animal_blue';\n\n                    _animal.addComponent(_componentStr);\n\n                    _animal.getComponent(_componentStr).init();\n\n                    _animal.getComponent(_componentStr).onLoadAnimal( this._blueAnimal[_rand0Count - 1] );\n\n                    _animal.getComponent(_componentStr).onSetSelf( this._blueSelf );\n\n                } else if ( rand01 == 1 ) {\n\n                    _animal = cc.instantiate( this.animal_red_Prefab )\n\n                    _rand1Count += 1;\n\n                    _componentStr = 'Animal_red';\n\n                    _animal.componentStr = 'Animal_red';\n\n                    _animal.addComponent(_componentStr);\n\n                    _animal.getComponent(_componentStr).init();\n\n                    _animal.getComponent(_componentStr).onLoadAnimal( this._redAnimal[_rand1Count - 1] );\n\n                    _animal.getComponent(_componentStr).onSetSelf( this._pinkSelf );\n\n                }\n\n                _animal.x = this.allPos[index][jndex].x;\n\n                _animal.y = this.allPos[index][jndex].y;\n\n                _animal.active = true;\n\n                _animal.opacity = 255;\n\n                _animal.setLocalZOrder(2);\n\n                _animal.parent = this.node_table;\n\n                this.tableNodes[index][jndex] = { isDie:false, animal:_animal }\n\n                _animal.getComponent(_componentStr).onSetRowAndCol( index, jndex );\n\n                _animal.getComponent(_componentStr).onBreakBombCallback( this.onBombTouchCallback.bind(this) );\n\n                _animal.getComponent(_componentStr).onSetTouchCallback( this.onTouchCallback.bind(this) );\n\n            }\n\n        }\n\n\n    },\n\n    // 去重随机 蓝色动物\n    /**\n     * for(i=0;i<10;i++)                    //产生10个随机数\n        {\n            A[i]=1+rand()%10;                //得到随机数(范围在1-10之间)\n                for(j=0;j<i;j++)                 //判断和前面的数是否重复\n                    if(A[i]==A[j]) {\n                        i--;\n                        break;\n                    }  //如果重复,重新产生随机数\n        }\n     */\n    onDelRepeatRandBlue: function (  ) {\n\n        var idx = 0;\n\n        for (;idx < 8; idx++) {\n\n            var randNum = Com.onRandomNum(1, 9);\n\n            this._blueAnimal.push(randNum); \n\n            for (let jndex = 0; jndex < idx; jndex++) {\n\n                if ( randNum == this._blueAnimal[jndex] ) {\n\n                    this._blueAnimal.splice( idx, 1 );\n\n                    idx--;\n\n                    break;\n\n                }\n\n            }\n\n        }\n        \n\n    },\n\n    // 去重随机 粉色动物\n    onDelRepeatRandPink: function (  ) {\n\n        var idx = 0;\n\n        for (; idx < 8; idx++) {\n\n            var randNum = Com.onRandomNum(1, 9);\n\n            this._redAnimal.push(randNum); \n\n            for (let jndex = 0; jndex < idx; jndex++) {\n\n                if ( randNum == this._redAnimal[jndex] ) {\n\n                    this._redAnimal.splice( idx, 1 );\n\n                    idx--;\n\n                    break;\n\n                }\n\n            }\n\n        }\n\n    },\n\n    // 点击棋子回调；一次只能点击一个自己的棋子；如果点击自己的第二枚棋子，则取消前一个选中的棋子；\n    // 如果点击自己的棋子后，在点击对方的棋子则进行对比大小，然后进行消除的逻辑\n    // 如果点击的是初始的方块，则是翻棋子，然后轮到对方操作\n\n    // 首先判断当前是否为蓝方操作，如果是，在没有选中蓝方的情况下，是不可以点击粉色动物的；在选中蓝方情况下，\n    // 点击任意一种颜色动物，都要进行判断（是否相邻，如果相邻，可以进行比较吃或被吃，如果不相邻，取消被选中状态）\n\n\n    //切换动物操作时候有问题\n    /**\n     *  有哪些操作需要切换用户操作\n     *  1.默认是蓝色方操作（不管是蓝方操作还是粉方操作），在点击翻开棋子动作后切换用户\n     *  2.点击棋子移动（或者吃掉另一方的棋子），切换用户\n     */\n    onTouchCallback: function ( row, col, componentStr, isSelected ) {\n\n        // console.log( \"onTouchCall&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\", this._isCanOptional );\n\n        if ( !this._isCanOptional ) {\n\n            this.onAddTip( \"您操作太频繁，请稍等...\" );\n\n            return;\n\n        }\n\n        // 当前蓝色方是否被选中 选中（可以随便点任何一个地方，如果点击的地方不与它相邻，则恢复到正常状态，如果点击的\n        // 的是扣着的对象，则直接翻开，显示小动物并且恢复到正常状态）\n\n        // console.log( \" this._optionalObj onTouchCallback \", this._optionalObj, isSelected);\n\n        // 首先操作对象要一致 然后判断当前是否被选中 在判断：如果选中了同颜色的\n        if ( this._optionalObj == componentStr && isSelected) {\n\n            if ( this._selectedObj.count == 0 ) {\n\n                this._selectedObj.count = 1;\n\n                this._selectedObj.row = row;\n\n                this._selectedObj.col = col;\n\n                this.tableNodes[row][col].animal.getComponent(this._optionalObj).onRunBig();\n\n                this.onCheckRoundMove( row, col, this.tableNodes[row][col].animal.getComponent(this._optionalObj) );\n\n                console.log( \"this._selectedObj.count == 0\" );\n\n            } else if ( this._selectedObj.count >= 1 ) {\n\n                console.log( \"this._selectedObj.count >= 1\" );\n\n                this.tableNodes[this._selectedObj.row][this._selectedObj.col].animal.getComponent(this._optionalObj).onRunSmall();\n\n                this.onHideTipDir();\n\n                this._selectedObj.count = 0;\n\n                this._selectedObj.row = -1;\n\n                this._selectedObj.col = -1;\n\n            }\n\n        } else if ( this._optionalObj == componentStr && !isSelected ) {\n\n            this._selectedObj.count = 0;\n\n            this._selectedObj.row = -1;\n\n            this._selectedObj.col = -1;\n\n            this.onHideTipDir();\n\n        } else {\n            //如果没有被选中的棋子，就点击了其它颜色的棋子 提示玩家不允许操作其它玩家的棋子\n            if ( !this.onCheckOptionalValid() ) {\n\n                this.onAddTip( \"不可以操作其他玩家棋子\" );\n\n                return;\n\n            }\n\n            // 消除操作 计算 根据\n            /**\n             *  已经记录了被选中的点\n             *  1.计算传过来的点是否与被选中的点是否相邻\n             *  2.具体算法：(row - 1 >= 0 && row - 1 == selected[0])\n             */\n\n            if ( this.onClearAlgorithm( row, col ) && !this.onCheckAnimalSame( row, col ) ) {\n\n                // 可以进行消除逻辑 让当前被选中的小动物，进行移动到将被消除的小动物位置\n\n                var index0 = this._selectedObj.row;\n\n                var index1 = this._selectedObj.col;\n\n                var targetPos = { x:this.tableNodes[row][col].animal.x,\n                                    y:this.tableNodes[row][col].animal.y };\n\n                // var targetPos = this.node_table.node.convertToNodeSpaceAR(tempPos)\n\n                // console.log( \"selected x y\", this.tableNodes[index0][index1].x, this.tableNodes[index0][index1].y );\n\n                // console.log( \"index0 index1\", index0, index1 );\n\n                // console.log( \"targetPos \", targetPos.x, targetPos.y );\n\n                this.tableNodes[index0][index1].animal.getComponent(this._optionalObj).node.setLocalZOrder(99);\n\n                // 移动 回调删除被吃掉的棋子（被吃掉的棋子进行删除）\n                this.tableNodes[index0][index1].animal.getComponent(this._optionalObj).onMoveToTarget( targetPos, row, col, this.onMoveCallbackDel.bind(this) );\n\n            } else {\n\n                var index0 = this._selectedObj.row;\n\n                var index1 = this._selectedObj.col;\n\n                this.tableNodes[index0][index1].animal.getComponent(this._optionalObj).onRunSmall();\n\n                this.onHideTipDir();\n\n                // 不可以进行消除 原地不动\n                this._selectedObj.row = -1;\n\n                this._selectedObj.col = -1;\n\n            }\n\n\n        }\n\n    },\n\n    // 点击默认占位的对象后回调\n    onBombTouchCallback: function ( row, col, componentStr ) {\n\n        console.log( \"onBombTouchCall\", this._isCanOptional );\n\n        if ( !this._isCanOptional ) {\n\n            this.onAddTip( \"您操作太频繁，请稍等...\" );\n            \n            return;\n\n        } else {\n\n            this.tableNodes[row][col].animal.getComponent(componentStr).playAnimation( this.onAnimaltionBreakCallback.bind(this) );\n\n        }\n\n    },\n\n    onAnimaltionBreakCallback: function ( row, col ) {\n\n        this.onCheckOptionSelf();\n\n        this.tableNodes[row][col].animal.active = true;\n\n        this.tableNodes[row][col].animal.opacity = 255;\n\n        // var tempNode = null;\n\n        // var comStr   = \"\";\n\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\n        // for (let index = 0; index < this.tableNodes.length; index++) {\n\n        //     for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\n\n        //         if ( !this.tableNodes[index][jndex].isDie ) {\n\n        //             tempNode = this.tableNodes[index][jndex].animal;\n\n        //             comStr   = tempNode.componentStr;\n\n        //             if ( tempNode.getComponent(comStr).getAnimalIsBig() ) {\n\n        //                 tempNode.getComponent(comStr).onRunSmall();\n\n        //             } else {\n\n\n        //             }\n\n        //         }\n\n        //     }\n        // }\n\n        this.onResetStatus();\n\n        this.onHideTipDir();\n\n    },\n\n    // 点击空白方块的回调\n    onEmptyTouchCallback: function ( row, col ) {\n\n        console.log( \"onEmptyTouchCallback\", row, col );\n        // 把被选中的动物移动到当前位置\n        if ( this.onClearAlgorithm( row, col ) ) {\n\n            // this._optionalObj\n            var index0 = this._selectedObj.row;\n\n            var index1 = this._selectedObj.col;\n\n            var targetPos = { x:this.allBtnEmpty[row][col].x,\n                                y:this.allBtnEmpty[row][col].y };\n\n            this.tableNodes[index0][index1].animal.getComponent(this._optionalObj).onMoveToTarget( targetPos, row, col, this.onMoveCallback.bind(this) );                \n\n        } else {\n\n            // 不能移动\n\n        }\n\n\n    },\n\n    // 移动后并且删除被吃掉的棋子\n    onMoveCallbackDel: function ( row, col ) {\n\n        // 设置操作棋子的row col\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        if ( this.onCheckCompare( row, col ) == this._compareState.eq ) {\n\n            // 两个棋子都删除\n\n            var delStrTarget = this.tableNodes[row][col].animal.componentStr;\n\n            var delStrSelected = this.tableNodes[selected0][selected1].animal.componentStr;\n\n            this.onPlayDestoryAni( row, col );\n    \n            // 删除被吃掉的棋子\n            this.tableNodes[row][col].animal.getComponent(delStrTarget).onDestory();\n\n            this.tableNodes[selected0][selected1].animal.getComponent(delStrSelected).onDestory();\n\n            this.tableNodes[row][col].isDie = true;\n\n            this.tableNodes[selected0][selected1].isDie = true;\n\n        } else if ( this.onCheckCompare( row, col ) == this._compareState.gt ) {\n\n            // selected被吃掉\n\n            var delStr = this.tableNodes[selected0][selected1].animal.componentStr;\n    \n            this.tableNodes[selected0][selected1].isDie = true;\n\n            this.tableNodes[row][col].isDie = false;\n    \n            this.onPlayDestoryAni( row, col );\n            // 删除被吃掉的棋子\n            this.tableNodes[selected0][selected1].animal.getComponent(delStr).onDestory();\n\n        } else if ( this.onCheckCompare( row, col ) == this._compareState.lt ) {\n\n            // 目标被吃掉\n            var delStr = this.tableNodes[row][col].animal.componentStr;\n\n            var selectedStr = this.tableNodes[selected0][selected1].animal.componentStr;\n            \n            this.tableNodes[row][col].isDie = true;\n\n            this.tableNodes[selected0][selected1].isDie = false;\n\n            this.tableNodes[selected0][selected1].animal.getComponent(selectedStr).node.setLocalZOrder(1);\n    \n            this.onPlayDestoryAni( row, col );\n            // 删除被吃掉的棋子\n            this.tableNodes[row][col].animal.getComponent(delStr).onDestory();\n    \n            this.tableNodes[row][col].animal = this.tableNodes[selected0][selected1].animal;\n\n            this.tableNodes[row][col].isDie = this.tableNodes[selected0][selected1].isDie;\n\n            this.tableNodes[selected0][selected1].isDie = true;\n\n            this.tableNodes[selected0][selected1].animal.getComponent(this._optionalObj).onSetRowAndCol( row, col );\n\n        } else if ( this.onCheckCompare( row, col ) == -1 ) {\n\n            // this.onAddTip( \"比较大小出错(-1),请检查参数是否正确\" );\n            return;\n\n        }\n\n        // console.log( \"onMoveCallbackDel === \", this.tableNodes[row][col].isDie );\n\n        // 检测游戏结果\n        if ( this.onCheckResult() ) {\n\n            // this.closeUpdate();\n\n        } else {\n\n            // 切换操作对象\n            this.onCheckOptionSelf();\n\n        }\n\n    },\n\n    //  移动结果回调\n    onMoveCallback: function ( row, col ) {\n\n        // 切换操作用户\n        console.log( \"移动完成\" );\n        // 移动后属性互换\n\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        var targetDie = this.tableNodes[row][col].isDie;\n\n        this.tableNodes[row][col].animal = this.tableNodes[selected0][selected1].animal;\n\n        this.tableNodes[row][col].isDie = this.tableNodes[selected0][selected1].isDie;\n\n        this.tableNodes[selected0][selected1].isDie = targetDie;\n\n        this.tableNodes[selected0][selected1].animal.getComponent(this._optionalObj).onSetRowAndCol( row, col );\n\n        this.onCheckOptionSelf();\n        // this.closeUpdate();\n\n    },\n\n    // 切换用户\n    onCheckOptionSelf: function (  ) {\n\n        this.closeUpdate();\n\n        this.onSetOptionalTime();\n\n        // 要清理 自己的棋子的状态\n        this.onResetStatus();\n\n        this._selectedObj.row = -1;\n\n        this._selectedObj.col = -1;\n\n        this._selectedObj.count = 0;\n\n        if ( this._optionalObj == \"Animal_blue\" ) {\n\n            this._optionalObj = \"Animal_red\";\n\n            this.onRedBoardAni( true );\n\n            this.onBlueBoardAni( false );\n\n        } else if ( this._optionalObj == \"Animal_red\" ) {\n\n            this._optionalObj = \"Animal_blue\";\n\n            this.onBlueBoardAni( true );\n\n            this.onRedBoardAni( false );\n\n        }\n\n        // this.onAddTip( this._optionalObj );\n\n        this.onHideTipDir();\n\n        this.onShowValidOptionalObj();\n\n    },\n\n    //计算点击后是否可以进行移动\n    onClearAlgorithm: function ( row, col ) {\n\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        var isClear = false;\n\n        if ( row - 1 == selected0 && col == selected1 ) {\n\n            // 消除\n            isClear = true;\n            // console.log( \" row  - 1 \" );\n\n        } else if ( row + 1 == selected0 && col == selected1 ) {\n\n            // 消除\n            isClear = true;\n            // console.log( \" row  + 1 \" );\n\n        } else if ( row == selected0 && col - 1 == selected1 ) {\n\n            // 消除\n            isClear = true;\n            // console.log( \" col  - 1 \" );\n            \n        } else if ( row == selected0 && col + 1 == selected1 ) {\n\n            // 消除\n            isClear = true;\n            // console.log( \" col + 1 \" );\n\n        } else if ( selected0 == -1 && selected1 == -1 ) {\n\n            // 不可以消除 直接\n            isClear = false;\n            // console.log( \" selected0 -1 selected1 -1\" );\n\n        } else {\n\n            // 不可以消除 直接\n            isClear = false;  \n            // console.log( \" else \" );  \n\n        }\n\n        console.log( \"isClear ===== \", isClear );\n\n        return isClear;\n\n    },\n\n    // 点击后是否能吃掉对方  消除\n    /**\n     *  比较大小\n     *  1.如果移动的棋子比固定的棋子大，则吃掉对方；否则被吃掉；\n     *  2.如果相等，则两个棋子都消失\n     */\n    onCheckCompare: function ( row, col ) {\n\n        // this._compareState\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        var targetObj = this.tableNodes[row][col].animal.componentStr;\n\n        var selectedIndex = this.tableNodes[selected0][selected1].animal.getComponent(this._optionalObj).onGetAnimalIndex(  );\n\n        var targetIndex   = this.tableNodes[row][col].animal.getComponent(targetObj).onGetAnimalIndex(  );\n\n        // 首先是特殊情况 老鼠可以吃大象 所以\n        /**\n         *  所有这个两个对象 如果index一个是8 并且一个是1  要特殊处理\n         *  要把大象吃掉\n         * \n         *  相同颜色的动物不可以互相吃掉\n         */\n\n        // console.log( \"selectedIndex targetIndex\", selectedIndex, targetIndex );\n\n        var compareState = -1;\n\n        if ( (selectedIndex == 8 && targetIndex == 1 ) ) {\n\n            // 假设被选中的是大象，目标是老鼠 这时候，大象被吃\n            compareState = this._compareState.lt;\n\n        } else if ( (selectedIndex == 1 && targetIndex == 8 ) ) {\n\n            // 假设被选中的是老鼠，目标是大象 这时候，大象被吃\n            compareState = this._compareState.gt;\n\n        } else if ( selectedIndex == targetIndex ) {\n\n            compareState = this._compareState.eq;\n\n        } else if ( selectedIndex > targetIndex ) {\n\n            compareState = this._compareState.gt;\n\n        } else if ( selectedIndex < targetIndex ) {\n\n            compareState = this._compareState.lt;\n\n        }\n\n        return compareState;\n\n    },\n\n    // 判断两个动物是否相同\n    onCheckAnimalSame: function ( row, col ) {\n\n        var isSame = false;\n\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        var targetComStr = this.tableNodes[row][col].animal.componentStr;\n\n        var selectedStr = this.tableNodes[selected0][selected1].animal.componentStr;\n\n        // console.log( \" onCheckAnimalSame \", row, col, targetComStr, selectedStr );\n\n        if ( targetComStr == selectedStr ) {\n\n            this.tableNodes[selected0][selected1].animal.getComponent(selectedStr).onRunSmall();\n\n            this.tableNodes[row][col].animal.getComponent(targetComStr).onRunSmall();\n\n            this.onHideTipDir();\n\n            isSame = true;\n\n        }\n\n        return isSame;\n\n    },\n\n    // 检测操作是否合法\n    onCheckOptionalValid: function (  ) {\n\n        var selected0 = this._selectedObj.row;\n\n        var selected1 = this._selectedObj.col;\n\n        if ( selected0 == -1 && selected1 == -1 ) {\n\n            return false;\n\n        }\n\n        return true;\n\n    },\n\n    // 显示有效的操作对象\n    onShowValidOptionalObj: function (  ) {\n\n        console.log( \" onShowValidOptionalObj \" );\n\n        var tempNode = null;\n\n        var comStr = '';\n\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\n        for (let index = 0; index < this.tableNodes.length; index++) {\n\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\n\n                if ( !this.tableNodes[index][jndex].isDie ) {\n\n                    tempNode = this.tableNodes[index][jndex].animal;\n\n                    comStr   = tempNode.componentStr;\n\n                    if ( tempNode.getComponent(comStr).getAnimalIsBreak() ) {\n\n                        if ( this._optionalObj == comStr ) {\n\n                            tempNode.getComponent(comStr).onShowSelfTip();\n\n                        } else {\n\n                            tempNode.getComponent(comStr).onHideTip();\n\n                        }\n\n                    } else {\n\n                        tempNode.getComponent(comStr).onOptionalObj();\n\n                    }\n\n                }\n\n            }\n        }\n\n    },\n\n    // 重置棋子的状态\n    onResetStatus: function (  ) {\n\n        var tempNode = null;\n\n        var comStr = '';\n\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\n        for (let index = 0; index < this.tableNodes.length; index++) {\n\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\n\n                if ( !this.tableNodes[index][jndex].isDie ) {\n\n                    tempNode = this.tableNodes[index][jndex].animal;\n\n                    comStr   = tempNode.componentStr;\n\n                    if ( comStr == this._optionalObj ){\n\n                        if ( tempNode.getComponent(comStr).getAnimalIsBig() ) {\n\n                            tempNode.getComponent(comStr).onRunSmall();\n\n                        } else {\n\n\n                        }\n                    }\n\n                }\n\n            }\n        }\n\n    },\n\n        // 检测游戏结果\n    /**\n     * 判断某方玩家的输赢\n     * 看哪一方的棋子剩下的多，如果所有的棋子都没有了，算平局\n     */\n    onCheckResult: function (  ) {\n\n        var blueCount = 0;\n\n        var pinkCount = 0;\n\n        var tempNode = null;\n\n        var comStr = \"\";\n\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\n        for (let index = 0; index < this.tableNodes.length; index++) {\n\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\n\n                if ( !this.tableNodes[index][jndex].isDie ) {\n\n                    tempNode = this.tableNodes[index][jndex].animal;\n\n                    comStr   = tempNode.componentStr;\n\n                    // console.log( \" comStr === \", comStr );\n\n                    if ( comStr == \"Animal_blue\" ) {\n\n                        blueCount += 1;\n\n                    } else if ( comStr == \"Animal_red\" ) {\n\n                        pinkCount += 1;\n\n                    }\n\n                }\n\n            }\n        }\n\n        // \n\n        console.log( \"blueCount === \", blueCount );\n\n        console.log( \"pinkCount === \", pinkCount );\n\n        var isResult = false;\n\n        if ( blueCount == 0 && pinkCount == 0 ) {\n            \n            // 平局\n            isResult = true;\n\n        } else if ( pinkCount == 0 && blueCount > pinkCount ) {\n\n            //蓝方胜利\n            isResult = true;\n\n        } else if ( blueCount == 0 && pinkCount > blueCount ) {\n\n            //粉方胜利\n            isResult = true;\n\n        }\n\n        if ( isResult ) {\n\n            this.closeUpdate();\n\n            this.onHideTipDir();\n\n            this._playAnimCallback = function() {\n    \n                this.onAddResultLayer();\n    \n            };\n    \n            this.scheduleOnce(this._playAnimCallback, 0.5);\n\n        }\n\n        return isResult;\n\n    },\n\n    onClearTabel: function (  ) {\n\n        var tempNode = null;\n\n        var comStr = '';\n\n        // 清除所有动物 需要重新初始化\n        for (let index = 0; index < this.tableNodes.length; index++) {\n\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\n\n                if ( !this.tableNodes[index][jndex].isDie ) {\n\n                    tempNode = this.tableNodes[index][jndex].animal;\n\n                    comStr   = tempNode.componentStr;\n\n                    tempNode.getComponent(comStr).onDestory();\n\n                }\n\n            }\n        }\n\n\n    },\n\n    onRestart: function (  ) {\n\n        this.onClearTabel();\n\n        this.init();\n\n        this.initUI();\n\n        this.openUpdate();\n\n        this.onOptionalTimeAni();\n\n    },\n\n// ******** 操作倒计时 ************\n\n    // 打开倒计时函数\n    openUpdate: function () {\n\n        var interval    = 1;                    //以秒为单位的时间间隔\n\n        var repeat      = this.defalutTiem;     //重复次数\n\n        var delay       = 0;                    //开始延时\n        \n        this.schedule( this.onTimeDownCallback,  interval, repeat, delay);\n\n    },\n\n    // 关闭倒计时函数\n    closeUpdate: function () {\n\n        console.log( \" closeUpdate ********************** \" );\n\n        this.unschedule(this.onTimeDownCallback);\n\n        this.count = 30;\n\n        this._isCanOptional = false;\n\n        // this.onCheckOptionSelf();\n\n    },\n\n    // 倒计时回调\n    onTimeDownCallback: function (  ) {\n\n        this.count -= 1;\n\n        if ( this.count < 0 ){\n\n            this.closeUpdate();\n\n            this.onCheckOptionSelf();\n\n        } else {\n\n            // 设置文本信息\n            this.onSetOptionalTime();\n\n        }\n\n        \n\n    },\n\n    onCanOptionalObj: function (  ) {\n\n        return this._isCanOptional;\n\n    },\n\n// ******** 操作倒计时 ************\n    \n\n// ******** 对象可以移动的方向指示 ********\n\n    // 检测上下左右是否可以移动\n    /**\n     * \n     * 移动规则为：如果四周有空位置，提示➡箭头出现\n     * 1.如果旁边还有箱子，不提箭头\n     * 2.如果旁边右自己的动物，不提示箱子\n     * \n     */\n    onCheckRoundMove: function ( row, col, obj ) {\n\n        var moveDir = { up:false, down:false, left:false, right:false };\n\n\n    \n        if ( row - 1 >= 0) {\n    \n            // 找出(row-1, col) 这个位置的对像\n            // 上移动\n            var isShowDir = this.onFindAnimalOfIndex( (row-1), col );\n\n            if ( isShowDir ) {\n\n                moveDir.up = true;\n\n            }\n            \n        }\n        \n        if ( row + 1 <= 3) {\n    \n            // 下移动\n            var isShowDir = this.onFindAnimalOfIndex( (row+1), col );\n\n            if ( isShowDir ) {\n\n                moveDir.down = true;\n\n            }\n    \n        } \n    \n        if ( col - 1 >= 0 ) {\n    \n            // 左移动\n            var isShowDir = this.onFindAnimalOfIndex( row, (col-1) );\n\n            if ( isShowDir ) {\n\n                moveDir.left = true;\n\n            }\n            \n        } \n        \n        if ( col + 1 <= 3 ) {\n    \n            // 右移动\n            var isShowDir = this.onFindAnimalOfIndex( row, (col+1) );\n\n            if ( isShowDir ) {\n\n                moveDir.right = true;\n\n            }\n    \n        }\n\n        if ( (row < 0 || col < 0) || ( row > 3 || col > 3 ) ) {\n    \n            moveDir = { up:false, down:false, left:false, right:false };\n    \n        }\n\n        // obj.onTipMoveDirection( moveDir );\n\n        this.node_dir.x = this.tableNodes[row][col].animal.x;\n\n        this.node_dir.y = this.tableNodes[row][col].animal.y + 10;\n\n        this.onTipMoveDirection( moveDir );\n\n    },\n\n    onFindAnimalOfIndex: function ( row, col ) {\n\n        var tempNode = null;\n\n        var comStr = '';\n\n        var isShowDir = false;\n\n        if ( !this.tableNodes[row][col].isDie ) {\n\n            tempNode = this.tableNodes[row][col].animal;\n\n            comStr = tempNode.componentStr;\n\n            // 当前箱子没有坏掉\n            if ( !tempNode.getComponent(comStr).getAnimalIsBreak() ) {\n\n                // 此种情况 不显示这个方向的 方向标\n                isShowDir = false;\n\n            } else {\n\n                // isShowDir = true;\n                if ( this._optionalObj == comStr ) {\n\n                    isShowDir = false;\n    \n                } else {\n\n                    isShowDir = true;\n\n                }\n\n            }\n\n        } else {\n\n            isShowDir = true;\n\n        }\n\n        return isShowDir;\n\n    },\n\n        //  选中后提示玩家可以移动的方向 ()\n    /**\n     * 根据当前位置（x y）计算 上下左右 四个方向是否可以移动\n     * 如果某个方向可以移动，则展示提示动画\n     */\n    onTipMoveDirection: function ( moveDir ) {\n\n        if ( moveDir.up ) {\n\n            // 播放上动画\n            this.onRepeatAction( this.sp_up, \"up\" );\n\n        }\n\n        if ( moveDir.down ) {\n\n            // 播放下动画\n            this.onRepeatAction( this.sp_down, \"down\" );\n\n        }\n\n        if ( moveDir.left ) {\n\n            // 播放左动画\n            this.onRepeatAction( this.sp_left, \"left\" );\n\n        }\n\n        if ( moveDir.right ) {\n\n            // 播放右动画\n            this.onRepeatAction( this.sp_right, \"right\" );\n\n        }\n\n    },\n\n        /**\n     * @nodeObj: 哪个对象执行\n     * @dirStr: 方向\n     */\n    onRepeatAction: function ( nodeObj, dirStr ) {\n\n        nodeObj.node.active = true;\n\n        nodeObj.node.opacity = 255;\n\n        var animState = nodeObj.play(dirStr);\n\n        // 设置循环模式为 Loop\n        animState.wrapMode = cc.WrapMode.Loop;\n\n        // 设置动画循环次数为无限次\n        animState.repeatCount = Infinity;\n\n    },\n\n    // 隐藏四个方向小标\n    onHideTipDir: function (  ) {\n\n        this.sp_up.node.active = false;\n\n        this.sp_up.node.opacity = 0;\n\n        this.sp_down.node.active = false;\n\n        this.sp_down.node.opacity = 0;\n\n        this.sp_left.node.active = false;\n\n        this.sp_left.node.opacity = 0;\n\n        this.sp_right.node.active = false;\n\n        this.sp_right.node.opacity = 0;\n\n    },\n\n// ****************** 对象可以移动的方向指示 ******************\n\n// ******************     被消灭的动画     ******************\n\n    onPlayDestoryAni: function ( row, col ) {\n\n        this.sp_destory.node.x = this.allPos[row][col].x;\n\n        this.sp_destory.node.y = this.allPos[row][col].y;\n\n        this.onDestoryAnimation();\n        \n    },\n\n    onDestoryAnimation: function () {\n\n        this.sp_destory.node.active = true;\n\n        this.sp_destory.node.opacity = 255;\n\n        var animState = this.sp_destory.play(\"destory\");\n\n        var self = this;\n\n        function onFinished (  ) {\n\n            console.log( \"onFinished\" );\n\n            self.sp_destory.node.active = false;\n\n            self.sp_destory.node.opacity = 0;\n\n        };\n\n        animState.on('finished',  onFinished,  this.sp_destory);\n\n    },\n\n// ******************  被消灭的动画   ******************\n\n// ****************** 操作时间过度动画 ******************\n\n    /**\n     * 随机出操作方\n     * 根据随机出来的对象，显示操作时间\n     * 显示要求：（假设，随机出来的是红方先操作）\n     * 1.红方时间面板从0放大到1的过程；30s后面板从1到0缩小，然后显示白板0.5s，0.5s后白板隐藏，\n     * 蓝色面板从0放大到1的过程；然后重复循环此过程\n     */\n    onOptionalTimeAni: function (  ) {\n\n        if ( this._optionalObj == \"Animal_red\" ) {\n\n            this.onRedBoardAni( true );\n\n        } else if ( this._optionalObj == \"Animal_blue\" ) {\n\n            this.onBlueBoardAni( true );\n\n        }\n\n    },\n\n    /**\n     * optionalObj: 操作方\n     */\n    onRedBoardAni: function ( optionalObj ) {\n\n        if ( optionalObj ) {\n\n            // 红面板从0放大到1的过程；\n\n            var scale = cc.scaleTo( 0.2, 1, 1 );\n\n            var delay = cc.delayTime( 0.2 );\n\n            var self = this;\n\n            function onFinishCallback (  ){\n\n                self.sp_white.node.scale = 0;\n\n                var scale2 = cc.scaleTo( 0.2, 1, 1 );\n    \n                self.sp_red_time.node.runAction( scale2 );\n\n                self._isCanOptional = true;\n\n                self.openUpdate();\n\n            };\n\n            var seq = cc.sequence(  scale,\n                                    delay,\n                                    cc.callFunc( onFinishCallback, this, this.sp_white ) );\n\n            this.sp_white.node.runAction( seq );\n\n        } else {\n\n            // 红面板从1缩小到0的过程；\n            var scale = cc.scaleTo( 0.2, 1, 0 );\n\n            var self = this;\n\n            function onFinishCallback (  ){\n\n\n            };\n\n            var seq = cc.sequence( scale, \n            cc.callFunc( onFinishCallback, this, this.sp_red_time ) );\n\n            this.sp_red_time.node.runAction( seq );\n\n        }\n\n    },\n\n    /**\n     * optionalObj: 操作方\n     */\n    onBlueBoardAni: function ( optionalObj ) {\n\n        if ( optionalObj ) {\n\n            // 红面板从0放大到1的过程\n\n            var scale = cc.scaleTo( 0.2, 1, 1 );\n\n            var delay = cc.delayTime( 0.2 );\n\n            var self = this;\n\n            function onFinishCallback (  ){\n\n                self.sp_white.node.scale = 0;\n\n                var scale1 = cc.scaleTo( 0.2, 1, 1 );\n\n                self.sp_blue_time.node.runAction( scale1 );\n\n                self._isCanOptional = true;\n\n                self.openUpdate();\n\n            };\n\n            var seq = cc.sequence(  scale,\n                                    delay,\n                                    cc.callFunc( onFinishCallback, this, this.sp_white ) );\n\n            this.sp_white.node.runAction( seq );\n\n        } else {\n\n            // 红面板从1缩小到0的过程；\n            var scale = cc.scaleTo( 0.2, 1, 0 );\n\n            var self = this;\n\n            function onFinishCallback (  ){\n\n\n            };\n\n            var seq = cc.sequence( scale, \n                                    cc.callFunc( onFinishCallback, this, this.sp_blue_time ) );\n\n            this.sp_blue_time.node.runAction( seq );\n\n        }\n\n    },\n\n        /**\n     * optionalObj: 操作方\n     */\n    onWhiteBoardAni: function ( optionalObj ) {\n\n        var scale = cc.scaleTo( 0.5, 1, 1 );\n\n        var self = this;\n\n        function onFinishCallback (  ) {\n\n            self.sp_white.node.active = false;\n\n            self.sp_white.node.opacity = 0;\n\n            self.sp_white.node.scaleY = 0;\n\n            console.log( \" onFinishCallback onWhiteBoardAni \", optionalObj );\n\n            if ( optionalObj == \"red\" ) {\n\n                self.onBlueBoardAni( true );\n\n            } else {\n\n                self.onRedBoardAni( true );\n\n            }\n\n        }\n\n        var seq = cc.sequence( scale, \n        cc.callFunc(onFinishCallback, this, this.sp_white) );\n\n        this.sp_white.node.runAction( seq );\n\n\n    },\n\n    // 设置玩家操作时间\n    onSetOptionalTime: function (  ) {\n\n        if ( this._optionalObj == \"Animal_blue\" ) {\n\n            this.label_blue_time.string = this.count.toString() + \"s\";\n\n        } else {\n\n            this.label_red_time.string = this.count.toString() + \"s\";\n\n        }\n\n    },\n\n// ****************** 操作时间过度动画 ******************\n\n// ******************     提示框     ******************\n/**\n * tipStr: 提示文字\n */\n    onAddTip: function ( tipStr ) {\n\n        console.log( \" add------tip \", this._isShowTip );\n\n        this.label_tip.string = tipStr;\n\n        if ( this._isShowTip ) {\n\n            return;\n\n        } else {\n\n            this.onShowtip();\n\n        }\n\n    },\n\n    onShowtip: function (  ) {\n\n        console.log( \" onShowtip\" );\n\n        var self = this;\n\n        this._isShowTip = true;\n\n        this.sp_tip.node.active = true;\n\n        this.sp_tip.node.opacity = 255;\n\n        // 缩小放大动画\n        var scale = cc.scaleTo(0.2, 1);\n\n        function onActionFinishCall (  ){\n\n            // this.sp_tip.node.scale = 0;\n            this.onHidetip();\n\n        };\n\n        var delay = cc.delayTime(0.8);\n\n        var seq = cc.sequence( scale, delay, \n                                cc.callFunc(onActionFinishCall, this, this.sp_tip) );\n\n        this.sp_tip.node.runAction( seq );\n\n    },\n\n    onHidetip: function (  ) {\n\n        // 缩小放大动画\n        var scale = cc.scaleTo(0.1, 0);\n\n        function onActionFinishCall (  ){\n\n            this.sp_tip.node.scale = 0;\n\n            this._isShowTip = false;\n\n        };\n\n        var seq = cc.sequence( scale, cc.callFunc(onActionFinishCall, this, this.sp_tip));\n\n        this.sp_tip.node.runAction( seq );\n\n    },\n\n    // 弹出 确认取消框\n    onAddAlert: function ( descStr, labelRedBtn, labelBlueBtn ) {\n\n        this.label_alert.string = descStr;\n\n        this.label_red_btn.string = labelRedBtn;\n\n        this.label_blue_btn.string = labelBlueBtn;\n\n        if ( this._isShowAlert ) {\n\n            return;\n\n        } else {\n\n            this.onShowAlert();\n\n        }\n\n    },\n\n    onShowAlert: function (  ) {\n\n        var self = this;\n\n        this._isShowAlert = true;\n\n        // 缩小放大动画\n        var scale = cc.scaleTo(0.2, 1);\n\n        function onActionFinishCall (  ){\n\n\n        };\n\n        var delay = cc.delayTime(0.8);\n\n        var seq = cc.sequence( scale, delay, \n                                cc.callFunc(onActionFinishCall, this, this.sp_alert) );\n\n        this.sp_alert.node.runAction( seq );\n\n    },\n\n    onHideAlert: function (  ) {\n\n        // 缩小放大动画\n        var scale = cc.scaleTo(0.1, 0);\n\n        function onActionFinishCall (  ){\n\n            this.sp_alert.node.scale = 0;\n\n            this._isShowAlert = false;\n\n        };\n\n        var seq = cc.sequence( scale, cc.callFunc(onActionFinishCall, this, this.sp_alert));\n\n        this.sp_alert.node.runAction( seq );\n\n    },\n\n\n// ******************    提示框    ******************\n\n// ******************    结算页面    ******************\n\n    onAddResultLayer: function () {\n\n        var self = this;\n\n        var resutlLayer = cc.instantiate( this.result_prefab );\n\n        resutlLayer.addComponent('GameResult');\n\n        resutlLayer.setLocalZOrder(100);\n\n        resutlLayer.parent = this.nodeResult;\n\n        resutlLayer.x = 320;\n\n        resutlLayer.y = 568;\n\n        function onCallback (  ) {\n\n            // console.log( \" onCallback \" );\n\n            self.onRestart();\n\n        };\n\n        resutlLayer.getComponent('GameResult').onInitUI();\n\n        resutlLayer.getComponent('GameResult').onSetGameResultInfo( \"fdsklf\", onCallback );\n\n    }\n\n// ******************    结算页面    ******************\n});\n"]}