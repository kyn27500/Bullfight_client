{"version":3,"sources":["onfire.js"],"names":["root","factory","module","exports","onfire","window","__onfireEvents","__cnt","string_str","function_str","hasOwnKey","Function","call","bind","Object","hasOwnProperty","slice","Array","prototype","_bind","eventName","callback","is_one","context","Error","_each","obj","key","on","one","_fire_func","args","item","apply","fire","arguments","setTimeout","fireSync","un","event","r","type","key_1","item_1","key_2","item_2","clear"],"mappings":"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","file":"onfire.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\resources\\Script\\network","sourcesContent":["/**\r\n  Copyright (c) 2016 hustcc http://www.atool.org/\r\n  License: MIT \r\n  https://github.com/hustcc/onfire.js\r\n**/\r\n/* jshint expr: true */ \r\n!function (root, factory) {\r\n  if (typeof module === 'object' && module.exports)\r\n    module.exports = factory();\r\n  else\r\n    root.onfire = factory();\r\n}(typeof window !== 'undefined' ? window : this, function () {\r\n  var __onfireEvents = {},\r\n   __cnt = 0, // evnet counter\r\n   string_str = 'string',\r\n   function_str = 'function',\r\n   hasOwnKey = Function.call.bind(Object.hasOwnProperty),\r\n   slice = Function.call.bind(Array.prototype.slice);\r\n\r\n  function _bind(eventName, callback, is_one, context) {\r\n    if (typeof eventName !== string_str || typeof callback !== function_str) {\r\n      throw new Error('args: '+string_str+', '+function_str+'');\r\n    }\r\n    if (! hasOwnKey(__onfireEvents, eventName)) {\r\n      __onfireEvents[eventName] = {};\r\n    }\r\n    __onfireEvents[eventName][++__cnt] = [callback, is_one, context];\r\n\r\n    return [eventName, __cnt];\r\n  }\r\n  function _each(obj, callback) {\r\n    for (var key in obj) {\r\n      if (hasOwnKey(obj, key)) callback(key, obj[key]);\r\n    }\r\n  }\r\n  /**\r\n   *  onfire.on( event, func, context ) -> Object\r\n   *  - event (String): The event name to subscribe / bind to\r\n   *  - func (Function): The function to call when a new event is published / triggered\r\n   *  Bind / subscribe the event name, and the callback function when event is triggered, will return an event Object\r\n  **/\r\n  function on(eventName, callback, context) {\r\n    return _bind(eventName, callback, 0, context);\r\n  }\r\n  /**\r\n   *  onfire.one( event, func, context ) -> Object\r\n   *  - event (String): The event name to subscribe / bind to\r\n   *  - func (Function): The function to call when a new event is published / triggered\r\n   *  Bind / subscribe the event name, and the callback function when event is triggered only once(can be triggered for one time), will return an event Object\r\n  **/\r\n  function one(eventName, callback, context) {\r\n    return _bind(eventName, callback, 1, context);\r\n  }\r\n  function _fire_func(eventName, args) {\r\n    if (hasOwnKey(__onfireEvents, eventName)) {\r\n      _each(__onfireEvents[eventName], function(key, item) {\r\n        item[0].apply(item[2], args); // do the function\r\n        if (item[1]) delete __onfireEvents[eventName][key]; // when is one, delete it after triggle\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   *  onfire.fire( event[, data1 [,data2] ... ] )\r\n   *  - event (String): The event name to publish\r\n   *  - data...: The data to pass to subscribers / callbacks\r\n   *  Async Publishes / fires the the event, passing the data to it's subscribers / callbacks\r\n  **/\r\n  function fire(eventName) {\r\n    // fire events\r\n    var args = slice(arguments, 1);\r\n    setTimeout(function () {\r\n      _fire_func(eventName, args);\r\n    });\r\n  }\r\n  /**\r\n   *  onfire.fireSync( event[, data1 [,data2] ... ] )\r\n   *  - event (String): The event name to publish\r\n   *  - data...: The data to pass to subscribers / callbacks\r\n   *  Sync Publishes / fires the the event, passing the data to it's subscribers / callbacks\r\n  **/\r\n  function fireSync(eventName) {\r\n    _fire_func(eventName, slice(arguments, 1));\r\n  }\r\n  /**\r\n   * onfire.un( event ) -> Boolean\r\n   *  - event (String / Object): The message to publish\r\n   * When passed a event Object, removes a specific subscription.\r\n   * When passed event name String, removes all subscriptions for that event name(hierarchy)\r\n  *\r\n   * Unsubscribe / unbind an event or event object.\r\n   *\r\n   * Examples\r\n   *\r\n   *  // Example 1 - unsubscribing with a event object\r\n   *  var event_object = onfire.on('my_event', myFunc);\r\n   *  onfire.un(event_object);\r\n   *\r\n   *  // Example 2 - unsubscribing with a event name string\r\n   *  onfire.un('my_event');\r\n  **/\r\n  function un(event) {\r\n    var eventName, key, r = false, type = typeof event;\r\n    if (type === string_str) {\r\n      // cancel the event name if exist\r\n      if (hasOwnKey(__onfireEvents, event)) {\r\n        delete __onfireEvents[event];\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    else if (type === 'object') {\r\n      eventName = event[0];\r\n      key = event[1];\r\n      if (hasOwnKey(__onfireEvents, eventName) && hasOwnKey(__onfireEvents[eventName], key)) {\r\n        delete __onfireEvents[eventName][key];\r\n        return true;\r\n      }\r\n      // can not find this event, return false\r\n      return false;\r\n    }\r\n    else if (type === function_str) {\r\n      _each(__onfireEvents, function(key_1, item_1) {\r\n        _each(item_1, function(key_2, item_2) {\r\n          if (item_2[0] === event) {\r\n            delete __onfireEvents[key_1][key_2];\r\n            r = true;\r\n          }\r\n        });\r\n      });\r\n      return r;\r\n    }\r\n    return true;\r\n  }\r\n  /**\r\n   *  onfire.clear()\r\n   *  Clears all subscriptions\r\n  **/\r\n  function clear() {\r\n    __onfireEvents = {};\r\n  }\r\n  return {\r\n    on: on,\r\n    one: one,\r\n    un: un,\r\n    fire: fire,\r\n    fireSync: fireSync,\r\n    clear: clear\r\n  };\r\n});"]}