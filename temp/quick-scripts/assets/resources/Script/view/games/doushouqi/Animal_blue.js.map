{"version":3,"sources":["Animal_blue.js"],"names":["Com","require","cc","Class","extends","Component","properties","node_obj","default","type","Sprite","sp_animal","sp_icon","breakAni","Animation","dieAni","nodeBreak","Node","sp_self","sp_tip_break","is_big","is_break","row","col","animalIndex","onLoad","init","node","active","opacity","is_self","_touchCallback","_breakCallback","addTouchListener","event","customEventData","onRunSmall","start","update","dt","playAnimation","animationCall","animState","play","self","onFinished","console","log","destroy","onPlayEffect","on","onRunBig","bigFinishCall","seq","sequence","moveTo","p","scaleTo","callFunc","runAction","smallFinishCall","onMoveToTarget","targetPos","callback","moveFinishCall","scale","moveEnd","x","y","onOptionalObj","getAnimalIsBig","getAnimalIsBreak","onSetLocalZorder","zorder","setLocalZOrder","onLoadAnimal","index","animal","animalIcon","urlAnimal","onGetAnimalUrl","urlIcon","onGetAnimalIconUrl","loader","loadRes","SpriteFrame","error","spriteFrame","getComponent","onSetRowAndCol","onGetRowAndCol","obj","onDestory","onSetSelf","isSelf","onGetSelf","onGetAnimalIndex","onSetTouchCallback","touchcallback","onBreakBombCallback","breakcallback","onGetComponentStr","onHideTip","onShowSelfTip"],"mappings":"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","file":"Animal_blue.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\resources\\Script\\view\\games\\doushouqi","sourcesContent":["/**\r\n *  @brief: 蓝色小动物\r\n *  @time:  2018-05-2\r\n *  @author: JiangTao\r\n * \r\n *  点击后变大，在此点击后变回原来大小\r\n */\r\n\r\n\r\n// var _allAnimalNames = [\"elephant\", \"lion\", \"tiger\", \"leopard\", \r\n// \"wolf\", \"dog\", \"cat\", \"mouse\"];\r\n\r\n// var _animalUrl = \"animal/\";\r\n\r\n// var _iconUrl = \"animal_icon/blue/\";\r\nvar Com = require('Com')\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        node_obj: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n        sp_animal: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n        sp_icon: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        breakAni: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        dieAni: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        nodeBreak: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        sp_self: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        sp_tip_break: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        is_big: false,\r\n\r\n        is_break: false,\r\n\r\n        row:   -1,\r\n\r\n        col:   -1,\r\n\r\n        animalIndex: -1,\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n        // this.init();\r\n\r\n    },\r\n\r\n    init: function () {\r\n\r\n        this.sp_self.node.active = false;\r\n\r\n        this.sp_tip_break.node.opacity = 0;\r\n\r\n        this.sp_tip_break.node.active = false;\r\n\r\n        this.sp_tip_break.node.opacity = 0;\r\n\r\n        this.is_big = false;    //当前是否被选中\r\n\r\n        this.is_self = false;   //是否拥有蓝色动物\r\n\r\n        this._touchCallback = null;\r\n\r\n        this._breakCallback = null;\r\n\r\n    },\r\n\r\n    // 监听点击事件\r\n    addTouchListener: function ( event, customEventData ) {\r\n\r\n        // console.log(\"event ==== \", customEventData);\r\n\r\n        if ( customEventData == \"break\" ) {\r\n\r\n            // this.playAnimation();\r\n            if ( this._breakCallback ) {\r\n\r\n                this._breakCallback( this.row, this.col, \"Animal_blue\" );\r\n\r\n            }\r\n\r\n        } else if ( customEventData == \"blue\" ) {\r\n\r\n            if ( this.is_big ) {\r\n\r\n                this.onRunSmall();\r\n            \r\n                if ( this._touchCallback ) {\r\n\r\n                    this._touchCallback( this.row, this.col, \"Animal_blue\", false );\r\n    \r\n                }\r\n\r\n            } else {\r\n\r\n                // this.onRunBig();\r\n\r\n                if ( this._touchCallback ) {\r\n\r\n                    this._touchCallback( this.row, this.col, \"Animal_blue\", true );\r\n    \r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    start () {\r\n        // console.log(\" start +++++++++++++++++++++++++\")\r\n    },\r\n\r\n    update (dt) {\r\n        \r\n    },\r\n\r\n    // 播放爆开动画\r\n    playAnimation: function (  animationCall ) {\r\n\r\n        var animState = this.breakAni.play('break');\r\n\r\n        var self = this;\r\n\r\n        function onFinished (  ) {\r\n\r\n            console.log( \"onFinished\" );\r\n\r\n            self.is_break = true;\r\n\r\n            self.nodeBreak.destroy();\r\n\r\n            // 显示小动物\r\n            self.sp_animal.node.active = true;\r\n\r\n            self.sp_animal.node.opacity = 255;\r\n\r\n            self.sp_icon.node.active = true;\r\n\r\n            self.sp_icon.node.opacity = 255;\r\n\r\n            // if ( self._breakCallback ) {\r\n\r\n            //     self._breakCallback( self.row, self.col );\r\n\r\n            // }\r\n\r\n            if ( animationCall ) {\r\n\r\n                animationCall( self.row, self.col );\r\n\r\n            }\r\n\r\n            Com.onPlayEffect(self.animalIndex);\r\n\r\n        };\r\n\r\n        animState.on('finished',  onFinished,  this.breakAni);\r\n\r\n    },\r\n\r\n    // 变大\r\n    onRunBig: function (   ) {\r\n\r\n        function bigFinishCall () {\r\n\r\n            this.is_big = true;\r\n\r\n        }\r\n\r\n        // cc.scaleTo(0.05, 1.1)\r\n\r\n        var seq =   cc.sequence(cc.moveTo(0.05, cc.p(0, 14)), \r\n                        cc.scaleTo(0.05, 1.1),\r\n                        cc.callFunc(bigFinishCall, this, this.node_obj));\r\n\r\n        this.node_obj.node.runAction(seq);\r\n\r\n    },\r\n\r\n    // 缩小\r\n    onRunSmall: function (   ) {\r\n\r\n        // console.log( \"onRunSamll ===== \" );\r\n\r\n        function smallFinishCall () {\r\n\r\n            this.is_big = false;\r\n\r\n        }\r\n\r\n        // cc.scaleTo(0.05, 1)\r\n\r\n        var seq =   cc.sequence(cc.moveTo(0.05, cc.p(0, 4)), \r\n                        cc.scaleTo(0.05, 1),\r\n                        cc.callFunc(smallFinishCall, this, this.node_obj));\r\n\r\n        this.node_obj.node.runAction(seq);\r\n\r\n    },\r\n\r\n    //移动位置\r\n    /**\r\n     * @brief: 移动\r\n     * @targetPos: 移动后的位置\r\n     * @row: 被吃掉棋子的横坐标\r\n     * @col：被吃的棋子的纵坐标\r\n     * @callback: 移动后的回调函数\r\n     */\r\n    onMoveToTarget: function ( targetPos, row, col, callback ) {\r\n\r\n\r\n        var self = this;\r\n\r\n        function moveFinishCall () {\r\n\r\n            if ( callback ) {\r\n\r\n                callback( row, col );\r\n\r\n            }\r\n\r\n            // this.onRunSmall();\r\n            self.is_big = false;\r\n\r\n            var scale = cc.scaleTo(0.05, 1);\r\n\r\n            self.node_obj.node.runAction( scale );\r\n\r\n        }\r\n\r\n        // function moveEndFinishCall (  ) {\r\n\r\n        //     this.onRunSmall();\r\n\r\n        // };\r\n\r\n        // 计算当前移动的方向是x 方向 还是y方向\r\n        // console.log( \" x , y \", this.node.x, this.node.y );\r\n\r\n        // console.log( \" x , y \", targetPos.x, targetPos.y );\r\n\r\n        // var xDir = targetPos.x - this.node.x;\r\n\r\n        // var yDir = targetPos.y - this.node.y;\r\n\r\n        // if ( xDir == 0 ) {\r\n\r\n        //     // 纵向移动\r\n        //     xDir = targetPos.x;\r\n\r\n        //     if ( yDir > 0 ) {\r\n\r\n        //         yDir = targetPos.y - 20;\r\n\r\n        //     } else if ( yDir < 0 ) {\r\n\r\n        //         yDir = targetPos.y + 20;\r\n\r\n        //     }\r\n\r\n        // } else if ( yDir == 0) {\r\n\r\n        //     // 横向移动\r\n        //     yDir = targetPos.y;\r\n\r\n        //     if ( xDir > 0 ) {\r\n\r\n        //         xDir = targetPos.x - 20;\r\n\r\n        //     } else if ( xDir < 0 ) {\r\n\r\n        //         xDir = targetPos.x + 20;\r\n\r\n        //     }\r\n\r\n        // }\r\n\r\n        // var moveCall = cc.moveTo(0.2, cc.p(xDir, yDir));\r\n\r\n        var moveEnd  = cc.moveTo(0.2, cc.p(targetPos.x, targetPos.y))\r\n\r\n        // moveCall, \r\n        //                         cc.callFunc(moveFinishCall, this, this.node),\r\n\r\n        var seq =   cc.sequence(moveEnd,\r\n                                cc.callFunc(moveFinishCall, this, this.node));\r\n\r\n        this.node.runAction(seq);\r\n\r\n    },\r\n\r\n    /**\r\n     * 显示可以操作的对象\r\n     */\r\n    onOptionalObj: function (  ) {\r\n\r\n        if ( this.is_break ) {\r\n\r\n            this.sp_tip_break.node.active = false;\r\n\r\n            this.sp_tip_break.node.opacity = 0;\r\n\r\n            this.sp_self.node.active = true;\r\n\r\n            this.sp_self.node.opacity = 255;\r\n\r\n        } else {\r\n\r\n            this.sp_tip_break.node.active = true;\r\n\r\n            this.sp_tip_break.node.opacity = 255;\r\n\r\n            this.sp_self.node.active = false;\r\n\r\n            this.sp_self.node.opacity = 0;\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 获取当前对象是否变大了\r\n    getAnimalIsBig: function (  ) {\r\n\r\n        return this.is_big;\r\n\r\n    },\r\n\r\n    // 获取当前对象的箱子是否破裂\r\n    getAnimalIsBreak: function (  ) {\r\n\r\n        return this.is_break;\r\n\r\n    },\r\n\r\n    onSetLocalZorder: function ( zorder ) {\r\n\r\n        this.node.setLocalZOrder( zorder );\r\n\r\n    },\r\n\r\n    // 根据index变换资源 1-8\r\n    onLoadAnimal: function ( index ) {\r\n\r\n        // console.log(\" blue **************** \", index);\r\n\r\n        this.animalIndex = index;\r\n\r\n        var animal = this.sp_animal;\r\n\r\n        var animalIcon = this.sp_icon;\r\n\r\n        var urlAnimal = Com.onGetAnimalUrl( index );\r\n\r\n        var urlIcon = Com.onGetAnimalIconUrl( index, true );\r\n\r\n        // console.log(\" url **************** \", urlAnimal);\r\n\r\n        // console.log(\" icon **************** \", urlIcon);\r\n\r\n        cc.loader.loadRes(urlAnimal, cc.SpriteFrame, function (error, spriteFrame) {\r\n\r\n            // cc.log('Error url [' + error + ']');\r\n\r\n            if (!error) {\r\n\r\n                // myNode.getComponent(cc.Sprite)\r\n                animal.getComponent(cc.Sprite).spriteFrame  = spriteFrame;\r\n\r\n            }\r\n\r\n        });\r\n\r\n        cc.loader.loadRes(urlIcon, cc.SpriteFrame, function (error, spriteFrame) {\r\n\r\n            if (!error) {\r\n\r\n                animalIcon.getComponent(cc.Sprite).spriteFrame  = spriteFrame;\r\n\r\n            }\r\n\r\n        });\r\n\r\n    },\r\n\r\n    //  设置行 列坐标\r\n    onSetRowAndCol: function ( row, col ) {\r\n\r\n        this.row = row;\r\n\r\n        this.col = col;\r\n\r\n    },\r\n\r\n    // 获取行 列坐标\r\n    onGetRowAndCol: function (  ) {\r\n\r\n        var obj = {\r\n\r\n            \"row\": this.row,\r\n\r\n            \"col\": this.col,\r\n\r\n        };\r\n\r\n        return obj;\r\n\r\n    },\r\n\r\n    onDestory: function (  ) {\r\n\r\n        this.node.destroy();\r\n\r\n        // this.node_obj.node.active = false;\r\n\r\n        // this.node_obj.node.opacity = 0;\r\n\r\n        // this.playDieAnimation();\r\n\r\n    },\r\n\r\n    // \r\n    onSetSelf: function ( isSelf ) {\r\n\r\n        this.is_self = isSelf;\r\n\r\n    },\r\n\r\n    onGetSelf: function (  ) {\r\n\r\n        return this.is_self;\r\n\r\n    },\r\n\r\n    onGetAnimalIndex: function (  ) {\r\n\r\n        return this.animalIndex;\r\n\r\n    },\r\n\r\n    // 设置回调函数\r\n    onSetTouchCallback: function ( touchcallback ) {\r\n\r\n        this._touchCallback = touchcallback;\r\n\r\n    },\r\n\r\n    // 设置回调函数\r\n    onBreakBombCallback: function ( breakcallback ) {\r\n\r\n        this._breakCallback = breakcallback;\r\n\r\n    },\r\n\r\n    onGetComponentStr: function ( ) {\r\n\r\n        return \"Animal_blue\";\r\n\r\n    },\r\n\r\n    onHideTip: function (  ) {\r\n\r\n        this.sp_tip_break.node.active = false;\r\n\r\n        this.sp_tip_break.node.opacity = 0;\r\n\r\n        this.sp_self.node.active = false;\r\n\r\n        this.sp_self.node.opacity = 0;\r\n\r\n    },\r\n\r\n    onShowSelfTip: function (  ) {\r\n\r\n        this.sp_tip_break.node.active = false;\r\n\r\n        this.sp_tip_break.node.opacity = 0;\r\n\r\n        this.sp_self.node.active = true;\r\n\r\n        this.sp_self.node.opacity = 255;\r\n\r\n    },\r\n\r\n});\r\n\r\n"]}