{"version":3,"sources":["Doushouqi.js"],"names":["Com","require","onfire","requestHandler","config","Tools","events","scenes","HallData","globalData","consts","myUserInfo","otherUserInfo","prefabHelper","texts","cc","Class","extends","Component","properties","sp_head_red","default","type","Sprite","sp_head_blue","node_table","Node","sp_tip","label_tip","Label","sp_alert","label_alert","label_red_btn","label_blue_btn","node_dir","sp_up","Animation","sp_down","sp_left","sp_right","sp_destory","sp_white","sp_red_time","sp_blue_time","label_red_time","label_blue_time","nodeResult","btn_help","Button","node_help","newPlayerNode","sp_hand","myName","otherName","animal_blue_Prefab","Prefab","animal_red_Prefab","animal_Prefab","empty_prefab","result_prefab","defalutTiem","count","ndMyGenderMale","ndMyGenderFemale","ndOtherGenderMale","ndOtherGenderFemale","onLoad","onLoadAudio","deleteItem","isNetwork","init","initUI","onOptionalTimeAni","listenerList","game","GAME_DATA","onReceive_login","doushouqi","S2C_START","onReceive_start","S2C_MOVE","onReceive_move","S2C_TALK","onReceive_talk","S2C_ANIMAL","onReceive_animal","S2C_GAMEOVER","onReceive_overGame","S2C_ASK_FOR_DRAW","onReceive_qiuHeOther","S2C_ASK_FOR_DRAW_AGREE","onReceive_qiuHeAgreeOther","forEach","on","element","addButtonListener","onDestroy","un","start","data1","data2","console","log","allData","gameData","string","name","_selfUID","uid","_otherUID","_doItUID","s_douShouQi_doIt","doIt","icon","loadRemoteImage","active","sex","gender","FEMALE","MALE","success","openUpdate","onShowValidOptionalObj","row","r","col","c","myCode","doItID","_isFirst","firstCode","animalIndex","baseData","firstUID","firstAnimal","setItem","node","stopAllActions","getItem","animalCode","tableNodes","animal","getComponent","COMPONENT_ANIMAL","playAnimation","onAnimaltionBreakCallback","bind","onReceive_MyCode","data","_myCode","index0","index1","moveR","moveC","doItObj","targetPos","x","allPos","y","selectedPos","moveData","selectedRow","selectedCol","winAnimalIdx","setLocalZOrder","onMoveToTarget","onMoveCallbackDel","onCheckOptionSelf","onRecive_doIt","JSON","stringify","closeUpdate","resultData","topPortrait","leftPortrait","rightPortrait","leftName","rightName","leftGender","rightGender","result","appId","youWin","getCurGameInfo","createResultScreen","_alertStr","ASK_FOR_DRAW","onAddAlert","onAddTip","ASK_FOR_DRAW_DENIED","onSendGameData","packgeName","sendRequest","scale","opacity","scaleY","onHideTipDir","_blueAnimal","_redAnimal","_rand01","_blueSelf","_pinkSelf","_isShowTip","_isShowAlert","_isCanOptional","_selectedPoint","_rand0Count","_rand1Count","_firstAnimalIndex","_helpNode","_isNewPlayer","_selectedObj","_compareState","eq","gt","lt","same","width","winSize","height","Vec2","allBtnEmpty","pos","emptyNode","index","jndex","getChildByName","toString","position","onInitTable","$this","EventType","TOUCH_START","event","TOUCH_END","TOUCH_CANCEL","onTouchListener","customEventData","BACK","EXIT","EXIT_CONFIRM","C2S_ASK_FOR_DRAW","SURRENDER","SURRENDER_CONFIRM","BUTTON_REFUSE","iDo","C2S_ASK_FOR_DRAW_AGREE","onHideAlert","BUTTON_AGREE","C2S_SURRENDER","token","C2S_EXIT_GAME","director","loadScene","hall","HALL","fire","HALL_DATA","rawData","onLoadHeadImg","onDelRepeatRandBlue","onDelRepeatRandPink","btnEmpty","_componentStr","_gameDataContent","length","instantiate","addComponent","parent","onSetRowAndCol","onSetTouchCallback","onEmptyTouchCallback","onCreateAnimal","onNewPlayerGuid","animalStatus","isDie","_animal","onLoadAnimal","onBreakBombCallback","onBombTouchCallback","onTouchCallback","onRandAnimal","rand01","onRandomNum","idx","randNum","push","splice","objCode","isSelected","onIsSelfdoit","WAITING_FOR_OPPONENT","onRunBig","onCheckRoundMove","onRunSmall","onCheckOptionalValid","CANNOT_CONTROL_OPPONENT","onClearAlgorithm","C2S_MOVE","componentStr","C2S_ANIMAL","selected0","selected1","moveState","onPlayGameEffect","onMoveCallback","onPlayDestoryAni","onDestory","onGetAnimalIndex","targetDie","onSetOptionalTime","onResetStatus","onRedBoardAni","onBlueBoardAni","isClear","onCheckCompare","targetObj","selectedIndex","targetIndex","compareState","onCheckAnimalSame","isSame","targetComStr","selectedStr","tempNode","comStr","currCode","onGetAnimalCode","getAnimalIsBreak","onShowSelfTip","onHideTip","onOptionalObj","getAnimalIsBig","onClearTabel","onRestart","interval","repeat","delay","schedule","onTimeDownCallback","unschedule","onCanOptionalObj","obj","moveDir","up","down","left","right","isShowDir","onFindAnimalOfIndex","onTipMoveDirection","onRepeatAction","ANI_UP","ANI_DOWN","ANI_LEFT","ANI_RIGHT","nodeObj","dirStr","animState","play","wrapMode","WrapMode","Loop","repeatCount","Infinity","onStopRepeatAction","stop","onDestoryAnimation","ANI_DESTROY","self","onFinished","optionalObj","onFinishCallback","scale2","scaleTo","runAction","delayTime","seq","sequence","callFunc","scale1","onWhiteBoardAni","OBJ_RED","onActiconHand","repeatForever","moveTo","tipStr","onShowtip","onActionFinishCall","onHidetip","descStr","labelRedBtn","REFUSE","labelBlueBtn","AGREE","onShowAlert"],"mappings":"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","file":"Doushouqi.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\resources\\Script\\view\\games\\doushouqi","sourcesContent":["/**\r\n * @brief: 斗兽棋主场景(单机-网络版调试)（如果没有网络的情况下，可以完单机的）\r\n * @time:  2018-05-8\r\n * @author: JiangTao kungfupandajt@163.com\r\n */\r\n\r\nvar Com = require('Com');\r\nvar onfire = require(\"onfire\"); //处理事件的类库\r\nvar requestHandler = require(\"RequestHandler\");\r\nvar config = require(\"config\");\r\nvar Tools = require(\"Tools\");\r\nvar events = require(\"CustomEvents\");\r\nvar scenes = require(\"SceneList\");\r\nvar HallData = require(\"HallData\");\r\nvar globalData = require(\"Global\");\r\nvar consts = require(\"Constants\");\r\nvar myUserInfo = null;\r\nvar otherUserInfo = null;\r\nvar prefabHelper = require(\"PrefabHelper\");\r\nvar texts = require(\"Text\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        sp_head_red: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        sp_head_blue: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        node_table: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        sp_tip: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        label_tip: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        sp_alert: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        label_alert: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        // 红色按钮文字\r\n        label_red_btn: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        // 蓝色按钮文字\r\n        label_blue_btn: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        node_dir: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        sp_up: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_down: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_left: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_right: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_destory: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        // 白板\r\n        sp_white: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n\r\n        // 红色方时间面板\r\n        sp_red_time: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n\r\n        // 蓝色方时间面板\r\n        sp_blue_time: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n\r\n        // 红方时间\r\n        label_red_time: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n\r\n        // 蓝方时间\r\n        label_blue_time: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n\r\n        nodeResult: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        btn_help: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n\r\n        node_help: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        newPlayerNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        sp_hand: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n\r\n        myName: cc.Label,\r\n\r\n        otherName: cc.Label,\r\n\r\n        animal_blue_Prefab: cc.Prefab, // 蓝方预制资源\r\n\r\n        animal_red_Prefab: cc.Prefab, // 红方预制资源\r\n\r\n        animal_Prefab: cc.Prefab, // 默认动物预制资源\r\n\r\n        empty_prefab: cc.Prefab, // 空的预制资源\r\n\r\n        result_prefab: cc.Prefab, // 结果预知资源\r\n\r\n        defalutTiem: 30, //  默认操作时间\r\n\r\n        count: 30, //  倒计时计次\r\n\r\n        ndMyGenderMale: cc.Node,\r\n        ndMyGenderFemale: cc.Node,\r\n        ndOtherGenderMale: cc.Node,\r\n        ndOtherGenderFemale: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n\r\n        // 加载斗兽棋音效\r\n        Com.onLoadAudio();\r\n\r\n        Com.deleteItem();\r\n\r\n        // this.onActiconHand();\r\n\r\n        // 单机模式\r\n        if (!config.isNetwork) {\r\n\r\n            this.init();\r\n\r\n            this.initUI();\r\n\r\n            this.onOptionalTimeAni();\r\n\r\n        } else {\r\n\r\n            // 网络监听列表\r\n            var listenerList = [\r\n                [events.game.GAME_DATA, this.onReceive_login, this],\r\n                [events.game.doushouqi.S2C_START, this.onReceive_start, this],\r\n                [events.game.doushouqi.S2C_MOVE, this.onReceive_move, this],\r\n                [events.game.doushouqi.S2C_TALK, this.onReceive_talk, this],\r\n                [events.game.doushouqi.S2C_ANIMAL, this.onReceive_animal, this],\r\n                [events.game.doushouqi.S2C_GAMEOVER, this.onReceive_overGame, this],\r\n                [events.game.doushouqi.S2C_ASK_FOR_DRAW, this.onReceive_qiuHeOther, this],\r\n                [events.game.doushouqi.S2C_ASK_FOR_DRAW_AGREE, this.onReceive_qiuHeAgreeOther, this],\r\n            ];\r\n\r\n            listenerList.forEach(element => {\r\n\r\n                onfire.on(element[0], element[1], element[2]);\r\n\r\n            });\r\n        }\r\n\r\n        this.addButtonListener();\r\n\r\n    },\r\n\r\n    // 销毁时调用\r\n    onDestroy() {\r\n\r\n        var listenerList = [\r\n            [events.game.GAME_DATA, this.onReceive_login, this],\r\n            [events.game.doushouqi.S2C_START, this.onReceive_start, this],\r\n            [events.game.doushouqi.S2C_MOVE, this.onReceive_move, this],\r\n            [events.game.doushouqi.S2C_TALK, this.onReceive_talk, this],\r\n            [events.game.doushouqi.S2C_ANIMAL, this.onReceive_animal, this],\r\n            [events.game.doushouqi.S2C_GAMEOVER, this.onReceive_overGame, this],\r\n            [events.game.doushouqi.S2C_ASK_FOR_DRAW, this.onReceive_qiuHeOther, this],\r\n            [events.game.doushouqi.S2C_ASK_FOR_DRAW_AGREE, this.onReceive_qiuHeAgreeOther, this],\r\n        ];\r\n\r\n        // 移除监听\r\n        listenerList.forEach(element => {\r\n\r\n            onfire.un(element[0]);\r\n\r\n        });\r\n    },\r\n\r\n    start() {\r\n\r\n\r\n\r\n    },\r\n\r\n    // ******************    数据通讯   ******************\r\n\r\n    // 进入游戏\r\n    onReceive_login(data1, data2) {\r\n\r\n        console.log(\" onReceive_login ++++++++++++++++++++++++ Doushouqi \");\r\n\r\n        this.allData = data1;\r\n\r\n        this.gameData = data1[\"gameData\"];\r\n\r\n        // 初始化用户数据\r\n        myUserInfo = data1.myUserInfo;\r\n        otherUserInfo = data1.otherUserInfo;\r\n        this.myName.string = data1.myUserInfo.name;\r\n        this.otherName.string = data1.otherUserInfo.name;\r\n        this._selfUID = data1.myUserInfo.uid;\r\n        this._otherUID = data1.otherUserInfo.uid;\r\n        this._doItUID = data1.s_douShouQi_doIt.doIt;\r\n        console.log(\"my icon url ===== \", data1.myUserInfo.icon);\r\n        console.log(\"other icon url ===== \", data1.otherUserInfo.icon);\r\n        Tools.loadRemoteImage(data1.myUserInfo.icon, this.sp_head_red);\r\n        Tools.loadRemoteImage(data1.otherUserInfo.icon, this.sp_head_blue);\r\n        this.ndMyGenderFemale.active = (myUserInfo.sex == consts.gender.FEMALE);\r\n        this.ndMyGenderMale.active = (myUserInfo.sex == consts.gender.MALE);\r\n        this.ndOtherGenderFemale.active = (otherUserInfo.sex == consts.gender.FEMALE);\r\n        this.ndOtherGenderMale.active = (otherUserInfo.sex == consts.gender.MALE);\r\n\r\n        // 初始化 斗兽棋棋盘\r\n        this.init();\r\n        this.initUI();\r\n    },\r\n\r\n    // 游戏开始\r\n    onReceive_start(data1, data2) {\r\n\r\n        console.log(\"***************c_doushouqi_play***************\", data1[\"success\"])\r\n\r\n        if (data1.success == 0) {\r\n\r\n            this.openUpdate();\r\n\r\n            this.onOptionalTimeAni();\r\n\r\n            // 找出当前可以操作的动物\r\n            this.onShowValidOptionalObj();\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 点击箱子后请求到的动物\r\n    onReceive_animal(data1, data2) {\r\n\r\n        if (data1.success == 0) {\r\n\r\n            var row = data1.r;\r\n\r\n            var col = data1.c;\r\n\r\n            var myCode = -1;\r\n\r\n            // 切换操作对象\r\n            var doItID = data1.s_douShouQi_doIt.doIt;\r\n\r\n            // console.log( \" all UID ==== \", this._doItUID, this._selfUID, this._otherUID );\r\n\r\n            // console.log( \" this._isFirst ==== \", this._isFirst, doItID );\r\n\r\n            if (this._isFirst) {\r\n\r\n                this._isFirst = false;\r\n\r\n                var firstCode = 0;\r\n\r\n                if (data1.animalIndex < 10) {\r\n\r\n                    // 红色 都属于第一个操作用户的\r\n                    firstCode = 1;\r\n\r\n                } else {\r\n\r\n                    // 蓝色 都属于第一个操作用户的\r\n                    firstCode = 2;\r\n\r\n                }\r\n\r\n                var baseData = {\r\n\r\n                    firstUID: this._doItUID,\r\n\r\n                    firstAnimal: firstCode,\r\n\r\n                };\r\n\r\n                Com.setItem(baseData);\r\n\r\n                // 确定自己动物的颜色\r\n                if (this._doItUID == this._selfUID) {\r\n\r\n                    myCode = this._selfUID;\r\n\r\n                } else {\r\n\r\n                    myCode = this._otherUID;\r\n\r\n                }\r\n\r\n                this.sp_hand.node.stopAllActions();\r\n\r\n            } else {\r\n\r\n                var firstAnimal = Com.getItem().firstAnimal;\r\n\r\n                var firstUID = Com.getItem().firstUID;\r\n\r\n                var animalCode = 0;\r\n\r\n                if (firstUID == this._selfUID) {\r\n\r\n                    if (firstAnimal == 1) {\r\n\r\n                        // 所有红色动物mycode都标记为this._selfUID\r\n                        if (data1.animalIndex < 10) {\r\n\r\n                            myCode = this._selfUID;\r\n\r\n                        } else {\r\n\r\n                            myCode = this._otherUID;\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        // 所有蓝色动物mycode都标记为this._selfUID\r\n                        if (data1.animalIndex > 10) {\r\n\r\n                            myCode = this._selfUID;\r\n\r\n                        } else {\r\n\r\n                            myCode = this._otherUID;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    if (firstAnimal == 1) {\r\n\r\n                        // 所有红色动物mycode都标记为this._otherUID\r\n                        if (data1.animalIndex < 10) {\r\n\r\n                            myCode = this._otherUID;\r\n\r\n                        } else {\r\n\r\n                            myCode = this._selfUID;\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        // 所有蓝色动物mycode都标记为this._otherUID\r\n\r\n                        if (data1.animalIndex > 10) {\r\n\r\n                            myCode = this._otherUID;\r\n\r\n                        } else {\r\n\r\n                            myCode = this._selfUID;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this._doItUID = doItID;\r\n\r\n            this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).playAnimation(this.onAnimaltionBreakCallback.bind(this), data1.animalIndex, myCode);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    onReceive_MyCode(data) {\r\n\r\n        console.log(\" onReceive_MyCode ==== \", data[\"myCode\"]);\r\n\r\n        this._myCode = data.myCode;\r\n\r\n    },\r\n\r\n    // 移动动物\r\n    onReceive_move(data1, data2) {\r\n\r\n        // console.log( \"  onReceive_move ++++++++++++++++++++++++++++ \" );\r\n\r\n        if (data1.success != 0) {\r\n\r\n            console.log(\"  success move errcode \", data1.success);\r\n            return;\r\n        }\r\n\r\n        var index0 = data1.r;\r\n\r\n        var index1 = data1.c;\r\n\r\n        var row = data1.moveR;\r\n\r\n        var col = data1.moveC;\r\n\r\n        var myCode = -1;\r\n\r\n        var doItObj = data1.s_douShouQi_doIt;\r\n\r\n        if (doItObj != null) {\r\n\r\n            var doItID = data1.s_douShouQi_doIt.doIt;\r\n\r\n            this._doItUID = doItID;\r\n\r\n        }\r\n\r\n        var targetPos = {\r\n            x: this.allPos[row][col].x,\r\n            y: this.allPos[row][col].y\r\n        };\r\n\r\n        var selectedPos = {\r\n            x: this.allPos[index0][index1].x,\r\n            y: this.allPos[index0][index1].y\r\n        };\r\n\r\n        var moveData = {\r\n            targetPos: targetPos,\r\n            selectedRow: index0,\r\n            selectedCol: index1,\r\n            row: row,\r\n            col: col,\r\n            winAnimalIdx: data1.animalIndex\r\n        };\r\n\r\n        this.tableNodes[index0][index1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).node.setLocalZOrder(99);\r\n\r\n        this.tableNodes[index0][index1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onMoveToTarget(moveData, this.onMoveCallbackDel.bind(this));\r\n\r\n        this.onCheckOptionSelf();\r\n\r\n    },\r\n\r\n    // 操作方 暂时不用\r\n    onRecive_doIt(data1, data2) {\r\n\r\n\r\n    },\r\n\r\n    // 游戏结束\r\n    onReceive_overGame(data1, data2) {\r\n        // this.closeUpdate();\r\n        console.log(\"onReceive_overGame s \", JSON.stringify(data1));\r\n        // this.onResultCall = function(result) {\r\n        //     console.log(\" onResultCall  === \");\r\n        // 清除本地缓存的数据：记录的自己的动物的颜色以及UID\r\n        Com.deleteItem();\r\n        this.closeUpdate();\r\n        //this.onAddResultLayer(data1[\"youWin\"]);\r\n\r\n        var resultData = {};\r\n        if (!config.isNetwork) {\r\n            resultData.topPortrait = \"http://zyhdheads.oss-cn-beijing.aliyuncs.com/default1.png\";\r\n            resultData.leftPortrait = \"http://zyhdheads.oss-cn-beijing.aliyuncs.com/default1.png\";\r\n            resultData.rightPortrait = \"http://zyhdheads.oss-cn-beijing.aliyuncs.com/default1.png\";\r\n            resultData.leftName = \"左边的玩家\";\r\n            resultData.rightName = \"右边的玩家\";\r\n            resultData.leftGender = 1; // 左边性别 0:男 1:女\r\n            resultData.rightGender = 0; // 右边性别 0:男 1:女\r\n            resultData.result = 1; // 结果 1:胜利 0:平局 -1:失败\r\n            resultData.appId = 2; // 游戏id\r\n        } else {\r\n            resultData.topPortrait = myUserInfo.icon;\r\n            resultData.leftPortrait = myUserInfo.icon;\r\n            resultData.rightPortrait = otherUserInfo.icon;\r\n            resultData.leftName = myUserInfo.name;\r\n            resultData.rightName = otherUserInfo.name;\r\n            resultData.leftGender = myUserInfo.sex;\r\n            resultData.rightGender = otherUserInfo.sex;\r\n            resultData.result = data1.youWin;\r\n            resultData.appId = HallData.getCurGameInfo().appId;\r\n        }\r\n        prefabHelper.createResultScreen(this.nodeResult, resultData);\r\n        // };\r\n        // this.scheduleOnce(this.onResultCall(result), 0.5);\r\n        // 切换场景\r\n        // cc.director.loadScene(\"hall\",function(){\r\n        //     onfire.fire(\"hall_gameOver\",data1, data2);\r\n        // });\r\n    },\r\n\r\n    // 求和询问提示\r\n    onReceive_qiuHeOther() {\r\n\r\n        this._alertStr = consts.game.doushouqi.ASK_FOR_DRAW;\r\n\r\n        this.onAddAlert(texts.game.doushouqi.ASK_FOR_DRAW);\r\n\r\n    },\r\n\r\n    onReceive_qiuHeAgreeOther() {\r\n\r\n        this.onAddTip(texts.game.doushouqi.ASK_FOR_DRAW_DENIED);\r\n\r\n    },\r\n\r\n    // 发送数据\r\n    /**\r\n     * @brief: 发送数据到服务器\r\n     * @data: 发送的数据\r\n     * @packgeName: 发送的数据的包明\r\n     */\r\n    onSendGameData: function(packgeName, data) {\r\n\r\n        requestHandler.sendRequest(packgeName, data);\r\n\r\n    },\r\n\r\n    onReceive_talk: function(data1, data2) {\r\n\r\n        if (data1.success == 0) {\r\n\r\n\r\n\r\n        }\r\n\r\n    },\r\n\r\n\r\n    // ******************    数据通讯   ******************\r\n\r\n    // update (dt) {},\r\n\r\n    initUI: function() {\r\n\r\n        this.sp_tip.node.active = true;\r\n\r\n        this.sp_tip.node.scale = 0;\r\n\r\n        this.sp_alert.node.active = true;\r\n\r\n        this.sp_alert.node.scale = 0;\r\n\r\n        this.sp_destory.node.active = false;\r\n\r\n        this.sp_destory.node.opacity = 0;\r\n\r\n        this.sp_white.node.active = true;\r\n\r\n        this.sp_white.node.opacity = 255;\r\n\r\n        this.sp_red_time.node.active = true\r\n\r\n        this.sp_red_time.node.opacity = 255;\r\n\r\n        this.sp_red_time.node.scaleY = 0;\r\n\r\n        this.sp_blue_time.node.active = true\r\n\r\n        this.sp_blue_time.node.opacity = 255;\r\n\r\n        this.sp_blue_time.node.scaleY = 0;\r\n\r\n        this.onHideTipDir();\r\n\r\n        this.node_dir.setLocalZOrder(100);\r\n\r\n        this.sp_destory.node.setLocalZOrder(100);\r\n\r\n    },\r\n\r\n    // init 初始化\r\n    init: function() {\r\n\r\n        this._blueAnimal = [];\r\n\r\n        this._redAnimal = [];\r\n\r\n        this._rand01 = -1;\r\n\r\n        this._blueSelf = true;\r\n\r\n        this._pinkSelf = false;\r\n\r\n        this._isShowTip = false;\r\n\r\n        this._isShowAlert = false;\r\n\r\n        this._isCanOptional = false; //当前是否可以进行操作\r\n\r\n        this._selectedPoint = [-1, -1]; //记录被选中的动物\r\n\r\n        this._alertStr = \"\"; //标记当前是求和还是认输按钮 默认是空\r\n\r\n        this._rand0Count = 0;\r\n\r\n        this._rand1Count = 0;\r\n\r\n        this._isFirst = true;\r\n\r\n        this._firstAnimalIndex = -1;\r\n\r\n        this._helpNode = null;\r\n\r\n        this._isNewPlayer = false;\r\n\r\n        // row:行\r\n        this._selectedObj = {\r\n            row: -1,\r\n            col: -1,\r\n            count: 0\r\n        }; //\r\n\r\n        // eq:相等 gt:(greater than) 大于 lt:(less than) 小与\r\n        this._compareState = {\r\n            eq: 0,\r\n            gt: 1,\r\n            lt: 2,\r\n            same: 3\r\n        };\r\n\r\n        this.width = cc.winSize.width;\r\n\r\n        this.height = cc.winSize.height;\r\n\r\n        // 所有点集合\r\n        this.allPos = [\r\n            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\r\n            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\r\n            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\r\n            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\r\n        ];\r\n\r\n        this.allBtnEmpty = [\r\n\r\n            [cc.Button, cc.Button, cc.Button, cc.Button],\r\n            [cc.Button, cc.Button, cc.Button, cc.Button],\r\n            [cc.Button, cc.Button, cc.Button, cc.Button],\r\n            [cc.Button, cc.Button, cc.Button, cc.Button],\r\n\r\n        ];\r\n\r\n        var pos = null;\r\n\r\n        var emptyNode = null;\r\n\r\n        for (let index = 0; index < 4; index++) {\r\n\r\n            for (let jndex = 0; jndex < 4; jndex++) {\r\n\r\n                emptyNode = this.node_table.getChildByName(\"node_pos_\" + index.toString() + jndex.toString())\r\n\r\n                pos = emptyNode.position;\r\n\r\n                this.allPos[index][jndex] = pos;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // 所有动物集合\r\n\r\n        this.tableNodes = [\r\n            [{}, {}, {}, {}],\r\n            [{}, {}, {}, {}],\r\n            [{}, {}, {}, {}],\r\n            [{}, {}, {}, {}],\r\n        ];\r\n\r\n        this.onInitTable();\r\n\r\n    },\r\n\r\n    addButtonListener: function() {\r\n\r\n        var $this = this;\r\n\r\n        this.btn_help.node.on(cc.Node.EventType.TOUCH_START, function(event) {\r\n\r\n            console.log(\"TOUCH_START\")\r\n\r\n            $this.node_help.active = true;\r\n\r\n            $this.node_help.opacity = 255;\r\n\r\n        });\r\n\r\n        this.btn_help.node.on(cc.Node.EventType.TOUCH_END, function(event) {\r\n\r\n            $this.node_help.active = false;\r\n\r\n            $this.node_help.opacity = 0;\r\n\r\n        });\r\n\r\n        this.btn_help.node.on(cc.Node.EventType.TOUCH_CANCEL, function(event) {\r\n\r\n            $this.node_help.active = false;\r\n\r\n            $this.node_help.opacity = 0;\r\n\r\n        });\r\n\r\n    },\r\n\r\n    // 按钮事件监听\r\n    onTouchListener: function(event, customEventData) {\r\n\r\n        console.log(\" customEventData \", customEventData);\r\n\r\n        if (customEventData == consts.game.doushouqi.BACK) {\r\n            this._alertStr = consts.game.doushouqi.EXIT;\r\n            this.onAddAlert(texts.game.doushouqi.EXIT_CONFIRM);\r\n        } else if (customEventData == consts.game.doushouqi.ASK_FOR_DRAW) {\r\n\r\n            this._alertStr = consts.game.doushouqi.ASK_FOR_DRAW;\r\n\r\n            var data = {};\r\n\r\n            this.onSendGameData(events.game.doushouqi.C2S_ASK_FOR_DRAW, data);\r\n\r\n        } else if (customEventData == consts.game.doushouqi.SURRENDER) {\r\n\r\n            this._alertStr = consts.game.doushouqi.SURRENDER;\r\n\r\n            this.onAddAlert(texts.game.doushouqi.SURRENDER_CONFIRM);\r\n\r\n        } else if (customEventData == consts.game.doushouqi.BUTTON_REFUSE) {\r\n\r\n            if (this._alertStr == consts.game.doushouqi.ASK_FOR_DRAW) {\r\n\r\n                var data = {\r\n                    iDo: 1\r\n                };\r\n\r\n                this.onSendGameData(events.game.doushouqi.C2S_ASK_FOR_DRAW_AGREE, data);\r\n\r\n            } else if (this._alertStr == consts.game.doushouqi.SURRENDER) {\r\n\r\n\r\n\r\n            }\r\n\r\n            // 拒绝按钮\r\n            this.onHideAlert();\r\n\r\n        } else if (customEventData == consts.game.doushouqi.BUTTON_AGREE) {\r\n\r\n            if (this._alertStr == consts.game.doushouqi.ASK_FOR_DRAW) {\r\n\r\n                var data = {\r\n                    iDo: 0\r\n                };\r\n\r\n                this.onSendGameData(events.game.doushouqi.C2S_ASK_FOR_DRAW_AGREE, data);\r\n\r\n            } else if (this._alertStr == consts.game.doushouqi.SURRENDER) {\r\n\r\n                var data = {};\r\n\r\n                this.onSendGameData(events.game.doushouqi.C2S_SURRENDER, data);\r\n\r\n            } else if (this._alertStr == consts.game.doushouqi.EXIT) {\r\n                var data = {\r\n                    appId: HallData.getCurGameInfo().appId,\r\n                    token: globalData.myUserInfo.token,\r\n                };\r\n                requestHandler.sendRequest(events.game.C2S_EXIT_GAME, data);\r\n                cc.director.loadScene(scenes.hall.HALL, function() {\r\n                    onfire.fire(events.hall.HALL_DATA, HallData.rawData);\r\n                });\r\n            }\r\n\r\n            // 确认按钮\r\n            this.onHideAlert();\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 玩家头像加载\r\n    onLoadHeadImg: function() {\r\n\r\n\r\n\r\n    },\r\n\r\n    // 初始化玩家棋盘\r\n    onInitTable: function() {\r\n        // 随机生成动物\r\n        /**\r\n         *  首先：当前格子生成那个颜色的动物 0 蓝色动物 1 粉色动物\r\n         *  其次：根据颜色，随机生成相应的动物。【1-8】 分别代表不同的动物，去重随机，如果发现\r\n         *      随机到相同的数字，则删除，重新随机\r\n         *  在每次随机的时候都要判断0或1（也就是蓝色动物或粉色动物）是否已经随机了8中动物，如果随机够了，则不在\r\n         *  进行随机；此时只随机另一种颜色的动物。 如果两种动物都随机够了，则停止。\r\n         */\r\n        this.onDelRepeatRandBlue();\r\n\r\n        this.onDelRepeatRandPink();\r\n\r\n        var btnEmpty = null;\r\n\r\n        var _componentStr = '';\r\n\r\n        var _gameDataContent = 0;\r\n\r\n        for (let index = 0; index < this.gameData.length; index++) {\r\n\r\n            for (let jndex = 0; jndex < this.gameData[index].length; jndex++) {\r\n\r\n                _gameDataContent = this.gameData[index][jndex];\r\n\r\n                btnEmpty = cc.instantiate(this.empty_prefab);\r\n\r\n                btnEmpty.addComponent('BtnEmpty');\r\n\r\n                btnEmpty.x = this.allPos[index][jndex].x;\r\n\r\n                btnEmpty.y = this.allPos[index][jndex].y;\r\n\r\n                btnEmpty.setLocalZOrder(0);\r\n\r\n                btnEmpty.parent = this.node_table;\r\n\r\n                this.allBtnEmpty[index][jndex] = btnEmpty;\r\n\r\n                btnEmpty.getComponent('BtnEmpty').onSetRowAndCol(index, jndex);\r\n\r\n                btnEmpty.getComponent('BtnEmpty').onSetTouchCallback(this.onEmptyTouchCallback.bind(this));\r\n\r\n                // 初始化小动物\r\n                this.onCreateAnimal(index, jndex, _gameDataContent);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.onNewPlayerGuid();\r\n\r\n    },\r\n\r\n    onCreateAnimal: function(index, jndex, animalStatus) {\r\n\r\n        if (animalStatus == -1) {\r\n\r\n            this.tableNodes[index][jndex] = {\r\n                isDie: true,\r\n                animal: null\r\n            };\r\n            return;\r\n\r\n        }\r\n\r\n        var _animal = cc.instantiate(this.animal_Prefab);\r\n\r\n        _animal.addComponent('Animal');\r\n\r\n        _animal.getComponent('Animal').init();\r\n\r\n        _animal.x = this.allPos[index][jndex].x;\r\n\r\n        _animal.y = this.allPos[index][jndex].y;\r\n\r\n        _animal.active = true;\r\n\r\n        _animal.opacity = 255;\r\n\r\n        _animal.setLocalZOrder(10);\r\n\r\n        _animal.parent = this.node_table;\r\n\r\n        console.log(\" 创建动物： \", animalStatus);\r\n\r\n        if (animalStatus == 0) {\r\n\r\n            // 箱子 不需要任何操作\r\n\r\n        } else {\r\n\r\n            _animal.getComponent('Animal').onLoadAnimal(animalStatus);\r\n\r\n            // onSetAnimalCode\r\n            // var stoargeUID = Com.getItem().firstUID;\r\n\r\n            // if ( stoargeUID == this._selfUID ) {\r\n\r\n            //     _animal.getComponent('Animal').onSetAnimalCode( Com.getItem().myAnimal );\r\n\r\n            // } else {\r\n\r\n            //     _animal.getComponent('Animal').onSetAnimalCode( Com.getItem().otherAnimal );\r\n\r\n            // }\r\n\r\n        }\r\n\r\n        this.tableNodes[index][jndex] = {\r\n            isDie: false,\r\n            animal: _animal\r\n        };\r\n\r\n        _animal.getComponent('Animal').onSetRowAndCol(index, jndex);\r\n\r\n        _animal.getComponent('Animal').onBreakBombCallback(this.onBombTouchCallback.bind(this));\r\n\r\n        _animal.getComponent('Animal').onSetTouchCallback(this.onTouchCallback.bind(this));\r\n\r\n    },\r\n\r\n    onRandAnimal: function() {\r\n\r\n        var rand01 = Com.onRandomNum(0, 2);\r\n\r\n        if (this._rand0Count == 8) {\r\n\r\n            rand01 = 1;\r\n\r\n        } else if (this._rand1Count == 8) {\r\n\r\n            rand01 = 0;\r\n\r\n        }\r\n\r\n        if (rand01 == 0) {\r\n\r\n            this._rand0Count += 1;\r\n\r\n            return this._blueAnimal[this._rand0Count - 1];\r\n\r\n        } else {\r\n\r\n            this._rand1Count += 1;\r\n\r\n            return this._redAnimal[this._rand1Count - 1];\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 去重随机 蓝色动物\r\n    /**\r\n     * for(i=0;i<10;i++)                    //产生10个随机数\r\n        {\r\n            A[i]=1+rand()%10;                //得到随机数(范围在1-10之间)\r\n                for(j=0;j<i;j++)                 //判断和前面的数是否重复\r\n                    if(A[i]==A[j]) {\r\n                        i--;\r\n                        break;\r\n                    }  //如果重复,重新产生随机数\r\n        }\r\n     */\r\n    onDelRepeatRandBlue: function() {\r\n\r\n        var idx = 0;\r\n\r\n        for (; idx < 8; idx++) {\r\n\r\n            var randNum = Com.onRandomNum(1, 9);\r\n\r\n            this._blueAnimal.push(randNum);\r\n\r\n            for (let jndex = 0; jndex < idx; jndex++) {\r\n\r\n                if (randNum == this._blueAnimal[jndex]) {\r\n\r\n                    this._blueAnimal.splice(idx, 1);\r\n\r\n                    idx--;\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n    },\r\n\r\n    // 去重随机 粉色动物\r\n    onDelRepeatRandPink: function() {\r\n\r\n        var idx = 0;\r\n\r\n        for (; idx < 8; idx++) {\r\n\r\n            var randNum = Com.onRandomNum(11, 19);\r\n\r\n            this._redAnimal.push(randNum);\r\n\r\n            for (let jndex = 0; jndex < idx; jndex++) {\r\n\r\n                if (randNum == this._redAnimal[jndex]) {\r\n\r\n                    this._redAnimal.splice(idx, 1);\r\n\r\n                    idx--;\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 点击棋子回调；一次只能点击一个自己的棋子；如果点击自己的第二枚棋子，则取消前一个选中的棋子；\r\n    // 如果点击自己的棋子后，在点击对方的棋子则进行对比大小，然后进行消除的逻辑\r\n    // 如果点击的是初始的方块，则是翻棋子，然后轮到对方操作\r\n\r\n    // 首先判断当前是否为蓝方操作，如果是，在没有选中蓝方的情况下，是不可以点击粉色动物的；在选中蓝方情况下，\r\n    // 点击任意一种颜色动物，都要进行判断（是否相邻，如果相邻，可以进行比较吃或被吃，如果不相邻，取消被选中状态）\r\n\r\n\r\n    //切换动物操作时候有问题\r\n    /**\r\n     *  有哪些操作需要切换用户操作\r\n     *  1.默认是蓝色方操作（不管是蓝方操作还是粉方操作），在点击翻开棋子动作后切换用户\r\n     *  2.点击棋子移动（或者吃掉另一方的棋子），切换用户\r\n     */\r\n    onTouchCallback: function(row, col, objCode, isSelected) {\r\n\r\n        // console.log( \"onTouchCall&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\", this._isCanOptional );\r\n\r\n        if (!this.onIsSelfdoit()) {\r\n\r\n            this.onAddTip(texts.game.doushouqi.WAITING_FOR_OPPONENT);\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        // 当前蓝色方是否被选中 选中（可以随便点任何一个地方，如果点击的地方不与它相邻，则恢复到正常状态，如果点击的\r\n        // 的是扣着的对象，则直接翻开，显示小动物并且恢复到正常状态）\r\n\r\n        // 首先操作对象要一致 然后判断当前是否被选中 在判断：如果选中了同颜色的 && this._selfUID == objCode\r\n        if (this._doItUID == objCode && isSelected) {\r\n\r\n            if (this._selectedObj.count == 0) {\r\n\r\n                this._selectedObj.count = 1;\r\n\r\n                this._selectedObj.row = row;\r\n\r\n                this._selectedObj.col = col;\r\n\r\n                this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunBig();\r\n\r\n                this.onCheckRoundMove(row, col, this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL));\r\n\r\n                console.log(\"this._selectedObj.count == 0\");\r\n\r\n            } else if (this._selectedObj.count >= 1) {\r\n\r\n                console.log(\"this._selectedObj.count >= 1\");\r\n\r\n                this.tableNodes[this._selectedObj.row][this._selectedObj.col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunSmall();\r\n\r\n                this.onHideTipDir();\r\n\r\n                this._selectedObj.count = 0;\r\n\r\n                this._selectedObj.row = -1;\r\n\r\n                this._selectedObj.col = -1;\r\n\r\n            }\r\n\r\n        } else if (this.onIsSelfdoit() && !isSelected) {\r\n\r\n            this._selectedObj.count = 0;\r\n\r\n            this._selectedObj.row = -1;\r\n\r\n            this._selectedObj.col = -1;\r\n\r\n            this.onHideTipDir();\r\n\r\n        } else {\r\n            //如果没有被选中的棋子，就点击了其它颜色的棋子 提示玩家不允许操作其它玩家的棋子\r\n            if (!this.onCheckOptionalValid()) {\r\n\r\n                this.onAddTip(texts.game.doushouqi.CANNOT_CONTROL_OPPONENT);\r\n\r\n                return;\r\n\r\n            }\r\n\r\n            // 消除操作 计算 根据\r\n            /**\r\n             *  已经记录了被选中的点\r\n             *  1.计算传过来的点是否与被选中的点是否相邻\r\n             *  2.具体算法：(row - 1 >= 0 && row - 1 == selected[0])\r\n             */\r\n\r\n            console.log(\" else 913 \");\r\n\r\n            if (this.onClearAlgorithm(row, col) && this._doItUID != objCode) {\r\n\r\n                // 可以进行消除逻辑 让当前被选中的小动物，进行移动到将被消除的小动物位置\r\n\r\n                var index0 = this._selectedObj.row;\r\n\r\n                var index1 = this._selectedObj.col;\r\n\r\n                var targetPos = {\r\n                    x: this.allPos[row][col].x,\r\n                    y: this.allPos[row][col].y\r\n                };\r\n\r\n                this.tableNodes[index0][index1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).node.setLocalZOrder(99);\r\n\r\n                // 移动 回调删除被吃掉的棋子（被吃掉的棋子进行删除）\r\n                var data = {\r\n                    r: index0,\r\n                    c: index1,\r\n                    moveR: row,\r\n                    moveC: col\r\n                };\r\n\r\n                this.onSendGameData(events.game.doushouqi.C2S_MOVE, data);\r\n\r\n            } else {\r\n\r\n                var index0 = this._selectedObj.row;\r\n\r\n                var index1 = this._selectedObj.col;\r\n\r\n                this.tableNodes[index0][index1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunSmall();\r\n\r\n                this.onHideTipDir();\r\n\r\n                // 不可以进行消除 原地不动\r\n                this._selectedObj.row = -1;\r\n\r\n                this._selectedObj.col = -1;\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 点击默认占位的对象后回调\r\n    onBombTouchCallback: function(row, col, componentStr) {\r\n\r\n        console.log(\"onBombTouchCall\", this.onIsSelfdoit());\r\n\r\n        if (!this.onIsSelfdoit()) {\r\n\r\n            this.onAddTip(texts.game.doushouqi.WAITING_FOR_OPPONENT);\r\n\r\n            return;\r\n\r\n        } else {\r\n\r\n            // 请求服务器 拿到当前位置的动物\r\n\r\n            var data = {\r\n                r: row,\r\n                c: col\r\n            };\r\n\r\n            this.onSendGameData(events.game.doushouqi.C2S_ANIMAL, data);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    onAnimaltionBreakCallback: function(row, col) {\r\n\r\n        this.tableNodes[row][col].animal.active = true;\r\n\r\n        this.tableNodes[row][col].animal.opacity = 255;\r\n\r\n        this.onCheckOptionSelf();\r\n\r\n    },\r\n\r\n    // 点击空白方块的回调\r\n    onEmptyTouchCallback: function(row, col) {\r\n\r\n        console.log(\"onEmptyTouchCallback\", row, col);\r\n        // 把被选中的动物移动到当前位置\r\n        if (this.onClearAlgorithm(row, col)) {\r\n\r\n            var index0 = this._selectedObj.row;\r\n\r\n            var index1 = this._selectedObj.col;\r\n\r\n            // console.log( \" 1172 index0  index1 \", index0, index1 );\r\n\r\n            var data = {\r\n                r: index0,\r\n                c: index1,\r\n                moveR: row,\r\n                moveC: col\r\n            };\r\n\r\n            this.onSendGameData(events.game.doushouqi.C2S_MOVE, data);\r\n\r\n        } else {\r\n\r\n            // 不能移动\r\n\r\n        }\r\n\r\n\r\n    },\r\n\r\n    // 移动后并且删除被吃掉的棋子\r\n    onMoveCallbackDel: function(moveData) {\r\n\r\n        // 设置操作棋子的row col\r\n        var selected0 = moveData.selectedRow;\r\n\r\n        var selected1 = moveData.selectedCol;\r\n\r\n        var row = moveData.row;\r\n\r\n        var col = moveData.col;\r\n\r\n        var moveState = moveData.winAnimalIdx;\r\n\r\n        console.log(\"moveState == \", moveState);\r\n\r\n        if (moveState == -1) {\r\n\r\n            // 两个棋子都删除\r\n\r\n            // console.log( \" 1209 idDie  \",  this.tableNodes[row][col].isDie);\r\n\r\n            if (this.tableNodes[row][col].isDie) {\r\n\r\n                Com.onPlayGameEffect(1);\r\n\r\n                this.onMoveCallback(moveData);\r\n\r\n                return;\r\n            }\r\n\r\n            Com.onPlayGameEffect(5);\r\n\r\n            this.onPlayDestoryAni(row, col);\r\n\r\n            // 删除被吃掉的棋子\r\n            this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onDestory();\r\n\r\n            this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onDestory();\r\n\r\n            this.tableNodes[row][col].isDie = true;\r\n\r\n            this.tableNodes[selected0][selected1].isDie = true;\r\n\r\n        } else {\r\n\r\n            // selected被吃掉\r\n\r\n            if (this.tableNodes[row][col].isDie) {\r\n\r\n                Com.onPlayGameEffect(1);\r\n\r\n                this.onMoveCallback(moveData);\r\n\r\n                return;\r\n            }\r\n\r\n            console.log(\" row col \", this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex());\r\n\r\n            console.log(\" selected0 selected1 \", this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex());\r\n\r\n            if (this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex() == moveState) {\r\n\r\n                Com.onPlayGameEffect(3);\r\n\r\n                this.tableNodes[selected0][selected1].isDie = true;\r\n\r\n                this.tableNodes[row][col].isDie = false;\r\n\r\n                this.onPlayDestoryAni(row, col);\r\n                // 删除被吃掉的棋子\r\n                this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onDestory();\r\n\r\n            } else if (this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex() == moveState) {\r\n\r\n                // 目标被吃掉\r\n                Com.onPlayGameEffect(4);\r\n\r\n                this.tableNodes[row][col].isDie = true;\r\n\r\n                this.tableNodes[selected0][selected1].isDie = false;\r\n\r\n                this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).node.setLocalZOrder(1);\r\n\r\n                this.onPlayDestoryAni(row, col);\r\n                // 删除被吃掉的棋子\r\n                this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onDestory();\r\n\r\n                this.tableNodes[row][col].animal = this.tableNodes[selected0][selected1].animal;\r\n\r\n                this.tableNodes[row][col].isDie = this.tableNodes[selected0][selected1].isDie;\r\n\r\n                this.tableNodes[selected0][selected1].isDie = true;\r\n\r\n                this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onSetRowAndCol(row, col);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    //  移动结果回调\r\n    onMoveCallback: function(moveData) {\r\n\r\n        // 切换操作用户\r\n        console.log(\"移动完成\");\r\n        // 移动后属性互换\r\n        var selected0 = moveData.selectedRow;\r\n\r\n        var selected1 = moveData.selectedCol;\r\n\r\n        var row = moveData.row;\r\n\r\n        var col = moveData.col;\r\n\r\n        var targetDie = this.tableNodes[row][col].isDie;\r\n\r\n\r\n        if (this.tableNodes[selected0][selected1].isDie) {\r\n\r\n            console.log(\" error 1374+++++ isDie true \");\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        this.tableNodes[row][col].animal = this.tableNodes[selected0][selected1].animal;\r\n\r\n        this.tableNodes[row][col].isDie = this.tableNodes[selected0][selected1].isDie;\r\n\r\n        this.tableNodes[selected0][selected1].isDie = targetDie;\r\n\r\n        this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onSetRowAndCol(row, col);\r\n\r\n    },\r\n\r\n    // 切换用户\r\n    onCheckOptionSelf: function() {\r\n\r\n        this.closeUpdate();\r\n\r\n        this.onSetOptionalTime();\r\n\r\n        // 要清理 自己的棋子的状态\r\n        this.onResetStatus();\r\n\r\n        this._selectedObj.row = -1;\r\n\r\n        this._selectedObj.col = -1;\r\n\r\n        this._selectedObj.count = 0;\r\n\r\n        if (this.onIsSelfdoit()) {\r\n\r\n            this.onRedBoardAni(true);\r\n\r\n            this.onBlueBoardAni(false);\r\n\r\n        } else if (!this.onIsSelfdoit()) {\r\n\r\n            this.onBlueBoardAni(true);\r\n\r\n            this.onRedBoardAni(false);\r\n\r\n        }\r\n\r\n        this.onHideTipDir();\r\n\r\n        this.onShowValidOptionalObj();\r\n\r\n    },\r\n\r\n    onIsSelfdoit: function() {\r\n\r\n        if (this._selfUID == this._doItUID) {\r\n\r\n            return true;\r\n\r\n        } else if (this._selfUID != this._doItUID) {\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n    },\r\n\r\n    //计算点击后是否可以进行移动\r\n    onClearAlgorithm: function(row, col) {\r\n\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        var isClear = false;\r\n\r\n        if (row - 1 == selected0 && col == selected1) {\r\n\r\n            // 消除\r\n            isClear = true;\r\n            // console.log( \" row  - 1 \" );\r\n\r\n        } else if (row + 1 == selected0 && col == selected1) {\r\n\r\n            // 消除\r\n            isClear = true;\r\n            // console.log( \" row  + 1 \" );\r\n\r\n        } else if (row == selected0 && col - 1 == selected1) {\r\n\r\n            // 消除\r\n            isClear = true;\r\n            // console.log( \" col  - 1 \" );\r\n\r\n        } else if (row == selected0 && col + 1 == selected1) {\r\n\r\n            // 消除\r\n            isClear = true;\r\n            // console.log( \" col + 1 \" );\r\n\r\n        } else if (selected0 == -1 && selected1 == -1) {\r\n\r\n            // 不可以消除 直接\r\n            isClear = false;\r\n            // console.log( \" selected0 -1 selected1 -1\" );\r\n\r\n        } else {\r\n\r\n            // 不可以消除 直接\r\n            isClear = false;\r\n            // console.log( \" else \" );  \r\n\r\n        }\r\n\r\n        console.log(\"isClear ===== \", isClear);\r\n\r\n        return isClear;\r\n\r\n    },\r\n\r\n    // 点击后是否能吃掉对方  消除\r\n    /**\r\n     *  比较大小\r\n     *  1.如果移动的棋子比固定的棋子大，则吃掉对方；否则被吃掉；\r\n     *  2.如果相等，则两个棋子都消失\r\n     */\r\n    onCheckCompare: function(row, col) {\r\n\r\n        // this._compareState\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        var targetObj = this.tableNodes[row][col].animal.componentStr;\r\n\r\n        var selectedIndex = this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex();\r\n\r\n        var targetIndex = this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onGetAnimalIndex();\r\n\r\n        // 首先是特殊情况 老鼠可以吃大象 所以\r\n        /**\r\n         *  所有这个两个对象 如果index一个是8 并且一个是1  要特殊处理\r\n         *  要把大象吃掉\r\n         * \r\n         *  相同颜色的动物不可以互相吃掉\r\n         */\r\n\r\n        // console.log( \"selectedIndex targetIndex\", selectedIndex, targetIndex );\r\n\r\n        var compareState = -1;\r\n\r\n        if ((selectedIndex == 8 && targetIndex == 1)) {\r\n\r\n            // 假设被选中的是大象，目标是老鼠 这时候，大象被吃\r\n            compareState = this._compareState.lt;\r\n\r\n        } else if ((selectedIndex == 1 && targetIndex == 8)) {\r\n\r\n            // 假设被选中的是老鼠，目标是大象 这时候，大象被吃\r\n            compareState = this._compareState.gt;\r\n\r\n        } else if (selectedIndex == targetIndex) {\r\n\r\n            compareState = this._compareState.eq;\r\n\r\n        } else if (selectedIndex > targetIndex) {\r\n\r\n            compareState = this._compareState.gt;\r\n\r\n        } else if (selectedIndex < targetIndex) {\r\n\r\n            compareState = this._compareState.lt;\r\n\r\n        }\r\n\r\n        return compareState;\r\n\r\n    },\r\n\r\n    // 判断两个动物是否相同\r\n    onCheckAnimalSame: function(row, col) {\r\n\r\n        var isSame = false;\r\n\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        var targetComStr = this.tableNodes[row][col].animal.componentStr;\r\n\r\n        var selectedStr = this.tableNodes[selected0][selected1].animal.componentStr;\r\n\r\n        // console.log( \" onCheckAnimalSame \", row, col, targetComStr, selectedStr );\r\n\r\n        if (targetComStr == selectedStr) {\r\n\r\n            this.tableNodes[selected0][selected1].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunSmall();\r\n\r\n            this.tableNodes[row][col].animal.getComponent(consts.game.doushouqi.COMPONENT_ANIMAL).onRunSmall();\r\n\r\n            this.onHideTipDir();\r\n\r\n            isSame = true;\r\n\r\n        }\r\n\r\n        return isSame;\r\n\r\n    },\r\n\r\n    // 检测操作是否合法\r\n    onCheckOptionalValid: function() {\r\n\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        if (selected0 == -1 && selected1 == -1) {\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    },\r\n\r\n    // 显示有效的操作对象\r\n    onShowValidOptionalObj: function() {\r\n\r\n        var tempNode = null;\r\n\r\n        var comStr = '';\r\n\r\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\r\n        for (let index = 0; index < this.tableNodes.length; index++) {\r\n\r\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\r\n\r\n                if (!this.tableNodes[index][jndex].isDie) {\r\n\r\n                    tempNode = this.tableNodes[index][jndex].animal;\r\n\r\n                    // comStr   = tempNode.componentStr;\r\n                    comStr = \"Animal\";\r\n\r\n                    var currCode = tempNode.getComponent(comStr).onGetAnimalCode();\r\n\r\n                    // 如果当前为自己操作 显示可以操作的动物\r\n                    if (this.onIsSelfdoit()) {\r\n\r\n                        // 判断当前动物是否被翻出来\r\n                        if (tempNode.getComponent(comStr).getAnimalIsBreak()) {\r\n\r\n                            // 判断当前动物是否为自己的动物\r\n                            if (this._selfUID == currCode) {\r\n\r\n                                tempNode.getComponent(comStr).onShowSelfTip();\r\n\r\n                            } else {\r\n\r\n                                tempNode.getComponent(comStr).onHideTip();\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            tempNode.getComponent(comStr).onOptionalObj();\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        tempNode.getComponent(comStr).onHideTip();\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    // 重置棋子的状态\r\n    onResetStatus: function() {\r\n\r\n        var tempNode = null;\r\n\r\n        var comStr = '';\r\n\r\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\r\n        for (let index = 0; index < this.tableNodes.length; index++) {\r\n\r\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\r\n\r\n                if (!this.tableNodes[index][jndex].isDie) {\r\n\r\n                    tempNode = this.tableNodes[index][jndex].animal;\r\n\r\n                    // comStr   = tempNode.componentStr;\r\n                    comStr = \"Animal\";\r\n\r\n                    if (this._selfUID == tempNode.getComponent(comStr).onGetAnimalCode()) {\r\n\r\n                        if (tempNode.getComponent(comStr).getAnimalIsBig()) {\r\n\r\n                            tempNode.getComponent(comStr).onRunSmall();\r\n\r\n                        } else {\r\n\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    onClearTabel: function() {\r\n\r\n        var tempNode = null;\r\n\r\n        var comStr = '';\r\n\r\n        // 清除所有动物 需要重新初始化\r\n        for (let index = 0; index < this.tableNodes.length; index++) {\r\n\r\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\r\n\r\n                if (!this.tableNodes[index][jndex].isDie) {\r\n\r\n                    tempNode = this.tableNodes[index][jndex].animal;\r\n\r\n                    // comStr   = tempNode.componentStr;\r\n                    comStr = consts.game.doushouqi.COMPONENT_ANIMAL;\r\n\r\n                    tempNode.getComponent(comStr).onDestory();\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n    },\r\n\r\n    onRestart: function() {\r\n\r\n        this.onClearTabel();\r\n\r\n        this.init();\r\n\r\n        this.initUI();\r\n\r\n        this.openUpdate();\r\n\r\n        this.onOptionalTimeAni();\r\n\r\n    },\r\n\r\n    // ******** 操作倒计时 ************\r\n\r\n    // 打开倒计时函数\r\n    openUpdate: function() {\r\n\r\n        var interval = 1; //以秒为单位的时间间隔\r\n\r\n        var repeat = this.defalutTiem; //重复次数\r\n\r\n        var delay = 0; //开始延时\r\n\r\n        this.schedule(this.onTimeDownCallback, interval, repeat, delay);\r\n\r\n    },\r\n\r\n    // 关闭倒计时函数\r\n    closeUpdate: function() {\r\n\r\n        console.log(\" closeUpdate ********************** \");\r\n\r\n        this.unschedule(this.onTimeDownCallback);\r\n\r\n        this.count = 30;\r\n\r\n        this._isCanOptional = false;\r\n\r\n    },\r\n\r\n    // 倒计时回调\r\n    onTimeDownCallback: function() {\r\n\r\n        this.count -= 1;\r\n\r\n        if (this.count < 0) {\r\n\r\n            this.closeUpdate();\r\n\r\n            if (this.onIsSelfdoit())\r\n            {\r\n                this.onSendGameData(events.game.doushouqi.C2S_SURRENDER, {});\r\n            }\r\n\r\n            // 给服务器发送切换用户的操作\r\n\r\n        } else {\r\n\r\n            // 设置文本信息\r\n            this.onSetOptionalTime();\r\n\r\n        }\r\n\r\n\r\n\r\n    },\r\n\r\n    onCanOptionalObj: function() {\r\n\r\n        return this._isCanOptional;\r\n\r\n    },\r\n\r\n    // ******** 操作倒计时 ************\r\n\r\n\r\n    // ******** 对象可以移动的方向指示 ********\r\n\r\n    // 检测上下左右是否可以移动\r\n    /**\r\n     * \r\n     * 移动规则为：如果四周有空位置，提示➡箭头出现\r\n     * 1.如果旁边还有箱子，不提箭头\r\n     * 2.如果旁边右自己的动物，不提示箱子\r\n     * \r\n     */\r\n    onCheckRoundMove: function(row, col, obj) {\r\n\r\n        var moveDir = {\r\n            up: false,\r\n            down: false,\r\n            left: false,\r\n            right: false\r\n        };\r\n\r\n        if (row - 1 >= 0) {\r\n\r\n            // 找出(row-1, col) 这个位置的对像\r\n            // 上移动\r\n            var isShowDir = this.onFindAnimalOfIndex((row - 1), col);\r\n\r\n            if (isShowDir) {\r\n\r\n                moveDir.up = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if (row + 1 <= 3) {\r\n\r\n            // 下移动\r\n            var isShowDir = this.onFindAnimalOfIndex((row + 1), col);\r\n\r\n            if (isShowDir) {\r\n\r\n                moveDir.down = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if (col - 1 >= 0) {\r\n\r\n            // 左移动\r\n            var isShowDir = this.onFindAnimalOfIndex(row, (col - 1));\r\n\r\n            if (isShowDir) {\r\n\r\n                moveDir.left = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if (col + 1 <= 3) {\r\n\r\n            // 右移动\r\n            var isShowDir = this.onFindAnimalOfIndex(row, (col + 1));\r\n\r\n            if (isShowDir) {\r\n\r\n                moveDir.right = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if ((row < 0 || col < 0) || (row > 3 || col > 3)) {\r\n\r\n            moveDir = {\r\n                up: false,\r\n                down: false,\r\n                left: false,\r\n                right: false\r\n            };\r\n\r\n        }\r\n\r\n        this.node_dir.x = this.tableNodes[row][col].animal.x;\r\n\r\n        this.node_dir.y = this.tableNodes[row][col].animal.y + 10;\r\n\r\n        // if ( moveDir.up || moveDir.down || moveDir.left || moveDir.right ){\r\n\r\n        //     this.node_dir.node.active = true;\r\n\r\n        //     this.node_dir.node.opacity = 255;\r\n\r\n        // }\r\n\r\n        this.onTipMoveDirection(moveDir);\r\n\r\n    },\r\n\r\n    onFindAnimalOfIndex: function(row, col) {\r\n\r\n        var tempNode = null;\r\n\r\n        var comStr = '';\r\n\r\n        var isShowDir = false;\r\n\r\n        if (!this.tableNodes[row][col].isDie) {\r\n\r\n            tempNode = this.tableNodes[row][col].animal;\r\n\r\n            // comStr = tempNode.componentStr;\r\n            comStr = consts.game.doushouqi.COMPONENT_ANIMAL;\r\n\r\n            // 当前箱子没有坏掉\r\n            if (!tempNode.getComponent(comStr).getAnimalIsBreak()) {\r\n\r\n                // 此种情况 不显示这个方向的 方向标\r\n                isShowDir = false;\r\n\r\n            } else {\r\n\r\n                // isShowDir = true;\r\n                if (this.onIsSelfdoit() && this._selfUID == tempNode.getComponent(comStr).onGetAnimalCode()) {\r\n\r\n                    isShowDir = false;\r\n\r\n                } else {\r\n\r\n                    isShowDir = true;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            isShowDir = true;\r\n\r\n        }\r\n\r\n        return isShowDir;\r\n\r\n    },\r\n\r\n    //  选中后提示玩家可以移动的方向 ()\r\n    /**\r\n     * 根据当前位置（x y）计算 上下左右 四个方向是否可以移动\r\n     * 如果某个方向可以移动，则展示提示动画\r\n     */\r\n    onTipMoveDirection: function(moveDir) {\r\n\r\n        if (moveDir.up) {\r\n\r\n            // 播放上动画\r\n            this.onRepeatAction(this.sp_up, consts.game.doushouqi.ANI_UP);\r\n\r\n        }\r\n\r\n        if (moveDir.down) {\r\n\r\n            // 播放下动画\r\n            this.onRepeatAction(this.sp_down, consts.game.doushouqi.ANI_DOWN);\r\n\r\n        }\r\n\r\n        if (moveDir.left) {\r\n\r\n            // 播放左动画\r\n            this.onRepeatAction(this.sp_left, consts.game.doushouqi.ANI_LEFT);\r\n\r\n        }\r\n\r\n        if (moveDir.right) {\r\n\r\n            // 播放右动画\r\n            this.onRepeatAction(this.sp_right, consts.game.doushouqi.ANI_RIGHT);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * @nodeObj: 哪个对象执行\r\n     * @dirStr: 方向\r\n     */\r\n    onRepeatAction: function(nodeObj, dirStr) {\r\n\r\n        nodeObj.node.active = true;\r\n\r\n        nodeObj.node.opacity = 255;\r\n\r\n        var animState = nodeObj.play(dirStr);\r\n\r\n        // 设置循环模式为 Loop\r\n        animState.wrapMode = cc.WrapMode.Loop;\r\n\r\n        // 设置动画循环次数为无限次\r\n        animState.repeatCount = Infinity;\r\n\r\n    },\r\n\r\n    onStopRepeatAction: function(nodeObj, dirStr) {\r\n\r\n        nodeObj.node.active = false;\r\n\r\n        nodeObj.node.opacity = 0;\r\n\r\n        nodeObj.stop(dirStr);\r\n\r\n    },\r\n\r\n    // 隐藏四个方向小标\r\n    onHideTipDir: function() {\r\n\r\n        // 停止播放上动画\r\n        this.onStopRepeatAction(this.sp_up, consts.game.doushouqi.ANI_UP);\r\n\r\n        // 停止播放下动画\r\n        this.onStopRepeatAction(this.sp_down, consts.game.doushouqi.ANI_DOWN);\r\n\r\n        // 停止播放左动画\r\n        this.onStopRepeatAction(this.sp_left, consts.game.doushouqi.ANI_LEFT);\r\n\r\n        // 停止播放右动画\r\n        this.onStopRepeatAction(this.sp_right, consts.game.doushouqi.ANI_RIGHT);\r\n\r\n    },\r\n\r\n    // ****************** 对象可以移动的方向指示 ******************\r\n\r\n    // ******************     被消灭的动画     ******************\r\n\r\n    onPlayDestoryAni: function(row, col) {\r\n\r\n        this.sp_destory.node.x = this.allPos[row][col].x;\r\n\r\n        this.sp_destory.node.y = this.allPos[row][col].y;\r\n\r\n        this.onDestoryAnimation();\r\n\r\n    },\r\n\r\n    onDestoryAnimation: function() {\r\n\r\n        this.sp_destory.node.active = true;\r\n\r\n        this.sp_destory.node.opacity = 255;\r\n\r\n        var animState = this.sp_destory.play(consts.game.doushouqi.ANI_DESTROY);\r\n        console.log(\"animState:\", animState);\r\n\r\n        var self = this;\r\n\r\n        function onFinished() {\r\n\r\n            console.log(\"onFinished\");\r\n\r\n            self.sp_destory.node.active = false;\r\n\r\n            self.sp_destory.node.opacity = 0;\r\n\r\n        };\r\n\r\n        console.log(\"animState:\", animState);\r\n        animState.on('finished', onFinished, this.sp_destory);\r\n\r\n    },\r\n\r\n    // ******************  被消灭的动画   ******************\r\n\r\n    // ****************** 操作时间过度动画 ******************\r\n\r\n    /**\r\n     * 随机出操作方\r\n     * 根据随机出来的对象，显示操作时间\r\n     * 显示要求：（假设，随机出来的是红方先操作）\r\n     * 1.红方时间面板从0放大到1的过程；30s后面板从1到0缩小，然后显示白板0.5s，0.5s后白板隐藏，\r\n     * 蓝色面板从0放大到1的过程；然后重复循环此过程\r\n     */\r\n    onOptionalTimeAni: function() {\r\n\r\n        if (this.onIsSelfdoit()) {\r\n\r\n            this.onRedBoardAni(true);\r\n\r\n        } else {\r\n\r\n            this.onBlueBoardAni(true);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * optionalObj: 操作方\r\n     */\r\n    onRedBoardAni: function(optionalObj) {\r\n\r\n        if (optionalObj) {\r\n\r\n            // 红面板从0放大到1的过程；\r\n\r\n            var scale = cc.scaleTo(0.2, 1, 1);\r\n\r\n            var delay = cc.delayTime(0.2);\r\n\r\n            var self = this;\r\n\r\n            function onFinishCallback() {\r\n\r\n                self.sp_white.node.scale = 0;\r\n\r\n                var scale2 = cc.scaleTo(0.2, 1, 1);\r\n\r\n                self.sp_red_time.node.runAction(scale2);\r\n\r\n                self._isCanOptional = true;\r\n\r\n                self.openUpdate();\r\n\r\n            };\r\n\r\n            var seq = cc.sequence(scale,\r\n                delay,\r\n                cc.callFunc(onFinishCallback, this, this.sp_white));\r\n\r\n            this.sp_white.node.runAction(seq);\r\n\r\n        } else {\r\n\r\n            // 红面板从1缩小到0的过程；\r\n            var scale = cc.scaleTo(0.2, 1, 0);\r\n\r\n            var self = this;\r\n\r\n            function onFinishCallback() {\r\n\r\n\r\n            };\r\n\r\n            var seq = cc.sequence(scale,\r\n                cc.callFunc(onFinishCallback, this, this.sp_red_time));\r\n\r\n            this.sp_red_time.node.runAction(seq);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * optionalObj: 操作方\r\n     */\r\n    onBlueBoardAni: function(optionalObj) {\r\n\r\n        if (optionalObj) {\r\n\r\n            // 红面板从0放大到1的过程\r\n\r\n            var scale = cc.scaleTo(0.2, 1, 1);\r\n\r\n            var delay = cc.delayTime(0.2);\r\n\r\n            var self = this;\r\n\r\n            function onFinishCallback() {\r\n\r\n                self.sp_white.node.scale = 0;\r\n\r\n                var scale1 = cc.scaleTo(0.2, 1, 1);\r\n\r\n                self.sp_blue_time.node.runAction(scale1);\r\n\r\n                self._isCanOptional = true;\r\n\r\n                self.openUpdate();\r\n\r\n            };\r\n\r\n            var seq = cc.sequence(scale,\r\n                delay,\r\n                cc.callFunc(onFinishCallback, this, this.sp_white));\r\n\r\n            this.sp_white.node.runAction(seq);\r\n\r\n        } else {\r\n\r\n            // 红面板从1缩小到0的过程；\r\n            var scale = cc.scaleTo(0.2, 1, 0);\r\n\r\n            var self = this;\r\n\r\n            function onFinishCallback() {\r\n\r\n            };\r\n\r\n            var seq = cc.sequence(scale,\r\n                cc.callFunc(onFinishCallback, this, this.sp_blue_time));\r\n\r\n            this.sp_blue_time.node.runAction(seq);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * optionalObj: 操作方\r\n     */\r\n    onWhiteBoardAni: function(optionalObj) {\r\n\r\n        var scale = cc.scaleTo(0.5, 1, 1);\r\n\r\n        var self = this;\r\n\r\n        function onFinishCallback() {\r\n\r\n            self.sp_white.node.active = false;\r\n\r\n            self.sp_white.node.opacity = 0;\r\n\r\n            self.sp_white.node.scaleY = 0;\r\n\r\n            console.log(\" onFinishCallback onWhiteBoardAni \", optionalObj);\r\n\r\n            if (optionalObj == consts.game.doushouqi.OBJ_RED) {\r\n\r\n                self.onBlueBoardAni(true);\r\n\r\n            } else {\r\n\r\n                self.onRedBoardAni(true);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var seq = cc.sequence(scale,\r\n            cc.callFunc(onFinishCallback, this, this.sp_white));\r\n\r\n        this.sp_white.node.runAction(seq);\r\n\r\n\r\n    },\r\n\r\n    // 设置玩家操作时间\r\n    onSetOptionalTime: function() {\r\n\r\n        if (this._doItUID != this._selfUID) {\r\n\r\n            this.label_blue_time.string = this.count.toString() + \"s\";\r\n\r\n        } else {\r\n\r\n            this.label_red_time.string = this.count.toString() + \"s\";\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // ****************** 操作时间过度动画 ******************\r\n\r\n    // ******************     新手提示     ******************\r\n\r\n    onNewPlayerGuid: function() {\r\n\r\n        if (this._doItUID == this._selfUID && this._isNewPlayer) {\r\n\r\n            this.newPlayerNode.active = true;\r\n\r\n            this.newPlayerNode.opacity = 255;\r\n\r\n            // this.newPlayerNode.setLocalZOrder(1000);\r\n\r\n            this.onActiconHand();\r\n\r\n        } else {\r\n\r\n            this.newPlayerNode.active = false;\r\n\r\n            this.newPlayerNode.opacity = 0;\r\n\r\n            return;\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * 模拟手点击的动作\r\n     * 每3秒做一次动作，如果点击第一个箱子后，关闭这个动物\r\n     */\r\n    onActiconHand: function() {\r\n\r\n        this.sp_hand.node.stopAllActions();\r\n\r\n        this.newPlayerNode.active = true;\r\n\r\n        this.newPlayerNode.opacity = 255;\r\n\r\n        var seq = cc.repeatForever(\r\n            cc.sequence(\r\n                cc.moveTo(0.85, -50, -50),\r\n                cc.moveTo(0.5, 0, 0)\r\n            ));\r\n\r\n        this.sp_hand.node.runAction(seq);\r\n\r\n    },\r\n\r\n    // ******************     新手提示     ******************\r\n\r\n    // ******************     提示框     ******************\r\n    /**\r\n     * tipStr: 提示文字\r\n     */\r\n    onAddTip: function(tipStr) {\r\n\r\n        this.label_tip.string = tipStr;\r\n\r\n        if (this._isShowTip) {\r\n\r\n            return;\r\n\r\n        } else {\r\n\r\n            this.onShowtip();\r\n\r\n        }\r\n\r\n    },\r\n\r\n    onShowtip: function() {\r\n\r\n        var self = this;\r\n\r\n        this._isShowTip = true;\r\n\r\n        this.sp_tip.node.active = true;\r\n\r\n        this.sp_tip.node.opacity = 255;\r\n\r\n        // 缩小放大动画\r\n        var scale = cc.scaleTo(0.2, 1);\r\n\r\n        function onActionFinishCall() {\r\n\r\n            // this.sp_tip.node.scale = 0;\r\n            self.onHidetip();\r\n\r\n        };\r\n\r\n        var delay = cc.delayTime(0.8);\r\n\r\n        var seq = cc.sequence(scale, delay,\r\n            cc.callFunc(onActionFinishCall, this, this.sp_tip));\r\n\r\n        this.sp_tip.node.runAction(seq);\r\n\r\n    },\r\n\r\n    onHidetip: function() {\r\n\r\n        // 缩小放大动画\r\n        var scale = cc.scaleTo(0.1, 0);\r\n\r\n        function onActionFinishCall() {\r\n\r\n            this.sp_tip.node.scale = 0;\r\n\r\n            this._isShowTip = false;\r\n\r\n        };\r\n\r\n        var seq = cc.sequence(scale, cc.callFunc(onActionFinishCall, this, this.sp_tip));\r\n\r\n        this.sp_tip.node.runAction(seq);\r\n\r\n    },\r\n\r\n    // 弹出 确认取消框\r\n    onAddAlert: function(descStr, labelRedBtn = texts.game.doushouqi.REFUSE, labelBlueBtn = texts.game.doushouqi.AGREE) {\r\n\r\n        this.label_alert.string = descStr;\r\n\r\n        this.label_red_btn.string = labelRedBtn;\r\n\r\n        this.label_blue_btn.string = labelBlueBtn;\r\n\r\n        if (this._isShowAlert) {\r\n\r\n            return;\r\n\r\n        } else {\r\n\r\n            this.onShowAlert();\r\n\r\n        }\r\n\r\n    },\r\n\r\n    onShowAlert: function() {\r\n\r\n        var self = this;\r\n\r\n        this._isShowAlert = true;\r\n\r\n        // this.sp_alert.opacity = 255;\r\n\r\n        // 缩小放大动画\r\n        var scale = cc.scaleTo(0.2, 1);\r\n\r\n        function onActionFinishCall() {\r\n\r\n            console.log(\" onActionFinishCall \");\r\n\r\n        };\r\n\r\n        var delay = cc.delayTime(0.8);\r\n\r\n        var seq = cc.sequence(scale, delay,\r\n            cc.callFunc(onActionFinishCall, this, this.sp_alert));\r\n\r\n        this.sp_alert.node.runAction(seq);\r\n\r\n    },\r\n\r\n    onHideAlert: function() {\r\n\r\n        // 缩小放大动画\r\n        var scale = cc.scaleTo(0.1, 0);\r\n\r\n        var $this = this;\r\n\r\n        function onActionFinishCall() {\r\n\r\n            $this.sp_alert.node.scale = 0;\r\n\r\n            $this._isShowAlert = false;\r\n\r\n            $this._alertStr = \"\";\r\n\r\n        };\r\n\r\n        var seq = cc.sequence(scale, cc.callFunc(onActionFinishCall, this, this.sp_alert));\r\n\r\n        this.sp_alert.node.runAction(seq);\r\n\r\n    },\r\n});"]}