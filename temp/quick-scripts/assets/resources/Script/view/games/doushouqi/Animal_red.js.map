{"version":3,"sources":["Animal_red.js"],"names":["Com","require","cc","Class","extends","Component","properties","node_obj","default","type","Sprite","sp_animal","sp_icon","breakAni","Animation","dieAni","nodeBreak","Node","sp_up","sp_down","sp_left","sp_right","sp_self","sp_tip_break","audioClip","url","AudioClip","is_big","is_break","row","col","animalIndex","onLoad","init","node","active","opacity","is_self","_touchCallback","_breakCallback","onHideTipDir","onLoadAudio","addTouchListener","event","customEventData","onRunSmall","start","update","dt","playAnimation","animationCall","animState","play","self","onFinished","console","log","destroy","onPlayEffect","on","onRunBig","bigFinishCall","seq","sequence","moveTo","p","scaleTo","callFunc","runAction","smallFinishCall","onMoveToTarget","targetPos","callback","moveFinishCall","scale","moveEnd","x","y","onOptionalObj","getAnimalIsBig","getAnimalIsBreak","onSetLocalZorder","zorder","setLocalZOrder","onLoadAnimal","index","animal","animalIcon","urlAnimal","onGetAnimalUrl","urlIcon","onGetAnimalIconUrl","loader","loadRes","SpriteFrame","error","spriteFrame","getComponent","onSetRowAndCol","onGetRowAndCol","obj","onDestory","onSetSelf","isSelf","onGetSelf","onGetAnimalIndex","onSetTouchCallback","touchcallback","onBreakBombCallback","breakcallback","onGetComponentStr","onHideTip","onShowSelfTip"],"mappings":";;;;;;AAAA;;;;;;AAMA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,iBAASF,GAAGG,SADP;;AAGLC,oBAAY;AACRC,0BAAU;AACNC,iCAAS,IADH;AAENC,8BAAMP,GAAGQ;AAFH,iBADF;AAKRC,2BAAW;AACPH,iCAAS,IADF;AAEPC,8BAAMP,GAAGQ;AAFF,iBALH;AASRE,yBAAS;AACLJ,iCAAS,IADJ;AAELC,8BAAMP,GAAGQ;AAFJ,iBATD;;AAcRG,0BAAU;AACNL,iCAAS,IADH;AAENC,8BAAMP,GAAGY;AAFH,iBAdF;;AAmBRC,wBAAQ;AACJP,iCAAS,IADL;AAEJC,8BAAMP,GAAGY;AAFL,iBAnBA;;AAwBRE,2BAAW;AACPR,iCAAS,IADF;AAEPC,8BAAMP,GAAGe;AAFF,iBAxBH;;AA6BRC,uBAAO;AACHV,iCAAS,IADN;AAEHC,8BAAMP,GAAGY;AAFN,iBA7BC;;AAkCRK,yBAAS;AACLX,iCAAS,IADJ;AAELC,8BAAMP,GAAGY;AAFJ,iBAlCD;;AAuCRM,yBAAS;AACLZ,iCAAS,IADJ;AAELC,8BAAMP,GAAGY;AAFJ,iBAvCD;;AA4CRO,0BAAU;AACNb,iCAAS,IADH;AAENC,8BAAMP,GAAGY;AAFH,iBA5CF;;AAiDRQ,yBAAS;AACLd,iCAAS,IADJ;AAELC,8BAAMP,GAAGQ;AAFJ,iBAjDD;;AAsDRa,8BAAc;AACVf,iCAAS,IADC;AAEVC,8BAAMP,GAAGQ;AAFC,iBAtDN;;AA2DRc,2BAAW;AACPhB,iCAAS,IADF;AAEPiB,6BAAKvB,GAAGwB;AAFD,iBA3DH;;AAgERC,wBAAQ,KAhEA;;AAkERC,0BAAU,KAlEF;;AAoERC,qBAAO,CAAC,CApEA;;AAsERC,qBAAO,CAAC,CAtEA;;AAwERC,6BAAa,CAAC;;AAxEN,SAHP;;AA+EL;;AAEAC,cAjFK,oBAiFK;;AAEN;;;AAIH,SAvFI;;;AAyFLC,cAAM,gBAAY;;AAEd,qBAAKX,OAAL,CAAaY,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;;AAEA,qBAAKZ,YAAL,CAAkBW,IAAlB,CAAuBE,OAAvB,GAAiC,CAAjC;;AAEA,qBAAKb,YAAL,CAAkBW,IAAlB,CAAuBC,MAAvB,GAAgC,KAAhC;;AAEA,qBAAKZ,YAAL,CAAkBW,IAAlB,CAAuBE,OAAvB,GAAiC,CAAjC;;AAEA,qBAAKT,MAAL,GAAc,KAAd,CAVc,CAUU;;AAExB,qBAAKU,OAAL,GAAe,KAAf,CAZc,CAYU;;AAExB,qBAAKC,cAAL,GAAsB,IAAtB;;AAEA,qBAAKC,cAAL,GAAsB,IAAtB;;AAEA,qBAAKV,GAAL,GAAW,CAAC,CAAZ;;AAEA,qBAAKC,GAAL,GAAW,CAAC,CAAZ;;AAEA,qBAAKU,YAAL;;AAEA,qBAAKC,WAAL;AAEH,SAnHI;;AAqHLA,qBAAa,uBAAc,CAI1B,CAzHI;;AA2HL;AACAC,0BAAkB,0BAAWC,KAAX,EAAkBC,eAAlB,EAAoC;;AAElD;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAIA,oBAAKA,mBAAmB,OAAxB,EAAkC;;AAE9B;AACA,4BAAK,KAAKL,cAAV,EAA2B;;AAEvB,qCAAKA,cAAL,CAAqB,KAAKV,GAA1B,EAA+B,KAAKC,GAApC,EAAyC,YAAzC;AAEH;AAEJ,iBATD,MASO,IAAKc,mBAAmB,KAAxB,EAAgC;;AAEnC,4BAAK,KAAKjB,MAAV,EAAmB;;AAEf,qCAAKkB,UAAL;;AAEA,oCAAK,KAAKP,cAAV,EAA2B;;AAEvB,6CAAKA,cAAL,CAAqB,KAAKT,GAA1B,EAA+B,KAAKC,GAApC,EAAyC,YAAzC,EAAuD,KAAvD;AAEH;AAEJ,yBAVD,MAUO;;AAEH;;AAEA,oCAAK,KAAKQ,cAAV,EAA2B;;AAEvB,6CAAKA,cAAL,CAAqB,KAAKT,GAA1B,EAA+B,KAAKC,GAApC,EAAyC,YAAzC,EAAuD,IAAvD;AAEH;AAEJ;AAEJ;AAEJ,SA3LI;;AA6LLgB,aA7LK,mBA6LI,CAER,CA/LI;AAiMLC,cAjMK,kBAiMGC,EAjMH,EAiMO,CAEX,CAnMI;;;AAqML;AACAC,uBAAe,uBAAWC,aAAX,EAA2B;;AAEtC,oBAAIC,YAAY,KAAKtC,QAAL,CAAcuC,IAAd,CAAmB,OAAnB,CAAhB;;AAEA,oBAAIC,OAAO,IAAX;;AAEA,yBAASC,UAAT,GAAyB;;AAErBC,gCAAQC,GAAR,CAAa,YAAb;;AAEAH,6BAAKzB,QAAL,GAAgB,IAAhB;;AAEAyB,6BAAKrC,SAAL,CAAeyC,OAAf;;AAEA;AACAJ,6BAAK1C,SAAL,CAAeuB,IAAf,CAAoBC,MAApB,GAA6B,IAA7B;;AAEAkB,6BAAK1C,SAAL,CAAeuB,IAAf,CAAoBE,OAApB,GAA8B,GAA9B;;AAEAiB,6BAAKzC,OAAL,CAAasB,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;;AAEAkB,6BAAKzC,OAAL,CAAasB,IAAb,CAAkBE,OAAlB,GAA4B,GAA5B;;AAEA;;AAEA;;AAEA;;AAEA,4BAAKc,aAAL,EAAqB;;AAEjBA,8CAAeG,KAAKxB,GAApB,EAAyBwB,KAAKvB,GAA9B;AAEH;;AAED9B,4BAAI0D,YAAJ,CAAiBL,KAAKtB,WAAtB;AAEH;;AAEDoB,0BAAUQ,EAAV,CAAa,UAAb,EAA0BL,UAA1B,EAAuC,KAAKzC,QAA5C;AAEH,SA/OI;;AAiPL;AACA+C,kBAAU,oBAAe;;AAErB,yBAASC,aAAT,GAA0B;;AAEtB,6BAAKlC,MAAL,GAAc,IAAd;AAEH;AACD;AACA,oBAAImC,MAAQ5D,GAAG6D,QAAH,CAAY7D,GAAG8D,MAAH,CAAU,IAAV,EAAgB9D,GAAG+D,CAAH,CAAK,CAAL,EAAQ,EAAR,CAAhB,CAAZ,EACI/D,GAAGgE,OAAH,CAAW,IAAX,EAAiB,GAAjB,CADJ,EAEIhE,GAAGiE,QAAH,CAAYN,aAAZ,EAA2B,IAA3B,EAAiC,KAAKtD,QAAtC,CAFJ,CAAZ;;AAIA,qBAAKA,QAAL,CAAc2B,IAAd,CAAmBkC,SAAnB,CAA6BN,GAA7B;AAEH,SAhQI;;AAkQL;AACAjB,oBAAY,sBAAe;;AAEvB,yBAASwB,eAAT,GAA4B;;AAExB,6BAAK1C,MAAL,GAAc,KAAd;;AAEA;AAEH;AACD;AACA,oBAAImC,MAAQ5D,GAAG6D,QAAH,CAAY7D,GAAG8D,MAAH,CAAU,IAAV,EAAgB9D,GAAG+D,CAAH,CAAK,CAAL,EAAQ,CAAR,CAAhB,CAAZ,EACI/D,GAAGgE,OAAH,CAAW,IAAX,EAAiB,CAAjB,CADJ,EAEIhE,GAAGiE,QAAH,CAAYE,eAAZ,EAA6B,IAA7B,EAAmC,KAAK9D,QAAxC,CAFJ,CAAZ;;AAIA,qBAAKA,QAAL,CAAc2B,IAAd,CAAmBkC,SAAnB,CAA6BN,GAA7B;AAEH,SAnRI;;AAqRL;AACA;;;;;;;AAOAQ,wBAAgB,wBAAWC,SAAX,EAAsB1C,GAAtB,EAA2BC,GAA3B,EAAgC0C,QAAhC,EAA2C;;AAEvD,oBAAInB,OAAO,IAAX;;AAEA,yBAASoB,cAAT,GAA2B;;AAEvB,4BAAKD,QAAL,EAAgB;;AAEZA,yCAAU3C,GAAV,EAAeC,GAAf;AAEH;;AAED;AACAuB,6BAAK1B,MAAL,GAAc,KAAd;;AAEA,4BAAI+C,QAAQxE,GAAGgE,OAAH,CAAW,IAAX,EAAiB,CAAjB,CAAZ;;AAEAb,6BAAK9C,QAAL,CAAc2B,IAAd,CAAmBkC,SAAnB,CAA8BM,KAA9B;AAEH;;AAED;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,oBAAIC,UAAWzE,GAAG8D,MAAH,CAAU,GAAV,EAAe9D,GAAG+D,CAAH,CAAKM,UAAUK,CAAf,EAAkBL,UAAUM,CAA5B,CAAf,CAAf;;AAEA;AACA;;AAEA,oBAAIf,MAAQ5D,GAAG6D,QAAH,CAAYY,OAAZ,EACYzE,GAAGiE,QAAH,CAAYM,cAAZ,EAA4B,IAA5B,EAAkC,KAAKvC,IAAvC,CADZ,CAAZ;;AAGA,qBAAKA,IAAL,CAAUkC,SAAV,CAAoBN,GAApB;AAEH,SA7WI;;AA+WL;;;AAGAgB,uBAAe,yBAAc;;AAEzB,oBAAK,KAAKlD,QAAV,EAAqB;;AAEjB,6BAAKL,YAAL,CAAkBW,IAAlB,CAAuBC,MAAvB,GAAgC,KAAhC;;AAEA,6BAAKZ,YAAL,CAAkBW,IAAlB,CAAuBE,OAAvB,GAAiC,CAAjC;;AAEA,6BAAKd,OAAL,CAAaY,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;;AAEA,6BAAKb,OAAL,CAAaY,IAAb,CAAkBE,OAAlB,GAA4B,GAA5B;AAEH,iBAVD,MAUO;;AAEH,6BAAKb,YAAL,CAAkBW,IAAlB,CAAuBC,MAAvB,GAAgC,IAAhC;;AAEA,6BAAKZ,YAAL,CAAkBW,IAAlB,CAAuBE,OAAvB,GAAiC,GAAjC;;AAEA,6BAAKd,OAAL,CAAaY,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;;AAEA,6BAAKb,OAAL,CAAaY,IAAb,CAAkBE,OAAlB,GAA4B,CAA5B;AAEH;AAEJ,SA1YI;;AA4YL;AACA2C,wBAAgB,0BAAc;;AAE1B,uBAAO,KAAKpD,MAAZ;AAEH,SAjZI;;AAmZL;AACAqD,0BAAkB,4BAAc;;AAE5B,uBAAO,KAAKpD,QAAZ;AAEH,SAxZI;;AA0ZLqD,0BAAkB,0BAAWC,MAAX,EAAoB;;AAElC,qBAAKhD,IAAL,CAAUiD,cAAV,CAA0BD,MAA1B;AAEH,SA9ZI;;AAgaL;AACAE,sBAAc,sBAAWC,KAAX,EAAmB;;AAE7B;;AAEA,qBAAKtD,WAAL,GAAmBsD,KAAnB;;AAEA,oBAAIC,SAAS,KAAK3E,SAAlB;;AAEA,oBAAI4E,aAAa,KAAK3E,OAAtB;;AAEA,oBAAI4E,YAAYxF,IAAIyF,cAAJ,CAAoBJ,KAApB,CAAhB;;AAEA,oBAAIK,UAAU1F,IAAI2F,kBAAJ,CAAwBN,KAAxB,EAA+B,KAA/B,CAAd;;AAEA;;AAEA;;AAEAnF,mBAAG0F,MAAH,CAAUC,OAAV,CAAkBL,SAAlB,EAA6BtF,GAAG4F,WAAhC,EAA6C,UAAUC,KAAV,EAAiBC,WAAjB,EAA8B;;AAEvE;;AAEA,4BAAI,CAACD,KAAL,EAAY;;AAER;AACAT,uCAAOW,YAAP,CAAoB/F,GAAGQ,MAAvB,EAA+BsF,WAA/B,GAA8CA,WAA9C;AAEH;AAEJ,iBAXD;;AAaA9F,mBAAG0F,MAAH,CAAUC,OAAV,CAAkBH,OAAlB,EAA2BxF,GAAG4F,WAA9B,EAA2C,UAAUC,KAAV,EAAiBC,WAAjB,EAA8B;;AAErE,4BAAI,CAACD,KAAL,EAAY;;AAERR,2CAAWU,YAAX,CAAwB/F,GAAGQ,MAA3B,EAAmCsF,WAAnC,GAAkDA,WAAlD;AAEH;AAEJ,iBARD;AAUH,SA1cI;;AA4cL;AACAE,wBAAgB,wBAAWrE,GAAX,EAAgBC,GAAhB,EAAsB;;AAElC,qBAAKD,GAAL,GAAWA,GAAX;;AAEA,qBAAKC,GAAL,GAAWA,GAAX;AAEH,SAndI;;AAqdL;AACAqE,wBAAgB,0BAAc;;AAE1B,oBAAIC,MAAM;;AAEN,+BAAO,KAAKvE,GAFN;;AAIN,+BAAO,KAAKC;;AAJN,iBAAV;;AAQA,uBAAOsE,GAAP;AAEH,SAleI;;AAoeLC,mBAAW,qBAAc;;AAErB,qBAAKnE,IAAL,CAAUuB,OAAV;;AAEA;;AAEA;;AAEA;AAEH,SA9eI;;AAgfL;AACAjB,sBAAc,wBAAc;;AAExB,qBAAKtB,KAAL,CAAWgB,IAAX,CAAgBC,MAAhB,GAAyB,KAAzB;;AAEA,qBAAKjB,KAAL,CAAWgB,IAAX,CAAgBE,OAAhB,GAA0B,CAA1B;;AAEA,qBAAKjB,OAAL,CAAae,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;;AAEA,qBAAKhB,OAAL,CAAae,IAAb,CAAkBE,OAAlB,GAA4B,CAA5B;;AAEA,qBAAKhB,OAAL,CAAac,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;;AAEA,qBAAKf,OAAL,CAAac,IAAb,CAAkBE,OAAlB,GAA4B,CAA5B;;AAEA,qBAAKf,QAAL,CAAca,IAAd,CAAmBC,MAAnB,GAA4B,KAA5B;;AAEA,qBAAKd,QAAL,CAAca,IAAd,CAAmBE,OAAnB,GAA6B,CAA7B;AAEH,SAngBI;;AAqgBL;AACAkE,mBAAW,mBAAWC,MAAX,EAAoB;;AAE3B,qBAAKlE,OAAL,GAAekE,MAAf;AAEH,SA1gBI;;AA4gBLC,mBAAW,qBAAc;;AAErB,uBAAO,KAAKnE,OAAZ;AAEH,SAhhBI;;AAkhBLoE,0BAAkB,4BAAc;;AAE5B,uBAAO,KAAK1E,WAAZ;AAEH,SAthBI;;AAwhBL;AACA2E,4BAAoB,4BAAWC,aAAX,EAA2B;;AAE3C,qBAAKrE,cAAL,GAAsBqE,aAAtB;AAEH,SA7hBI;;AA+hBL;AACAC,6BAAqB,6BAAWC,aAAX,EAA2B;;AAE5C,qBAAKtE,cAAL,GAAsBsE,aAAtB;AAEH,SApiBI;;AAsiBLC,2BAAmB,6BAAa;;AAE5B,uBAAO,YAAP;AAEH,SA1iBI;;AA4iBLC,mBAAW,qBAAc;;AAErB,qBAAKxF,YAAL,CAAkBW,IAAlB,CAAuBC,MAAvB,GAAgC,KAAhC;;AAEA,qBAAKZ,YAAL,CAAkBW,IAAlB,CAAuBE,OAAvB,GAAiC,CAAjC;;AAEA,qBAAKd,OAAL,CAAaY,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;;AAEA,qBAAKb,OAAL,CAAaY,IAAb,CAAkBE,OAAlB,GAA4B,CAA5B;AAEH,SAtjBI;;AAwjBL4E,uBAAe,yBAAc;;AAEzB,qBAAKzF,YAAL,CAAkBW,IAAlB,CAAuBC,MAAvB,GAAgC,KAAhC;;AAEA,qBAAKZ,YAAL,CAAkBW,IAAlB,CAAuBE,OAAvB,GAAiC,CAAjC;;AAEA,qBAAKd,OAAL,CAAaY,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;;AAEA,qBAAKb,OAAL,CAAaY,IAAb,CAAkBE,OAAlB,GAA4B,GAA5B;AAEH;;AAlkBI,CAAT","file":"Animal_red.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\resources\\Script\\view\\games\\doushouqi","sourcesContent":["/**\r\n *  @brief: 粉色小动物\r\n *  @time:  2018-05-2\r\n *  @author: JiangTao\r\n */\r\n\r\nvar Com = require('Com')\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        node_obj: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n        sp_animal: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n        sp_icon: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        breakAni: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        dieAni: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        nodeBreak: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        sp_up: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_down: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_left: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_right: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_self: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        sp_tip_break: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        audioClip: {\r\n            default: null,\r\n            url: cc.AudioClip,\r\n        },\r\n\r\n        is_big: false,\r\n\r\n        is_break: false,\r\n\r\n        row:   -1,\r\n\r\n        col:   -1,\r\n\r\n        animalIndex: -1,\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n        // this.init();\r\n\r\n\r\n\r\n    },\r\n\r\n    init: function () {\r\n\r\n        this.sp_self.node.active = false;\r\n\r\n        this.sp_tip_break.node.opacity = 0;\r\n\r\n        this.sp_tip_break.node.active = false;\r\n\r\n        this.sp_tip_break.node.opacity = 0;\r\n\r\n        this.is_big = false;    //当前是否被选中\r\n\r\n        this.is_self = false;   //是否拥有粉色动物\r\n\r\n        this._touchCallback = null;\r\n\r\n        this._breakCallback = null;\r\n\r\n        this.row = -1;\r\n\r\n        this.col = -1;\r\n\r\n        this.onHideTipDir();\r\n\r\n        this.onLoadAudio();\r\n\r\n    },\r\n\r\n    onLoadAudio: function (  ) {\r\n\r\n\r\n\r\n    },\r\n\r\n    // 监听点击事件\r\n    addTouchListener: function ( event, customEventData ) {\r\n\r\n        // console.log(\"event ==== \", customEventData);\r\n        \r\n        // if ( this.is_big ) {\r\n\r\n        //     this.onRunSmall();\r\n\r\n        //     if ( this._touchCallback ) {\r\n\r\n        //         this._touchCallback( this.row, this.col, \"Animal_pink\", false );\r\n\r\n        //     }\r\n\r\n        // }else{\r\n\r\n        // //     this.onRunBig();\r\n\r\n        //     if ( this._touchCallback ) {\r\n\r\n        //         this._touchCallback( this.row, this.col, \"Animal_pink\", true );\r\n\r\n        //     }\r\n\r\n        // }\r\n\r\n        \r\n\r\n        if ( customEventData == \"break\" ) {\r\n\r\n            // this.playAnimation();\r\n            if ( this._breakCallback ) {\r\n\r\n                this._breakCallback( this.row, this.col, \"Animal_red\" );\r\n\r\n            }\r\n\r\n        } else if ( customEventData == \"red\" ) {\r\n\r\n            if ( this.is_big ) {\r\n\r\n                this.onRunSmall();\r\n\r\n                if ( this._touchCallback ) {\r\n\r\n                    this._touchCallback( this.row, this.col, \"Animal_red\", false );\r\n    \r\n                }\r\n\r\n            } else {\r\n\r\n                // this.onRunBig();\r\n\r\n                if ( this._touchCallback ) {\r\n\r\n                    this._touchCallback( this.row, this.col, \"Animal_red\", true );\r\n    \r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        \r\n    },\r\n\r\n    // 播放爆开动画\r\n    playAnimation: function ( animationCall ) {\r\n\r\n        var animState = this.breakAni.play('break');\r\n\r\n        var self = this;\r\n\r\n        function onFinished (  ) {\r\n\r\n            console.log( \"onFinished\" );\r\n\r\n            self.is_break = true;\r\n\r\n            self.nodeBreak.destroy();\r\n\r\n            // 显示小动物\r\n            self.sp_animal.node.active = true;\r\n\r\n            self.sp_animal.node.opacity = 255;\r\n\r\n            self.sp_icon.node.active = true;\r\n\r\n            self.sp_icon.node.opacity = 255;\r\n\r\n            // if ( self._breakCallback ) {\r\n\r\n            //     self._breakCallback( self.row, self.col );\r\n\r\n            // }\r\n\r\n            if ( animationCall ) {\r\n\r\n                animationCall( self.row, self.col );\r\n\r\n            }\r\n\r\n            Com.onPlayEffect(self.animalIndex);\r\n\r\n        };\r\n\r\n        animState.on('finished',  onFinished,  this.breakAni);\r\n\r\n    },\r\n\r\n    // 变大\r\n    onRunBig: function (   ) {\r\n\r\n        function bigFinishCall () {\r\n\r\n            this.is_big = true;\r\n\r\n        }\r\n        // v cc.scaleTo(0.05, 1.1)\r\n        var seq =   cc.sequence(cc.moveTo(0.05, cc.p(0, 14)), \r\n                        cc.scaleTo(0.05, 1.1),\r\n                        cc.callFunc(bigFinishCall, this, this.node_obj));\r\n\r\n        this.node_obj.node.runAction(seq);\r\n\r\n    },\r\n\r\n    // 缩小\r\n    onRunSmall: function (   ) {\r\n\r\n        function smallFinishCall () {\r\n\r\n            this.is_big = false;\r\n\r\n            // this.onHideTipDir();\r\n\r\n        }\r\n        //cc.scaleTo(0.05, 1)\r\n        var seq =   cc.sequence(cc.moveTo(0.05, cc.p(0, 4)), \r\n                        cc.scaleTo(0.05, 1),\r\n                        cc.callFunc(smallFinishCall, this, this.node_obj));\r\n\r\n        this.node_obj.node.runAction(seq);\r\n\r\n    },\r\n\r\n    //移动位置 \r\n    /**\r\n     * @brief: 移动\r\n     * @targetPos: 移动后的位置\r\n     * @row: 被吃掉棋子的横坐标\r\n     * @col：被吃的棋子的纵坐标\r\n     * @callback: 移动后的回调函数\r\n     */\r\n    onMoveToTarget: function ( targetPos, row, col, callback ) {\r\n\r\n        var self = this;\r\n\r\n        function moveFinishCall () {\r\n\r\n            if ( callback ) {\r\n\r\n                callback( row, col );\r\n\r\n            }\r\n\r\n            // this.onRunSmall();\r\n            self.is_big = false;\r\n\r\n            var scale = cc.scaleTo(0.05, 1);\r\n\r\n            self.node_obj.node.runAction( scale );\r\n\r\n        };\r\n\r\n        // function moveEndFinishCall (  ) {\r\n\r\n        //     this.onRunSmall();\r\n\r\n        // };\r\n\r\n        // // 计算当前移动的方向是x 方向 还是y方向\r\n        // console.log( \" x , y \", this.node.x, this.node.y );\r\n\r\n        // console.log( \" x , y \", targetPos.x, targetPos.y );\r\n\r\n        // var xDir = targetPos.x - this.node.x;\r\n\r\n        // var yDir = targetPos.y - this.node.y;\r\n\r\n        // if ( xDir == 0 ) {\r\n\r\n        //     // 纵向移动\r\n        //     xDir = targetPos.x;\r\n\r\n        //     if ( yDir > 0 ) {\r\n\r\n        //         yDir = targetPos.y - 20;\r\n\r\n        //     } else if ( yDir < 0 ) {\r\n\r\n        //         yDir = targetPos.y + 10;\r\n\r\n        //     }\r\n\r\n        // } else if ( yDir == 0) {\r\n\r\n        //     // 横向移动\r\n        //     yDir = targetPos.y;\r\n\r\n        //     if ( xDir > 0 ) {\r\n\r\n        //         xDir = targetPos.x - 20;\r\n\r\n        //     } else if ( xDir < 0 ) {\r\n\r\n        //         xDir = targetPos.x + 10;\r\n\r\n        //     }\r\n\r\n        // }\r\n\r\n        // var moveCall = cc.moveTo(0.2, cc.p(xDir, yDir));\r\n\r\n        var moveEnd  = cc.moveTo(0.2, cc.p(targetPos.x, targetPos.y))\r\n\r\n        // moveCall, \r\n        //                         cc.callFunc(moveFinishCall, this, this.node),\r\n\r\n        var seq =   cc.sequence(moveEnd,\r\n                                cc.callFunc(moveFinishCall, this, this.node));\r\n\r\n        this.node.runAction(seq);\r\n\r\n    },\r\n\r\n    /**\r\n     * 显示可以操作的对象\r\n     */\r\n    onOptionalObj: function (  ) {\r\n\r\n        if ( this.is_break ) {\r\n\r\n            this.sp_tip_break.node.active = false;\r\n\r\n            this.sp_tip_break.node.opacity = 0;\r\n\r\n            this.sp_self.node.active = true;\r\n\r\n            this.sp_self.node.opacity = 255;\r\n\r\n        } else {\r\n\r\n            this.sp_tip_break.node.active = true;\r\n\r\n            this.sp_tip_break.node.opacity = 255;\r\n\r\n            this.sp_self.node.active = false;\r\n\r\n            this.sp_self.node.opacity = 0;\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 获取当前对象是否变大了\r\n    getAnimalIsBig: function (  ) {\r\n\r\n        return this.is_big;\r\n\r\n    },\r\n\r\n    // 获取当前对象的箱子是否破裂\r\n    getAnimalIsBreak: function (  ) {\r\n\r\n        return this.is_break;\r\n\r\n    },\r\n\r\n    onSetLocalZorder: function ( zorder ) {\r\n\r\n        this.node.setLocalZOrder( zorder );\r\n\r\n    },\r\n\r\n    // 根据index变换资源 1-8\r\n    onLoadAnimal: function ( index ) {\r\n\r\n        // console.log(\" pink **************** \", index);\r\n\r\n        this.animalIndex = index;\r\n\r\n        var animal = this.sp_animal;\r\n\r\n        var animalIcon = this.sp_icon;\r\n\r\n        var urlAnimal = Com.onGetAnimalUrl( index );\r\n\r\n        var urlIcon = Com.onGetAnimalIconUrl( index, false );\r\n\r\n        // console.log(\" url **************** \", urlAnimal);\r\n\r\n        // console.log(\" icon **************** \", urlIcon);\r\n\r\n        cc.loader.loadRes(urlAnimal, cc.SpriteFrame, function (error, spriteFrame) {\r\n\r\n            // cc.log('Error url [' + error + ']');\r\n\r\n            if (!error) {\r\n\r\n                // myNode.getComponent(cc.Sprite)\r\n                animal.getComponent(cc.Sprite).spriteFrame  = spriteFrame;\r\n\r\n            }\r\n\r\n        });\r\n\r\n        cc.loader.loadRes(urlIcon, cc.SpriteFrame, function (error, spriteFrame) {\r\n\r\n            if (!error) {\r\n\r\n                animalIcon.getComponent(cc.Sprite).spriteFrame  = spriteFrame;\r\n\r\n            }\r\n\r\n        });\r\n\r\n    },\r\n\r\n    //  设置行 列坐标\r\n    onSetRowAndCol: function ( row, col ) {\r\n\r\n        this.row = row;\r\n\r\n        this.col = col;\r\n\r\n    },\r\n\r\n    // 获取行 列坐标\r\n    onGetRowAndCol: function (  ) {\r\n\r\n        var obj = {\r\n\r\n            \"row\": this.row,\r\n\r\n            \"col\": this.col,\r\n\r\n        };\r\n\r\n        return obj;\r\n\r\n    },\r\n\r\n    onDestory: function (  ) {\r\n\r\n        this.node.destroy();\r\n\r\n        // this.node_obj.node.active = false;\r\n\r\n        // this.node_obj.node.opacity = 0;\r\n\r\n        // this.playDieAnimation();\r\n\r\n    },\r\n\r\n    // 隐藏四个方向小标\r\n    onHideTipDir: function (  ) {\r\n\r\n        this.sp_up.node.active = false;\r\n\r\n        this.sp_up.node.opacity = 0;\r\n\r\n        this.sp_down.node.active = false;\r\n\r\n        this.sp_down.node.opacity = 0;\r\n\r\n        this.sp_left.node.active = false;\r\n\r\n        this.sp_left.node.opacity = 0;\r\n\r\n        this.sp_right.node.active = false;\r\n\r\n        this.sp_right.node.opacity = 0;\r\n\r\n    },\r\n\r\n    // \r\n    onSetSelf: function ( isSelf ) {\r\n\r\n        this.is_self = isSelf;\r\n\r\n    },\r\n\r\n    onGetSelf: function (  ) {\r\n\r\n        return this.is_self;\r\n\r\n    },\r\n\r\n    onGetAnimalIndex: function (  ) {\r\n\r\n        return this.animalIndex;\r\n\r\n    },\r\n\r\n    // 设置回调函数\r\n    onSetTouchCallback: function ( touchcallback ) {\r\n\r\n        this._touchCallback = touchcallback;\r\n\r\n    },\r\n\r\n    // 设置回调函数\r\n    onBreakBombCallback: function ( breakcallback ) {\r\n\r\n        this._breakCallback = breakcallback;\r\n\r\n    },\r\n\r\n    onGetComponentStr: function ( ) {\r\n\r\n        return \"Animal_red\";\r\n\r\n    },\r\n\r\n    onHideTip: function (  ) {\r\n\r\n        this.sp_tip_break.node.active = false;\r\n\r\n        this.sp_tip_break.node.opacity = 0;\r\n\r\n        this.sp_self.node.active = false;\r\n\r\n        this.sp_self.node.opacity = 0;\r\n\r\n    },\r\n\r\n    onShowSelfTip: function (  ) {\r\n\r\n        this.sp_tip_break.node.active = false;\r\n\r\n        this.sp_tip_break.node.opacity = 0;\r\n\r\n        this.sp_self.node.active = true;\r\n\r\n        this.sp_self.node.opacity = 255;\r\n\r\n    },\r\n\r\n});\r\n\r\n"]}