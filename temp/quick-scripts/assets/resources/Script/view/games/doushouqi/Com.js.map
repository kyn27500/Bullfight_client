{"version":3,"sources":["Com.js"],"names":["onRandomNum","Min","Max","Range","Rand","Math","random","num","floor","_allAnimalNames","gender_gril","gender_boy","audioList","animalList","blueAnimalList","redAnimalList","onGetAnimalUrl","index","onGetAnimalIconUrl","isBlue","_iconUrl","onGenderImg","gender","onLoadAudio","cc","loader","loadResDir","err","assets","i","length","element","nameList","split","onAnimalLoaded","errorMessage","spriteFrames","urlList","log","SpriteFrame","onBlueIconLoaded","onRedIconLoaded","effectList","onPlayGameEffect","id","audioName","audioEngine","playEffect","onPlayEffect","isAnimal","transID","onGetBottomImg","colorStr","imgUrl","bottom","mask","setItem","jsonName","baseData","JSON","stringify","sys","localStorage","getItem","baseDataa","parse","deleteItem","removeItem","module","exports"],"mappings":"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","file":"Com.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\resources\\Script\\view\\games\\doushouqi","sourcesContent":["/*\r\n*   @brief: 工具函数\r\n*   @time:  2018-4-10\r\n*   @author:JiangTao  \r\n*/\r\n\r\nfunction onRandomNum(Min, Max) {\r\n    var Range = Max - Min;\r\n    var Rand = Math.random();\r\n    var num = Min + Math.floor(Rand * Range); //舍去\r\n    return num;\r\n}\r\n\r\nvar _allAnimalNames = [\"elephant\", \"lion\", \"tiger\", \"leopard\", \r\n                        \"wolf\", \"dog\", \"cat\", \"mouse\"];\r\n\r\nvar gender_gril     = \"com/img_girl\";\r\n\r\nvar gender_boy      = \"com/img_boy\";\r\n\r\nvar audioList       = [];\r\n\r\nvar animalList      = [];\r\n\r\nvar blueAnimalList  = [];\r\n\r\nvar redAnimalList   = [];\r\n\r\nfunction onGetAnimalUrl ( index ) {\r\n\r\n    return animalList[index-1];\r\n\r\n}\r\n\r\nfunction onGetAnimalIconUrl ( index, isBlue ) {\r\n\r\n    var _iconUrl = '';\r\n\r\n    if ( isBlue ) {\r\n\r\n        _iconUrl = blueAnimalList[index-1];\r\n\r\n    } else {\r\n\r\n        _iconUrl = redAnimalList[index-1];\r\n\r\n    }\r\n\r\n    return _iconUrl;\r\n\r\n}\r\n\r\n// 性别图片\r\nfunction onGenderImg ( gender ) {\r\n\r\n    if ( gender == 1 ) {\r\n\r\n        return gender_gril;\r\n\r\n    } else {\r\n\r\n        return gender_boy;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction onLoadAudio (  ) {\r\n\r\n    // 动物的声音音效\r\n\r\n    cc.loader.loadResDir(\"games/doushouqi/sound\", (err, assets) => {\r\n\r\n        for (var i = 0; i < assets.length; ++i) {\r\n\r\n            if (typeof assets[i] === 'string') {\r\n\r\n                const element = assets[i];\r\n\r\n                var nameList = element.split(\"/\");\r\n\r\n                audioList[nameList[nameList.length - 1]] = assets[i];\r\n\r\n            }\r\n\r\n        }\r\n\r\n    });\r\n\r\n\r\n    // 动物资源\r\n    var onAnimalLoaded = function (errorMessage, spriteFrames, urlList) {\r\n\r\n        //检查失败原因\r\n        if (errorMessage) { cc.log('加载失败, 原因:' + errorMessage); return; }\r\n\r\n        animalList = spriteFrames;\r\n\r\n    };\r\n    //這邊才是真的使用cc.loader進行載入，並且呼叫我們上面寫的方法\r\n    cc.loader.loadResDir(\"games/doushouqi/animal/\", cc.SpriteFrame, onAnimalLoaded);\r\n\r\n    var onBlueIconLoaded = function (errorMessage, spriteFrames, urlList) {\r\n\r\n        //检查失败原因\r\n        if (errorMessage) { cc.log('加载失败, 原因:' + errorMessage); return; }\r\n\r\n        blueAnimalList = spriteFrames;\r\n\r\n    };\r\n    //這邊才是真的使用cc.loader進行載入，並且呼叫我們上面寫的方法\r\n    cc.loader.loadResDir(\"games/doushouqi/animal_icon/blue/\", cc.SpriteFrame, onBlueIconLoaded);\r\n\r\n    var onRedIconLoaded = function (errorMessage, spriteFrames, urlList) {\r\n\r\n        //检查失败原因\r\n        if (errorMessage) { cc.log('加载失败, 原因:' + errorMessage); return; }\r\n\r\n        redAnimalList = spriteFrames;\r\n\r\n    };\r\n    //這邊才是真的使用cc.loader進行載入，並且呼叫我們上面寫的方法\r\n    cc.loader.loadResDir(\"games/doushouqi/animal_icon/red/\", cc.SpriteFrame, onRedIconLoaded);\r\n\r\n}\r\n\r\n\r\n/**\r\n * index:0 break:爆炸动画\r\n * index:1 move:移动\r\n * index:2 selected_cancel:选择取消\r\n * index:3 killSelf:自杀（被吃）\r\n * index:4 eat:吃别人\r\n * index:5 doubleKill:同归于尽\r\n * index:6 downTime:倒计时\r\n * index:7 draw:平局音效\r\n * index:8 win:胜利\r\n * index:9 los:失败音效\r\n */\r\n\r\nvar effectList = [\"break\", \"move\", \"selected_cancel\", \"killSelf\", \"eat\", \"doubleKill\", \"downTime\", \"draw\",\r\n\"win\", \"los\"];\r\n\r\nfunction onPlayGameEffect ( id ) {\r\n\r\n    var audioName = effectList[id] + \".mp3\";\r\n\r\n    cc.audioEngine.playEffect( audioList[audioName] );\r\n\r\n}\r\n\r\nfunction onPlayEffect ( id, isAnimal = true ) {\r\n\r\n    var transID = id;\r\n\r\n    if ( isAnimal ) {\r\n\r\n        if ( id > 10 ) {\r\n\r\n            transID = id - 10;\r\n    \r\n        }\r\n    \r\n        cc.audioEngine.playEffect( audioList[_allAnimalNames[transID-1]+\".mp3\"]);\r\n\r\n    } \r\n\r\n}\r\n\r\nfunction onGetBottomImg ( colorStr ) {\r\n\r\n    var imgUrl = { bottom:\"\", mask:\"\" };\r\n\r\n    if ( colorStr == \"Animal_blue\" ) {\r\n\r\n        imgUrl.bottom = \"games/doushouqi/game/dizuo_blue\";\r\n\r\n        imgUrl.mask = \"games/doushouqi/game/shadow_blue\";\r\n\r\n        return imgUrl;\r\n\r\n    } else {\r\n\r\n        imgUrl.bottom = \"games/doushouqi/game/dizuo_red\";\r\n\r\n        imgUrl.mask = \"games/doushouqi/game/shadow_red\";\r\n\r\n        return imgUrl;\r\n\r\n    }\r\n\r\n}\r\n\r\n// var baseData = [{firstAnimal:-1}];\r\n\r\nfunction setItem(jsonName)\r\n{\r\n    var baseData = JSON.stringify(jsonName);\r\n    cc.sys.localStorage.setItem(\"baseData\", baseData);\r\n}\r\n /*\r\n  * 读取基础数据\r\n  * 还回json格式数据\r\n  */\r\n function getItem (  )\r\n {\r\n    //  var baseData1 = JSON.stringify(baseData); //将json格式转换成string\r\n    //  sys.localStorage.setItem(\"baseData\", baseData1); //将数据存储在本地\r\n     var baseDataa = cc.sys.localStorage.getItem(\"baseData\"); //从本地读取数据\r\n     baseDataa = JSON.parse(baseDataa); //将string转换成json\r\n     return baseDataa;\r\n };\r\n /*\r\n  * 删除数据\r\n  */\r\n function deleteItem (  )\r\n {\r\n    cc.sys.localStorage.removeItem(\"baseData\");\r\n }\r\n\r\nmodule.exports = {\r\n    \r\n    onRandomNum: onRandomNum,\r\n    \r\n    onGetAnimalIconUrl: onGetAnimalIconUrl,\r\n\r\n    onGetAnimalUrl: onGetAnimalUrl,\r\n\r\n    onGenderImg: onGenderImg,\r\n\r\n    onLoadAudio: onLoadAudio,\r\n\r\n    onPlayEffect: onPlayEffect,\r\n\r\n    onGetBottomImg: onGetBottomImg,\r\n\r\n    setItem: setItem,\r\n\r\n    getItem: getItem,\r\n\r\n    deleteItem: deleteItem,\r\n\r\n    onPlayGameEffect, onPlayGameEffect,\r\n\r\n};"]}