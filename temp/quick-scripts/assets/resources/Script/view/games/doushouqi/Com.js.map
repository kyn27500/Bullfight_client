{"version":3,"sources":["Com.js"],"names":["onRandomNum","Min","Max","Range","Rand","Math","random","num","floor","_allAnimalNames","gender_gril","gender_boy","audioList","animalList","blueAnimalList","redAnimalList","onGetAnimalUrl","index","onGetAnimalIconUrl","isBlue","_iconUrl","onGenderImg","gender","onLoadAudio","cc","loader","loadResDir","err","assets","i","length","element","nameList","split","onAnimalLoaded","errorMessage","spriteFrames","urlList","log","SpriteFrame","onBlueIconLoaded","onRedIconLoaded","effectList","onPlayGameEffect","id","audioName","audioEngine","playEffect","onPlayEffect","isAnimal","transID","onGetBottomImg","colorStr","imgUrl","bottom","mask","setItem","jsonName","baseData","JSON","stringify","sys","localStorage","getItem","baseDataa","parse","deleteItem","removeItem","module","exports"],"mappings":"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","file":"Com.js","sourceRoot":"../../../../../../../../assets/resources/Script/view/games/doushouqi","sourcesContent":["/*\n*   @brief: 工具函数\n*   @time:  2018-4-10\n*   @author:JiangTao  \n*/\n\nfunction onRandomNum(Min, Max) {\n    var Range = Max - Min;\n    var Rand = Math.random();\n    var num = Min + Math.floor(Rand * Range); //舍去\n    return num;\n}\n\nvar _allAnimalNames = [\"elephant\", \"lion\", \"tiger\", \"leopard\", \n                        \"wolf\", \"dog\", \"cat\", \"mouse\"];\n\nvar gender_gril     = \"com/img_girl\";\n\nvar gender_boy      = \"com/img_boy\";\n\nvar audioList       = [];\n\nvar animalList      = [];\n\nvar blueAnimalList  = [];\n\nvar redAnimalList   = [];\n\nfunction onGetAnimalUrl ( index ) {\n\n    return animalList[index-1];\n\n}\n\nfunction onGetAnimalIconUrl ( index, isBlue ) {\n\n    var _iconUrl = '';\n\n    if ( isBlue ) {\n\n        _iconUrl = blueAnimalList[index-1];\n\n    } else {\n\n        _iconUrl = redAnimalList[index-1];\n\n    }\n\n    return _iconUrl;\n\n}\n\n// 性别图片\nfunction onGenderImg ( gender ) {\n\n    if ( gender == 1 ) {\n\n        return gender_gril;\n\n    } else {\n\n        return gender_boy;\n\n    }\n\n}\n\n\nfunction onLoadAudio (  ) {\n\n    // 动物的声音音效\n\n    cc.loader.loadResDir(\"games/doushouqi/sound\", (err, assets) => {\n\n        for (var i = 0; i < assets.length; ++i) {\n\n            if (typeof assets[i] === 'string') {\n\n                const element = assets[i];\n\n                var nameList = element.split(\"/\");\n\n                audioList[nameList[nameList.length - 1]] = assets[i];\n\n            }\n\n        }\n\n    });\n\n\n    // 动物资源\n    var onAnimalLoaded = function (errorMessage, spriteFrames, urlList) {\n\n        //检查失败原因\n        if (errorMessage) { cc.log('加载失败, 原因:' + errorMessage); return; }\n\n        animalList = spriteFrames;\n\n    };\n    //這邊才是真的使用cc.loader進行載入，並且呼叫我們上面寫的方法\n    cc.loader.loadResDir(\"games/doushouqi/animal/\", cc.SpriteFrame, onAnimalLoaded);\n\n    var onBlueIconLoaded = function (errorMessage, spriteFrames, urlList) {\n\n        //检查失败原因\n        if (errorMessage) { cc.log('加载失败, 原因:' + errorMessage); return; }\n\n        blueAnimalList = spriteFrames;\n\n    };\n    //這邊才是真的使用cc.loader進行載入，並且呼叫我們上面寫的方法\n    cc.loader.loadResDir(\"games/doushouqi/animal_icon/blue/\", cc.SpriteFrame, onBlueIconLoaded);\n\n    var onRedIconLoaded = function (errorMessage, spriteFrames, urlList) {\n\n        //检查失败原因\n        if (errorMessage) { cc.log('加载失败, 原因:' + errorMessage); return; }\n\n        redAnimalList = spriteFrames;\n\n    };\n    //這邊才是真的使用cc.loader進行載入，並且呼叫我們上面寫的方法\n    cc.loader.loadResDir(\"games/doushouqi/animal_icon/red/\", cc.SpriteFrame, onRedIconLoaded);\n\n}\n\n\n/**\n * index:0 break:爆炸动画\n * index:1 move:移动\n * index:2 selected_cancel:选择取消\n * index:3 killSelf:自杀（被吃）\n * index:4 eat:吃别人\n * index:5 doubleKill:同归于尽\n * index:6 downTime:倒计时\n * index:7 draw:平局音效\n * index:8 win:胜利\n * index:9 los:失败音效\n */\n\nvar effectList = [\"break\", \"move\", \"selected_cancel\", \"killSelf\", \"eat\", \"doubleKill\", \"downTime\", \"draw\",\n\"win\", \"los\"];\n\nfunction onPlayGameEffect ( id ) {\n\n    var audioName = effectList[id] + \".mp3\";\n\n    cc.audioEngine.playEffect( audioList[audioName] );\n\n}\n\nfunction onPlayEffect ( id, isAnimal = true ) {\n\n    var transID = id;\n\n    if ( isAnimal ) {\n\n        if ( id > 10 ) {\n\n            transID = id - 10;\n    \n        }\n    \n        cc.audioEngine.playEffect( audioList[_allAnimalNames[transID-1]+\".mp3\"]);\n\n    } \n\n}\n\nfunction onGetBottomImg ( colorStr ) {\n\n    var imgUrl = { bottom:\"\", mask:\"\" };\n\n    if ( colorStr == \"Animal_blue\" ) {\n\n        imgUrl.bottom = \"games/doushouqi/game/dizuo_blue\";\n\n        imgUrl.mask = \"games/doushouqi/game/shadow_blue\";\n\n        return imgUrl;\n\n    } else {\n\n        imgUrl.bottom = \"games/doushouqi/game/dizuo_red\";\n\n        imgUrl.mask = \"games/doushouqi/game/shadow_red\";\n\n        return imgUrl;\n\n    }\n\n}\n\n// var baseData = [{firstAnimal:-1}];\n\nfunction setItem(jsonName)\n{\n    var baseData = JSON.stringify(jsonName);\n    cc.sys.localStorage.setItem(\"baseData\", baseData);\n}\n /*\n  * 读取基础数据\n  * 还回json格式数据\n  */\n function getItem (  )\n {\n    //  var baseData1 = JSON.stringify(baseData); //将json格式转换成string\n    //  sys.localStorage.setItem(\"baseData\", baseData1); //将数据存储在本地\n     var baseDataa = cc.sys.localStorage.getItem(\"baseData\"); //从本地读取数据\n     baseDataa = JSON.parse(baseDataa); //将string转换成json\n     return baseDataa;\n };\n /*\n  * 删除数据\n  */\n function deleteItem (  )\n {\n    cc.sys.localStorage.removeItem(\"baseData\");\n }\n\nmodule.exports = {\n    \n    onRandomNum: onRandomNum,\n    \n    onGetAnimalIconUrl: onGetAnimalIconUrl,\n\n    onGetAnimalUrl: onGetAnimalUrl,\n\n    onGenderImg: onGenderImg,\n\n    onLoadAudio: onLoadAudio,\n\n    onPlayEffect: onPlayEffect,\n\n    onGetBottomImg: onGetBottomImg,\n\n    setItem: setItem,\n\n    getItem: getItem,\n\n    deleteItem: deleteItem,\n\n    onPlayGameEffect, onPlayGameEffect,\n\n};"]}