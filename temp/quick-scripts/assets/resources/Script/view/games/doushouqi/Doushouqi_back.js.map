{"version":3,"sources":["Doushouqi_back.js"],"names":["Com","require","onfire","requestHandler","cc","Class","extends","Component","properties","sp_head_red","default","type","Sprite","sp_head_blue","node_table","Node","sp_tip","label_tip","Label","sp_alert","label_alert","label_red_btn","label_blue_btn","node_dir","sp_up","Animation","sp_down","sp_left","sp_right","sp_destory","sp_white","sp_red_time","sp_blue_time","label_red_time","label_blue_time","sp_test","SpriteFrame","nodeResult","animal_blue_Prefab","Prefab","animal_red_Prefab","empty_prefab","result_prefab","defalutTiem","count","onLoad","onLoadAudio","init","initUI","openUpdate","onOptionalTimeAni","onDestroy","start","node","active","scale","opacity","scaleY","onHideTipDir","setLocalZOrder","_blueAnimal","_redAnimal","_rand01","_blueSelf","_pinkSelf","_isShowTip","_isShowAlert","_isCanOptional","_optionalObj","_selectedPoint","_selectedObj","row","col","_compareState","eq","gt","lt","same","width","winSize","height","allPos","Vec2","allBtnEmpty","Button","pos","emptyNode","index","jndex","getChildByName","toString","position","tableNodes","onInitTable","onTouchListener","event","customEventData","console","log","onAddTip","onAddAlert","onHideAlert","onLoadHeadImg","onDelRepeatRandBlue","onDelRepeatRandPink","empty","btnEmpty","_animal","_rand0Count","_rand1Count","_componentStr","length","instantiate","addComponent","x","y","parent","getComponent","onSetRowAndCol","onSetTouchCallback","onEmptyTouchCallback","bind","rand01","onRandomNum","componentStr","onLoadAnimal","onSetSelf","isDie","animal","onBreakBombCallback","onBombTouchCallback","onTouchCallback","idx","randNum","push","splice","isSelected","onRunBig","onCheckRoundMove","onRunSmall","onCheckOptionalValid","onClearAlgorithm","onCheckAnimalSame","index0","index1","targetPos","onMoveToTarget","onMoveCallbackDel","playAnimation","onAnimaltionBreakCallback","onCheckOptionSelf","onResetStatus","onMoveCallback","selected0","selected1","onCheckCompare","delStrTarget","delStrSelected","onPlayDestoryAni","onDestory","delStr","selectedStr","onCheckResult","targetDie","closeUpdate","onSetOptionalTime","onRedBoardAni","onBlueBoardAni","onShowValidOptionalObj","isClear","targetObj","selectedIndex","onGetAnimalIndex","targetIndex","compareState","isSame","targetComStr","tempNode","comStr","getAnimalIsBreak","onShowSelfTip","onHideTip","onOptionalObj","getAnimalIsBig","blueCount","pinkCount","isResult","_playAnimCallback","onAddResultLayer","scheduleOnce","onClearTabel","onRestart","interval","repeat","delay","schedule","onTimeDownCallback","unschedule","onCanOptionalObj","obj","moveDir","up","down","left","right","isShowDir","onFindAnimalOfIndex","onTipMoveDirection","onRepeatAction","nodeObj","dirStr","animState","play","wrapMode","WrapMode","Loop","repeatCount","Infinity","onDestoryAnimation","self","onFinished","on","optionalObj","onFinishCallback","scale2","scaleTo","runAction","delayTime","seq","sequence","callFunc","scale1","onWhiteBoardAni","string","tipStr","onShowtip","onActionFinishCall","onHidetip","descStr","labelRedBtn","labelBlueBtn","onShowAlert","resutlLayer","onCallback","onInitUI","onSetGameResultInfo"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;AAMA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACA,IAAIC,SAAOD,QAAQ,QAAR,CAAX,EAAwC;AACxC,IAAIE,iBAAiBF,QAAQ,gBAAR,CAArB;;AAEAG,GAAGC,KAAH,CAAS;AACLC,iBAASF,GAAGG,SADP;;AAGLC,oBAAY;;AAERC,6BAAa;AACTC,iCAAS,IADA;AAETC,8BAAMP,GAAGQ;AAFA,iBAFL;;AAORC,8BAAc;AACVH,iCAAS,IADC;AAEVC,8BAAMP,GAAGQ;AAFC,iBAPN;;AAYRE,4BAAY;AACRJ,iCAAS,IADD;AAERC,8BAAMP,GAAGW;AAFD,iBAZJ;;AAiBRC,wBAAQ;AACJN,iCAAS,IADL;AAEJC,8BAAMP,GAAGQ;AAFL,iBAjBA;;AAsBRK,2BAAW;AACPP,iCAAS,IADF;AAEPC,8BAAMP,GAAGc;AAFF,iBAtBH;;AA2BRC,0BAAU;AACNT,iCAAQ,IADF;AAENC,8BAAKP,GAAGQ;AAFF,iBA3BF;;AAgCRQ,6BAAa;AACTV,iCAAQ,IADC;AAETC,8BAAKP,GAAGc;AAFC,iBAhCL;;AAqCR;AACAG,+BAAe;AACXX,iCAAQ,IADG;AAEXC,8BAAKP,GAAGc;AAFG,iBAtCP;;AA2CR;AACAI,gCAAgB;AACZZ,iCAAQ,IADI;AAEZC,8BAAKP,GAAGc;AAFI,iBA5CR;;AAiDRK,0BAAU;AACNb,iCAAS,IADH;AAENC,8BAAKP,GAAGW;AAFF,iBAjDF;;AAsDRS,uBAAO;AACHd,iCAAS,IADN;AAEHC,8BAAMP,GAAGqB;AAFN,iBAtDC;;AA2DRC,yBAAS;AACLhB,iCAAS,IADJ;AAELC,8BAAMP,GAAGqB;AAFJ,iBA3DD;;AAgERE,yBAAS;AACLjB,iCAAS,IADJ;AAELC,8BAAMP,GAAGqB;AAFJ,iBAhED;;AAqERG,0BAAU;AACNlB,iCAAS,IADH;AAENC,8BAAMP,GAAGqB;AAFH,iBArEF;;AA0ERI,4BAAY;AACRnB,iCAAS,IADD;AAERC,8BAAMP,GAAGqB;AAFD,iBA1EJ;;AA+ER;AACAK,0BAAU;AACNpB,iCAAS,IADH;AAENC,8BAAMP,GAAGQ;AAFH,iBAhFF;;AAqFR;AACAmB,6BAAa;AACTrB,iCAAS,IADA;AAETC,8BAAMP,GAAGQ;AAFA,iBAtFL;;AA2FR;AACAoB,8BAAc;AACVtB,iCAAS,IADC;AAEVC,8BAAMP,GAAGQ;AAFC,iBA5FN;;AAiGR;AACAqB,gCAAgB;AACZvB,iCAAS,IADG;AAEZC,8BAAMP,GAAGc;AAFG,iBAlGR;;AAuGR;AACAgB,iCAAiB;AACbxB,iCAAS,IADI;AAEbC,8BAAMP,GAAGc;AAFI,iBAxGT;;AA6GRiB,yBAAU;AACNzB,iCAAS,IADH;AAENC,8BAAMP,GAAGgC;AAFH,iBA7GF;;AAkHRC,4BAAY;AACR3B,iCAAS,IADD;AAERC,8BAAMP,GAAGW;AAFD,iBAlHJ;;AAuHRuB,oCAAoBlC,GAAGmC,MAvHf,EAuH4B;;AAEpCC,mCAAmBpC,GAAGmC,MAzHd,EAyH4B;;AAEpCE,8BAAcrC,GAAGmC,MA3HT,EA2H4B;;AAEpCG,+BAAetC,GAAGmC,MA7HV,EA6H4B;;AAEpCI,6BAAY,EA/HJ,EA+HY;;AAEpBC,uBAAO,EAjIC,CAiIY;;AAjIZ,SAHP;;AAwIL;;AAEAC,cA1IK,oBA0IK;;AAEN7C,oBAAI8C,WAAJ;;AAEA,qBAAKC,IAAL;;AAEA,qBAAKC,MAAL;;AAEA,qBAAKC,UAAL;;AAEA,qBAAKC,iBAAL;AAEH,SAtJI;;;AAwJL;AACAC,iBAzJK,uBAyJM,CAEV,CA3JI;AA6JLC,aA7JK,mBA6JI,CAIR,CAjKI;;;AAmKL;;AAEAJ,gBAAQ,kBAAc;;AAElB,qBAAKhC,MAAL,CAAYqC,IAAZ,CAAiBC,MAAjB,GAA0B,IAA1B;;AAEA,qBAAKtC,MAAL,CAAYqC,IAAZ,CAAiBE,KAAjB,GAAyB,CAAzB;;AAEA,qBAAKpC,QAAL,CAAckC,IAAd,CAAmBC,MAAnB,GAA4B,IAA5B;;AAEA,qBAAKnC,QAAL,CAAckC,IAAd,CAAmBE,KAAnB,GAA2B,CAA3B;;AAEA,qBAAK1B,UAAL,CAAgBwB,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;;AAEA,qBAAKzB,UAAL,CAAgBwB,IAAhB,CAAqBG,OAArB,GAA+B,CAA/B;;AAEA,qBAAK1B,QAAL,CAAcuB,IAAd,CAAmBC,MAAnB,GAA4B,IAA5B;;AAEA,qBAAKxB,QAAL,CAAcuB,IAAd,CAAmBG,OAAnB,GAA6B,GAA7B;;AAEA,qBAAKzB,WAAL,CAAiBsB,IAAjB,CAAsBC,MAAtB,GAA+B,IAA/B;;AAEA,qBAAKvB,WAAL,CAAiBsB,IAAjB,CAAsBG,OAAtB,GAAgC,GAAhC;;AAEA,qBAAKzB,WAAL,CAAiBsB,IAAjB,CAAsBI,MAAtB,GAA+B,CAA/B;;AAEA,qBAAKzB,YAAL,CAAkBqB,IAAlB,CAAuBC,MAAvB,GAAgC,IAAhC;;AAEA,qBAAKtB,YAAL,CAAkBqB,IAAlB,CAAuBG,OAAvB,GAAiC,GAAjC;;AAEA,qBAAKxB,YAAL,CAAkBqB,IAAlB,CAAuBI,MAAvB,GAAgC,CAAhC;;AAEA,qBAAKC,YAAL;;AAEA,qBAAKnC,QAAL,CAAcoC,cAAd,CAA6B,GAA7B;;AAEA,qBAAK9B,UAAL,CAAgBwB,IAAhB,CAAqBM,cAArB,CAAoC,GAApC;AAEH,SAzMI;;AA2ML;AACAZ,cAAM,gBAAc;;AAEhB,qBAAKa,WAAL,GAAmB,EAAnB;;AAEA,qBAAKC,UAAL,GAAkB,EAAlB;;AAEA,qBAAKC,OAAL,GAAmB,CAAC,CAApB;;AAEA,qBAAKC,SAAL,GAAmB,IAAnB;;AAEA,qBAAKC,SAAL,GAAmB,KAAnB;;AAEA,qBAAKC,UAAL,GAAmB,KAAnB;;AAEA,qBAAKC,YAAL,GAAoB,KAApB;;AAEA,qBAAKC,cAAL,GAAsB,KAAtB,CAhBgB,CAgBoB;;AAEpC,qBAAKC,YAAL,GAAmB,aAAnB,CAlBgB,CAkBoB;;AAEpC,qBAAKC,cAAL,GAAsB,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN,CAAtB,CApBgB,CAoBoB;;AAEpC;AACA,qBAAKC,YAAL,GAAmB,EAACC,KAAI,CAAC,CAAN,EAASC,KAAI,CAAC,CAAd,EAAiB5B,OAAM,CAAvB,EAAnB,CAvBgB,CAuB8B;;AAE9C;AACA,qBAAK6B,aAAL,GAAqB,EAAEC,IAAG,CAAL,EAAQC,IAAG,CAAX,EAAcC,IAAG,CAAjB,EAAoBC,MAAK,CAAzB,EAArB;;AAEA,qBAAKC,KAAL,GAAa1E,GAAG2E,OAAH,CAAWD,KAAxB;;AAEA,qBAAKE,MAAL,GAAc5E,GAAG2E,OAAH,CAAWC,MAAzB;;AAEA;AACA,qBAAKC,MAAL,GAAgB,CAAI,CAAC7E,GAAG8E,IAAJ,EAAU9E,GAAG8E,IAAb,EAAmB9E,GAAG8E,IAAtB,EAA4B9E,GAAG8E,IAA/B,CAAJ,EACI,CAAC9E,GAAG8E,IAAJ,EAAU9E,GAAG8E,IAAb,EAAmB9E,GAAG8E,IAAtB,EAA4B9E,GAAG8E,IAA/B,CADJ,EAEI,CAAC9E,GAAG8E,IAAJ,EAAU9E,GAAG8E,IAAb,EAAmB9E,GAAG8E,IAAtB,EAA4B9E,GAAG8E,IAA/B,CAFJ,EAGI,CAAC9E,GAAG8E,IAAJ,EAAU9E,GAAG8E,IAAb,EAAmB9E,GAAG8E,IAAtB,EAA4B9E,GAAG8E,IAA/B,CAHJ,CAAhB;;AAMA,qBAAKC,WAAL,GAAmB,CAEC,CAAC/E,GAAGgF,MAAJ,EAAYhF,GAAGgF,MAAf,EAAuBhF,GAAGgF,MAA1B,EAAkChF,GAAGgF,MAArC,CAFD,EAGC,CAAChF,GAAGgF,MAAJ,EAAYhF,GAAGgF,MAAf,EAAuBhF,GAAGgF,MAA1B,EAAkChF,GAAGgF,MAArC,CAHD,EAIC,CAAChF,GAAGgF,MAAJ,EAAYhF,GAAGgF,MAAf,EAAuBhF,GAAGgF,MAA1B,EAAkChF,GAAGgF,MAArC,CAJD,EAKC,CAAChF,GAAGgF,MAAJ,EAAYhF,GAAGgF,MAAf,EAAuBhF,GAAGgF,MAA1B,EAAkChF,GAAGgF,MAArC,CALD,CAAnB;;AASA,oBAAIC,MAAM,IAAV;;AAEA,oBAAIC,YAAY,IAAhB;;AAEA,qBAAK,IAAIC,QAAQ,CAAjB,EAAoBA,QAAQ,CAA5B,EAA+BA,OAA/B,EAAwC;;AAEpC,6BAAK,IAAIC,QAAQ,CAAjB,EAAoBA,QAAQ,CAA5B,EAA+BA,OAA/B,EAAyC;;AAErCF,4CAAY,KAAKxE,UAAL,CAAgB2E,cAAhB,CAA+B,cAAcF,MAAMG,QAAN,EAAd,GAAiCF,MAAME,QAAN,EAAhE,CAAZ;;AAEAL,sCAAMC,UAAUK,QAAhB;;AAEA,qCAAKV,MAAL,CAAYM,KAAZ,EAAmBC,KAAnB,IAA4BH,GAA5B;AAEH;AAEJ;;AAED;AACA,qBAAKO,UAAL,GAAoB,CAAI,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,CAAJ,EACI,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,CADJ,EAEI,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,CAFJ,EAGI,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,CAHJ,CAApB;;AAMA,qBAAKC,WAAL;AAEH,SAvRI;;AAyRL;AACAC,yBAAiB,yBAAWC,KAAX,EAAkBC,eAAlB,EAAmC;;AAEhDC,wBAAQC,GAAR,CAAa,mBAAb,EAAkCF,eAAlC;;AAEA,oBAAKA,mBAAmB,MAAxB,EAAiC;;AAE7B,6BAAKG,QAAL,CAAe,WAAf;AACA;AAEH,iBALD,MAKO,IAAKH,mBAAmB,MAAxB,EAAiC;;AAEpC;AACA;;;AAGH,iBANM,MAMA,IAAKA,mBAAmB,OAAxB,EAAkC;;AAErC,6BAAKI,UAAL,CAAiB,SAAjB,EAA4B,IAA5B,EAAkC,IAAlC;AAEH,iBAJM,MAIA,IAAKJ,mBAAmB,QAAxB,EAAmC;;AAEtC,6BAAKI,UAAL,CAAiB,UAAjB,EAA6B,IAA7B,EAAmC,IAAnC;AAEH,iBAJM,MAIA,IAAKJ,mBAAmB,YAAxB,EAAuC;;AAE1C;AACA,6BAAKK,WAAL;AAEH,iBALM,MAKA,IAAKL,mBAAmB,WAAxB,EAAsC;;AAEzC;AACA,6BAAKK,WAAL;AAEH;AAEJ,SA7TI;;AA+TL;AACAC,uBAAe,yBAAc,CAI5B,CApUI;;AAsUL;AACAT,qBAAa,uBAAY;AACrB;AACA;;;;;;;AAOA,qBAAKU,mBAAL;;AAEA,qBAAKC,mBAAL;;AAEA,oBAAIC,QAAQ,IAAZ;;AAEA,oBAAIC,WAAW,IAAf;;AAEA,oBAAIC,UAAU,IAAd;;AAEA,oBAAIC,cAAc,CAAlB;;AAEA,oBAAIC,cAAc,CAAlB;;AAEA,oBAAIC,gBAAgB,EAApB;;AAEA,qBAAK,IAAIvB,QAAQ,CAAjB,EAAoBA,QAAQ,KAAKK,UAAL,CAAgBmB,MAA5C,EAAoDxB,OAApD,EAA6D;;AAEzD,6BAAK,IAAIC,QAAO,CAAhB,EAAmBA,QAAQ,KAAKI,UAAL,CAAgBL,KAAhB,EAAuBwB,MAAlD,EAA0DvB,OAA1D,EAAoE;;AAEhEkB,2CAAWtG,GAAG4G,WAAH,CAAgB,KAAKvE,YAArB,CAAX;;AAEAiE,yCAASO,YAAT,CAAsB,UAAtB;;AAEAP,yCAASQ,CAAT,GAAa,KAAKjC,MAAL,CAAYM,KAAZ,EAAmBC,KAAnB,EAA0B0B,CAAvC;;AAEAR,yCAASS,CAAT,GAAa,KAAKlC,MAAL,CAAYM,KAAZ,EAAmBC,KAAnB,EAA0B2B,CAAvC;;AAEAT,yCAAS/C,cAAT,CAAwB,CAAxB;;AAEA+C,yCAASU,MAAT,GAAkB,KAAKtG,UAAvB;;AAEA,qCAAKqE,WAAL,CAAiBI,KAAjB,EAAwBC,KAAxB,IAAiCkB,QAAjC;;AAEAA,yCAASW,YAAT,CAAsB,UAAtB,EAAkCC,cAAlC,CAAkD/B,KAAlD,EAAyDC,KAAzD;;AAEAkB,yCAASW,YAAT,CAAsB,UAAtB,EAAkCE,kBAAlC,CAAsD,KAAKC,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B,CAAtD;;AAEA,oCAAIC,SAAS1H,IAAI2H,WAAJ,CAAgB,CAAhB,EAAmB,CAAnB,CAAb;;AAEA,oCAAKf,eAAe,CAApB,EAAwB;;AAEpBc,iDAAS,CAAT;AAEH,iCAJD,MAIM,IAAKb,eAAe,CAApB,EAAwB;;AAE1Ba,iDAAS,CAAT;AAEH;;AAED,oCAAKA,UAAU,CAAf,EAAmB;;AAEff,kDAAUvG,GAAG4G,WAAH,CAAgB,KAAK1E,kBAArB,CAAV;;AAEAsE,uDAAe,CAAf;;AAEAE,wDAAgB,aAAhB;;AAEAH,gDAAQiB,YAAR,GAAuB,aAAvB;;AAEAjB,gDAAQM,YAAR,CAAqBH,aAArB;;AAEAH,gDAAQU,YAAR,CAAqBP,aAArB,EAAoC/D,IAApC;;AAEA4D,gDAAQU,YAAR,CAAqBP,aAArB,EAAoCe,YAApC,CAAkD,KAAKjE,WAAL,CAAiBgD,cAAc,CAA/B,CAAlD;;AAEAD,gDAAQU,YAAR,CAAqBP,aAArB,EAAoCgB,SAApC,CAA+C,KAAK/D,SAApD;AAEH,iCAlBD,MAkBO,IAAK2D,UAAU,CAAf,EAAmB;;AAEtBf,kDAAUvG,GAAG4G,WAAH,CAAgB,KAAKxE,iBAArB,CAAV;;AAEAqE,uDAAe,CAAf;;AAEAC,wDAAgB,YAAhB;;AAEAH,gDAAQiB,YAAR,GAAuB,YAAvB;;AAEAjB,gDAAQM,YAAR,CAAqBH,aAArB;;AAEAH,gDAAQU,YAAR,CAAqBP,aAArB,EAAoC/D,IAApC;;AAEA4D,gDAAQU,YAAR,CAAqBP,aAArB,EAAoCe,YAApC,CAAkD,KAAKhE,UAAL,CAAgBgD,cAAc,CAA9B,CAAlD;;AAEAF,gDAAQU,YAAR,CAAqBP,aAArB,EAAoCgB,SAApC,CAA+C,KAAK9D,SAApD;AAEH;;AAED2C,wCAAQO,CAAR,GAAY,KAAKjC,MAAL,CAAYM,KAAZ,EAAmBC,KAAnB,EAA0B0B,CAAtC;;AAEAP,wCAAQQ,CAAR,GAAY,KAAKlC,MAAL,CAAYM,KAAZ,EAAmBC,KAAnB,EAA0B2B,CAAtC;;AAEAR,wCAAQrD,MAAR,GAAiB,IAAjB;;AAEAqD,wCAAQnD,OAAR,GAAkB,GAAlB;;AAEAmD,wCAAQhD,cAAR,CAAuB,CAAvB;;AAEAgD,wCAAQS,MAAR,GAAiB,KAAKtG,UAAtB;;AAEA,qCAAK8E,UAAL,CAAgBL,KAAhB,EAAuBC,KAAvB,IAAgC,EAAEuC,OAAM,KAAR,EAAeC,QAAOrB,OAAtB,EAAhC;;AAEAA,wCAAQU,YAAR,CAAqBP,aAArB,EAAoCQ,cAApC,CAAoD/B,KAApD,EAA2DC,KAA3D;;AAEAmB,wCAAQU,YAAR,CAAqBP,aAArB,EAAoCmB,mBAApC,CAAyD,KAAKC,mBAAL,CAAyBT,IAAzB,CAA8B,IAA9B,CAAzD;;AAEAd,wCAAQU,YAAR,CAAqBP,aAArB,EAAoCS,kBAApC,CAAwD,KAAKY,eAAL,CAAqBV,IAArB,CAA0B,IAA1B,CAAxD;AAEH;AAEJ;AAGJ,SAjcI;;AAmcL;AACA;;;;;;;;;;;AAWAlB,6BAAqB,+BAAc;;AAE/B,oBAAI6B,MAAM,CAAV;;AAEA,uBAAMA,MAAM,CAAZ,EAAeA,KAAf,EAAsB;;AAElB,4BAAIC,UAAUrI,IAAI2H,WAAJ,CAAgB,CAAhB,EAAmB,CAAnB,CAAd;;AAEA,6BAAK/D,WAAL,CAAiB0E,IAAjB,CAAsBD,OAAtB;;AAEA,6BAAK,IAAI7C,QAAQ,CAAjB,EAAoBA,QAAQ4C,GAA5B,EAAiC5C,OAAjC,EAA0C;;AAEtC,oCAAK6C,WAAW,KAAKzE,WAAL,CAAiB4B,KAAjB,CAAhB,EAA0C;;AAEtC,6CAAK5B,WAAL,CAAiB2E,MAAjB,CAAyBH,GAAzB,EAA8B,CAA9B;;AAEAA;;AAEA;AAEH;AAEJ;AAEJ;AAGJ,SA1eI;;AA4eL;AACA5B,6BAAqB,+BAAc;;AAE/B,oBAAI4B,MAAM,CAAV;;AAEA,uBAAOA,MAAM,CAAb,EAAgBA,KAAhB,EAAuB;;AAEnB,4BAAIC,UAAUrI,IAAI2H,WAAJ,CAAgB,CAAhB,EAAmB,CAAnB,CAAd;;AAEA,6BAAK9D,UAAL,CAAgByE,IAAhB,CAAqBD,OAArB;;AAEA,6BAAK,IAAI7C,QAAQ,CAAjB,EAAoBA,QAAQ4C,GAA5B,EAAiC5C,OAAjC,EAA0C;;AAEtC,oCAAK6C,WAAW,KAAKxE,UAAL,CAAgB2B,KAAhB,CAAhB,EAAyC;;AAErC,6CAAK3B,UAAL,CAAgB0E,MAAhB,CAAwBH,GAAxB,EAA6B,CAA7B;;AAEAA;;AAEA;AAEH;AAEJ;AAEJ;AAEJ,SAvgBI;;AAygBL;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;;;;AAKAD,yBAAiB,yBAAW5D,GAAX,EAAgBC,GAAhB,EAAqBoD,YAArB,EAAmCY,UAAnC,EAAgD;;AAE7D;;AAEA,oBAAK,CAAC,KAAKrE,cAAX,EAA4B;;AAExB,6BAAKgC,QAAL,CAAe,eAAf;;AAEA;AAEH;;AAED;AACA;;AAEA;;AAEA;AACA,oBAAK,KAAK/B,YAAL,IAAqBwD,YAArB,IAAqCY,UAA1C,EAAsD;;AAElD,4BAAK,KAAKlE,YAAL,CAAkB1B,KAAlB,IAA2B,CAAhC,EAAoC;;AAEhC,qCAAK0B,YAAL,CAAkB1B,KAAlB,GAA0B,CAA1B;;AAEA,qCAAK0B,YAAL,CAAkBC,GAAlB,GAAwBA,GAAxB;;AAEA,qCAAKD,YAAL,CAAkBE,GAAlB,GAAwBA,GAAxB;;AAEA,qCAAKoB,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCX,YAAjC,CAA8C,KAAKjD,YAAnD,EAAiEqE,QAAjE;;AAEA,qCAAKC,gBAAL,CAAuBnE,GAAvB,EAA4BC,GAA5B,EAAiC,KAAKoB,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCX,YAAjC,CAA8C,KAAKjD,YAAnD,CAAjC;;AAEA6B,wCAAQC,GAAR,CAAa,8BAAb;AAEH,yBAdD,MAcO,IAAK,KAAK5B,YAAL,CAAkB1B,KAAlB,IAA2B,CAAhC,EAAoC;;AAEvCqD,wCAAQC,GAAR,CAAa,8BAAb;;AAEA,qCAAKN,UAAL,CAAgB,KAAKtB,YAAL,CAAkBC,GAAlC,EAAuC,KAAKD,YAAL,CAAkBE,GAAzD,EAA8DwD,MAA9D,CAAqEX,YAArE,CAAkF,KAAKjD,YAAvF,EAAqGuE,UAArG;;AAEA,qCAAKjF,YAAL;;AAEA,qCAAKY,YAAL,CAAkB1B,KAAlB,GAA0B,CAA1B;;AAEA,qCAAK0B,YAAL,CAAkBC,GAAlB,GAAwB,CAAC,CAAzB;;AAEA,qCAAKD,YAAL,CAAkBE,GAAlB,GAAwB,CAAC,CAAzB;AAEH;AAEJ,iBAhCD,MAgCO,IAAK,KAAKJ,YAAL,IAAqBwD,YAArB,IAAqC,CAACY,UAA3C,EAAwD;;AAE3D,6BAAKlE,YAAL,CAAkB1B,KAAlB,GAA0B,CAA1B;;AAEA,6BAAK0B,YAAL,CAAkBC,GAAlB,GAAwB,CAAC,CAAzB;;AAEA,6BAAKD,YAAL,CAAkBE,GAAlB,GAAwB,CAAC,CAAzB;;AAEA,6BAAKd,YAAL;AAEH,iBAVM,MAUA;AACH;AACA,4BAAK,CAAC,KAAKkF,oBAAL,EAAN,EAAoC;;AAEhC,qCAAKzC,QAAL,CAAe,aAAf;;AAEA;AAEH;;AAED;AACA;;;;;;AAMA,4BAAK,KAAK0C,gBAAL,CAAuBtE,GAAvB,EAA4BC,GAA5B,KAAqC,CAAC,KAAKsE,iBAAL,CAAwBvE,GAAxB,EAA6BC,GAA7B,CAA3C,EAAgF;;AAE5E;;AAEA,oCAAIuE,SAAS,KAAKzE,YAAL,CAAkBC,GAA/B;;AAEA,oCAAIyE,SAAS,KAAK1E,YAAL,CAAkBE,GAA/B;;AAEA,oCAAIyE,YAAY,EAAE/B,GAAE,KAAKtB,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCd,CAArC;AACIC,2CAAE,KAAKvB,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCb,CADvC,EAAhB;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA,qCAAKvB,UAAL,CAAgBmD,MAAhB,EAAwBC,MAAxB,EAAgChB,MAAhC,CAAuCX,YAAvC,CAAoD,KAAKjD,YAAzD,EAAuEf,IAAvE,CAA4EM,cAA5E,CAA2F,EAA3F;;AAEA;AACA,qCAAKiC,UAAL,CAAgBmD,MAAhB,EAAwBC,MAAxB,EAAgChB,MAAhC,CAAuCX,YAAvC,CAAoD,KAAKjD,YAAzD,EAAuE8E,cAAvE,CAAuFD,SAAvF,EAAkG1E,GAAlG,EAAuGC,GAAvG,EAA4G,KAAK2E,iBAAL,CAAuB1B,IAAvB,CAA4B,IAA5B,CAA5G;AAEH,yBAxBD,MAwBO;;AAEH,oCAAIsB,SAAS,KAAKzE,YAAL,CAAkBC,GAA/B;;AAEA,oCAAIyE,SAAS,KAAK1E,YAAL,CAAkBE,GAA/B;;AAEA,qCAAKoB,UAAL,CAAgBmD,MAAhB,EAAwBC,MAAxB,EAAgChB,MAAhC,CAAuCX,YAAvC,CAAoD,KAAKjD,YAAzD,EAAuEuE,UAAvE;;AAEA,qCAAKjF,YAAL;;AAEA;AACA,qCAAKY,YAAL,CAAkBC,GAAlB,GAAwB,CAAC,CAAzB;;AAEA,qCAAKD,YAAL,CAAkBE,GAAlB,GAAwB,CAAC,CAAzB;AAEH;AAGJ;AAEJ,SAhpBI;;AAkpBL;AACA0D,6BAAqB,6BAAW3D,GAAX,EAAgBC,GAAhB,EAAqBoD,YAArB,EAAoC;;AAErD3B,wBAAQC,GAAR,CAAa,iBAAb,EAAgC,KAAK/B,cAArC;;AAEA,oBAAK,CAAC,KAAKA,cAAX,EAA4B;;AAExB,6BAAKgC,QAAL,CAAe,eAAf;;AAEA;AAEH,iBAND,MAMO;;AAEH,6BAAKP,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCX,YAAjC,CAA8CO,YAA9C,EAA4DwB,aAA5D,CAA2E,KAAKC,yBAAL,CAA+B5B,IAA/B,CAAoC,IAApC,CAA3E;AAEH;AAEJ,SAnqBI;;AAqqBL4B,mCAA2B,mCAAW9E,GAAX,EAAgBC,GAAhB,EAAsB;;AAE7C,qBAAK8E,iBAAL;;AAEA,qBAAK1D,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiC1E,MAAjC,GAA0C,IAA1C;;AAEA,qBAAKsC,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCxE,OAAjC,GAA2C,GAA3C;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA,qBAAK+F,aAAL;;AAEA,qBAAK7F,YAAL;AAEH,SA9sBI;;AAgtBL;AACA8D,8BAAsB,8BAAWjD,GAAX,EAAgBC,GAAhB,EAAsB;;AAExCyB,wBAAQC,GAAR,CAAa,sBAAb,EAAqC3B,GAArC,EAA0CC,GAA1C;AACA;AACA,oBAAK,KAAKqE,gBAAL,CAAuBtE,GAAvB,EAA4BC,GAA5B,CAAL,EAAyC;;AAErC;AACA,4BAAIuE,SAAS,KAAKzE,YAAL,CAAkBC,GAA/B;;AAEA,4BAAIyE,SAAS,KAAK1E,YAAL,CAAkBE,GAA/B;;AAEA,4BAAIyE,YAAY,EAAE/B,GAAE,KAAK/B,WAAL,CAAiBZ,GAAjB,EAAsBC,GAAtB,EAA2B0C,CAA/B;AACIC,mCAAE,KAAKhC,WAAL,CAAiBZ,GAAjB,EAAsBC,GAAtB,EAA2B2C,CADjC,EAAhB;;AAGA,6BAAKvB,UAAL,CAAgBmD,MAAhB,EAAwBC,MAAxB,EAAgChB,MAAhC,CAAuCX,YAAvC,CAAoD,KAAKjD,YAAzD,EAAuE8E,cAAvE,CAAuFD,SAAvF,EAAkG1E,GAAlG,EAAuGC,GAAvG,EAA4G,KAAKgF,cAAL,CAAoB/B,IAApB,CAAyB,IAAzB,CAA5G;AAEH,iBAZD,MAYO;;AAEH;;AAEH;AAGJ,SAxuBI;;AA0uBL;AACA0B,2BAAmB,2BAAW5E,GAAX,EAAgBC,GAAhB,EAAsB;;AAErC;AACA,oBAAIiF,YAAY,KAAKnF,YAAL,CAAkBC,GAAlC;;AAEA,oBAAImF,YAAY,KAAKpF,YAAL,CAAkBE,GAAlC;;AAEA,oBAAK,KAAKmF,cAAL,CAAqBpF,GAArB,EAA0BC,GAA1B,KAAmC,KAAKC,aAAL,CAAmBC,EAA3D,EAAgE;;AAE5D;;AAEA,4BAAIkF,eAAe,KAAKhE,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCJ,YAApD;;AAEA,4BAAIiC,iBAAiB,KAAKjE,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CJ,YAAlE;;AAEA,6BAAKkC,gBAAL,CAAuBvF,GAAvB,EAA4BC,GAA5B;;AAEA;AACA,6BAAKoB,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCX,YAAjC,CAA8CuC,YAA9C,EAA4DG,SAA5D;;AAEA,6BAAKnE,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CX,YAA7C,CAA0DwC,cAA1D,EAA0EE,SAA1E;;AAEA,6BAAKnE,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BuD,KAA1B,GAAkC,IAAlC;;AAEA,6BAAKnC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC3B,KAAtC,GAA8C,IAA9C;AAEH,iBAnBD,MAmBO,IAAK,KAAK4B,cAAL,CAAqBpF,GAArB,EAA0BC,GAA1B,KAAmC,KAAKC,aAAL,CAAmBE,EAA3D,EAAgE;;AAEnE;;AAEA,4BAAIqF,SAAS,KAAKpE,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CJ,YAA1D;;AAEA,6BAAKhC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC3B,KAAtC,GAA8C,IAA9C;;AAEA,6BAAKnC,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BuD,KAA1B,GAAkC,KAAlC;;AAEA,6BAAK+B,gBAAL,CAAuBvF,GAAvB,EAA4BC,GAA5B;AACA;AACA,6BAAKoB,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CX,YAA7C,CAA0D2C,MAA1D,EAAkED,SAAlE;AAEH,iBAdM,MAcA,IAAK,KAAKJ,cAAL,CAAqBpF,GAArB,EAA0BC,GAA1B,KAAmC,KAAKC,aAAL,CAAmBG,EAA3D,EAAgE;;AAEnE;AACA,4BAAIoF,SAAS,KAAKpE,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCJ,YAA9C;;AAEA,4BAAIqC,cAAc,KAAKrE,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CJ,YAA/D;;AAEA,6BAAKhC,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BuD,KAA1B,GAAkC,IAAlC;;AAEA,6BAAKnC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC3B,KAAtC,GAA8C,KAA9C;;AAEA,6BAAKnC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CX,YAA7C,CAA0D4C,WAA1D,EAAuE5G,IAAvE,CAA4EM,cAA5E,CAA2F,CAA3F;;AAEA,6BAAKmG,gBAAL,CAAuBvF,GAAvB,EAA4BC,GAA5B;AACA;AACA,6BAAKoB,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCX,YAAjC,CAA8C2C,MAA9C,EAAsDD,SAAtD;;AAEA,6BAAKnE,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,GAAmC,KAAKpC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAzE;;AAEA,6BAAKpC,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BuD,KAA1B,GAAkC,KAAKnC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC3B,KAAxE;;AAEA,6BAAKnC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC3B,KAAtC,GAA8C,IAA9C;;AAEA,6BAAKnC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CX,YAA7C,CAA0D,KAAKjD,YAA/D,EAA6EkD,cAA7E,CAA6F/C,GAA7F,EAAkGC,GAAlG;AAEH,iBAzBM,MAyBA,IAAK,KAAKmF,cAAL,CAAqBpF,GAArB,EAA0BC,GAA1B,KAAmC,CAAC,CAAzC,EAA6C;;AAEhD;AACA;AAEH;;AAED;;AAEA;AACA,oBAAK,KAAK0F,aAAL,EAAL,EAA4B;;AAExB;;AAEH,iBAJD,MAIO;;AAEH;AACA,6BAAKZ,iBAAL;AAEH;AAEJ,SAj0BI;;AAm0BL;AACAE,wBAAgB,wBAAWjF,GAAX,EAAgBC,GAAhB,EAAsB;;AAElC;AACAyB,wBAAQC,GAAR,CAAa,MAAb;AACA;;AAEA,oBAAIuD,YAAY,KAAKnF,YAAL,CAAkBC,GAAlC;;AAEA,oBAAImF,YAAY,KAAKpF,YAAL,CAAkBE,GAAlC;;AAEA,oBAAI2F,YAAY,KAAKvE,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BuD,KAA1C;;AAEA,qBAAKnC,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,GAAmC,KAAKpC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAzE;;AAEA,qBAAKpC,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BuD,KAA1B,GAAkC,KAAKnC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC3B,KAAxE;;AAEA,qBAAKnC,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC3B,KAAtC,GAA8CoC,SAA9C;;AAEA,qBAAKvE,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CX,YAA7C,CAA0D,KAAKjD,YAA/D,EAA6EkD,cAA7E,CAA6F/C,GAA7F,EAAkGC,GAAlG;;AAEA,qBAAK8E,iBAAL;AACA;AAEH,SA31BI;;AA61BL;AACAA,2BAAmB,6BAAc;;AAE7B,qBAAKc,WAAL;;AAEA,qBAAKC,iBAAL;;AAEA;AACA,qBAAKd,aAAL;;AAEA,qBAAKjF,YAAL,CAAkBC,GAAlB,GAAwB,CAAC,CAAzB;;AAEA,qBAAKD,YAAL,CAAkBE,GAAlB,GAAwB,CAAC,CAAzB;;AAEA,qBAAKF,YAAL,CAAkB1B,KAAlB,GAA0B,CAA1B;;AAEA,oBAAK,KAAKwB,YAAL,IAAqB,aAA1B,EAA0C;;AAEtC,6BAAKA,YAAL,GAAoB,YAApB;;AAEA,6BAAKkG,aAAL,CAAoB,IAApB;;AAEA,6BAAKC,cAAL,CAAqB,KAArB;AAEH,iBARD,MAQO,IAAK,KAAKnG,YAAL,IAAqB,YAA1B,EAAyC;;AAE5C,6BAAKA,YAAL,GAAoB,aAApB;;AAEA,6BAAKmG,cAAL,CAAqB,IAArB;;AAEA,6BAAKD,aAAL,CAAoB,KAApB;AAEH;;AAED;;AAEA,qBAAK5G,YAAL;;AAEA,qBAAK8G,sBAAL;AAEH,SAr4BI;;AAu4BL;AACA3B,0BAAkB,0BAAWtE,GAAX,EAAgBC,GAAhB,EAAsB;;AAEpC,oBAAIiF,YAAY,KAAKnF,YAAL,CAAkBC,GAAlC;;AAEA,oBAAImF,YAAY,KAAKpF,YAAL,CAAkBE,GAAlC;;AAEA,oBAAIiG,UAAU,KAAd;;AAEA,oBAAKlG,MAAM,CAAN,IAAWkF,SAAX,IAAwBjF,OAAOkF,SAApC,EAAgD;;AAE5C;AACAe,kCAAU,IAAV;AACA;AAEH,iBAND,MAMO,IAAKlG,MAAM,CAAN,IAAWkF,SAAX,IAAwBjF,OAAOkF,SAApC,EAAgD;;AAEnD;AACAe,kCAAU,IAAV;AACA;AAEH,iBANM,MAMA,IAAKlG,OAAOkF,SAAP,IAAoBjF,MAAM,CAAN,IAAWkF,SAApC,EAAgD;;AAEnD;AACAe,kCAAU,IAAV;AACA;AAEH,iBANM,MAMA,IAAKlG,OAAOkF,SAAP,IAAoBjF,MAAM,CAAN,IAAWkF,SAApC,EAAgD;;AAEnD;AACAe,kCAAU,IAAV;AACA;AAEH,iBANM,MAMA,IAAKhB,aAAa,CAAC,CAAd,IAAmBC,aAAa,CAAC,CAAtC,EAA0C;;AAE7C;AACAe,kCAAU,KAAV;AACA;AAEH,iBANM,MAMA;;AAEH;AACAA,kCAAU,KAAV;AACA;AAEH;;AAEDxE,wBAAQC,GAAR,CAAa,gBAAb,EAA+BuE,OAA/B;;AAEA,uBAAOA,OAAP;AAEH,SA17BI;;AA47BL;AACA;;;;;AAKAd,wBAAgB,wBAAWpF,GAAX,EAAgBC,GAAhB,EAAsB;;AAElC;AACA,oBAAIiF,YAAY,KAAKnF,YAAL,CAAkBC,GAAlC;;AAEA,oBAAImF,YAAY,KAAKpF,YAAL,CAAkBE,GAAlC;;AAEA,oBAAIkG,YAAY,KAAK9E,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCJ,YAAjD;;AAEA,oBAAI+C,gBAAgB,KAAK/E,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CX,YAA7C,CAA0D,KAAKjD,YAA/D,EAA6EwG,gBAA7E,EAApB;;AAEA,oBAAIC,cAAgB,KAAKjF,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCX,YAAjC,CAA8CqD,SAA9C,EAAyDE,gBAAzD,EAApB;;AAEA;AACA;;;;;;;AAOA;;AAEA,oBAAIE,eAAe,CAAC,CAApB;;AAEA,oBAAMH,iBAAiB,CAAjB,IAAsBE,eAAe,CAA3C,EAAiD;;AAE7C;AACAC,uCAAe,KAAKrG,aAAL,CAAmBG,EAAlC;AAEH,iBALD,MAKO,IAAM+F,iBAAiB,CAAjB,IAAsBE,eAAe,CAA3C,EAAiD;;AAEpD;AACAC,uCAAe,KAAKrG,aAAL,CAAmBE,EAAlC;AAEH,iBALM,MAKA,IAAKgG,iBAAiBE,WAAtB,EAAoC;;AAEvCC,uCAAe,KAAKrG,aAAL,CAAmBC,EAAlC;AAEH,iBAJM,MAIA,IAAKiG,gBAAgBE,WAArB,EAAmC;;AAEtCC,uCAAe,KAAKrG,aAAL,CAAmBE,EAAlC;AAEH,iBAJM,MAIA,IAAKgG,gBAAgBE,WAArB,EAAmC;;AAEtCC,uCAAe,KAAKrG,aAAL,CAAmBG,EAAlC;AAEH;;AAED,uBAAOkG,YAAP;AAEH,SAr/BI;;AAu/BL;AACAhC,2BAAmB,2BAAWvE,GAAX,EAAgBC,GAAhB,EAAsB;;AAErC,oBAAIuG,SAAS,KAAb;;AAEA,oBAAItB,YAAY,KAAKnF,YAAL,CAAkBC,GAAlC;;AAEA,oBAAImF,YAAY,KAAKpF,YAAL,CAAkBE,GAAlC;;AAEA,oBAAIwG,eAAe,KAAKpF,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCJ,YAApD;;AAEA,oBAAIqC,cAAc,KAAKrE,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CJ,YAA/D;;AAEA;;AAEA,oBAAKoD,gBAAgBf,WAArB,EAAmC;;AAE/B,6BAAKrE,UAAL,CAAgB6D,SAAhB,EAA2BC,SAA3B,EAAsC1B,MAAtC,CAA6CX,YAA7C,CAA0D4C,WAA1D,EAAuEtB,UAAvE;;AAEA,6BAAK/C,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCX,YAAjC,CAA8C2D,YAA9C,EAA4DrC,UAA5D;;AAEA,6BAAKjF,YAAL;;AAEAqH,iCAAS,IAAT;AAEH;;AAED,uBAAOA,MAAP;AAEH,SAphCI;;AAshCL;AACAnC,8BAAsB,gCAAc;;AAEhC,oBAAIa,YAAY,KAAKnF,YAAL,CAAkBC,GAAlC;;AAEA,oBAAImF,YAAY,KAAKpF,YAAL,CAAkBE,GAAlC;;AAEA,oBAAKiF,aAAa,CAAC,CAAd,IAAmBC,aAAa,CAAC,CAAtC,EAA0C;;AAEtC,+BAAO,KAAP;AAEH;;AAED,uBAAO,IAAP;AAEH,SAriCI;;AAuiCL;AACAc,gCAAwB,kCAAc;;AAElCvE,wBAAQC,GAAR,CAAa,0BAAb;;AAEA,oBAAI+E,WAAW,IAAf;;AAEA,oBAAIC,SAAS,EAAb;;AAEA;AACA,qBAAK,IAAI3F,QAAQ,CAAjB,EAAoBA,QAAQ,KAAKK,UAAL,CAAgBmB,MAA5C,EAAoDxB,OAApD,EAA6D;;AAEzD,6BAAK,IAAIC,QAAQ,CAAjB,EAAoBA,QAAQ,KAAKI,UAAL,CAAgBL,KAAhB,EAAuBwB,MAAnD,EAA2DvB,OAA3D,EAAoE;;AAEhE,oCAAK,CAAC,KAAKI,UAAL,CAAgBL,KAAhB,EAAuBC,KAAvB,EAA8BuC,KAApC,EAA4C;;AAExCkD,mDAAW,KAAKrF,UAAL,CAAgBL,KAAhB,EAAuBC,KAAvB,EAA8BwC,MAAzC;;AAEAkD,iDAAWD,SAASrD,YAApB;;AAEA,4CAAKqD,SAAS5D,YAAT,CAAsB6D,MAAtB,EAA8BC,gBAA9B,EAAL,EAAwD;;AAEpD,oDAAK,KAAK/G,YAAL,IAAqB8G,MAA1B,EAAmC;;AAE/BD,iEAAS5D,YAAT,CAAsB6D,MAAtB,EAA8BE,aAA9B;AAEH,iDAJD,MAIO;;AAEHH,iEAAS5D,YAAT,CAAsB6D,MAAtB,EAA8BG,SAA9B;AAEH;AAEJ,yCAZD,MAYO;;AAEHJ,yDAAS5D,YAAT,CAAsB6D,MAAtB,EAA8BI,aAA9B;AAEH;AAEJ;AAEJ;AACJ;AAEJ,SAllCI;;AAolCL;AACA/B,uBAAe,yBAAc;;AAEzB,oBAAI0B,WAAW,IAAf;;AAEA,oBAAIC,SAAS,EAAb;;AAEA;AACA,qBAAK,IAAI3F,QAAQ,CAAjB,EAAoBA,QAAQ,KAAKK,UAAL,CAAgBmB,MAA5C,EAAoDxB,OAApD,EAA6D;;AAEzD,6BAAK,IAAIC,QAAQ,CAAjB,EAAoBA,QAAQ,KAAKI,UAAL,CAAgBL,KAAhB,EAAuBwB,MAAnD,EAA2DvB,OAA3D,EAAoE;;AAEhE,oCAAK,CAAC,KAAKI,UAAL,CAAgBL,KAAhB,EAAuBC,KAAvB,EAA8BuC,KAApC,EAA4C;;AAExCkD,mDAAW,KAAKrF,UAAL,CAAgBL,KAAhB,EAAuBC,KAAvB,EAA8BwC,MAAzC;;AAEAkD,iDAAWD,SAASrD,YAApB;;AAEA,4CAAKsD,UAAU,KAAK9G,YAApB,EAAkC;;AAE9B,oDAAK6G,SAAS5D,YAAT,CAAsB6D,MAAtB,EAA8BK,cAA9B,EAAL,EAAsD;;AAElDN,iEAAS5D,YAAT,CAAsB6D,MAAtB,EAA8BvC,UAA9B;AAEH,iDAJD,MAIO,CAGN;AACJ;AAEJ;AAEJ;AACJ;AAEJ,SAvnCI;;AAynCD;AACJ;;;;AAIAuB,uBAAe,yBAAc;;AAEzB,oBAAIsB,YAAY,CAAhB;;AAEA,oBAAIC,YAAY,CAAhB;;AAEA,oBAAIR,WAAW,IAAf;;AAEA,oBAAIC,SAAS,EAAb;;AAEA;AACA,qBAAK,IAAI3F,QAAQ,CAAjB,EAAoBA,QAAQ,KAAKK,UAAL,CAAgBmB,MAA5C,EAAoDxB,OAApD,EAA6D;;AAEzD,6BAAK,IAAIC,QAAQ,CAAjB,EAAoBA,QAAQ,KAAKI,UAAL,CAAgBL,KAAhB,EAAuBwB,MAAnD,EAA2DvB,OAA3D,EAAoE;;AAEhE,oCAAK,CAAC,KAAKI,UAAL,CAAgBL,KAAhB,EAAuBC,KAAvB,EAA8BuC,KAApC,EAA4C;;AAExCkD,mDAAW,KAAKrF,UAAL,CAAgBL,KAAhB,EAAuBC,KAAvB,EAA8BwC,MAAzC;;AAEAkD,iDAAWD,SAASrD,YAApB;;AAEA;;AAEA,4CAAKsD,UAAU,aAAf,EAA+B;;AAE3BM,6DAAa,CAAb;AAEH,yCAJD,MAIO,IAAKN,UAAU,YAAf,EAA8B;;AAEjCO,6DAAa,CAAb;AAEH;AAEJ;AAEJ;AACJ;;AAED;;AAEAxF,wBAAQC,GAAR,CAAa,gBAAb,EAA+BsF,SAA/B;;AAEAvF,wBAAQC,GAAR,CAAa,gBAAb,EAA+BuF,SAA/B;;AAEA,oBAAIC,WAAW,KAAf;;AAEA,oBAAKF,aAAa,CAAb,IAAkBC,aAAa,CAApC,EAAwC;;AAEpC;AACAC,mCAAW,IAAX;AAEH,iBALD,MAKO,IAAKD,aAAa,CAAb,IAAkBD,YAAYC,SAAnC,EAA+C;;AAElD;AACAC,mCAAW,IAAX;AAEH,iBALM,MAKA,IAAKF,aAAa,CAAb,IAAkBC,YAAYD,SAAnC,EAA+C;;AAElD;AACAE,mCAAW,IAAX;AAEH;;AAED,oBAAKA,QAAL,EAAgB;;AAEZ,6BAAKtB,WAAL;;AAEA,6BAAK1G,YAAL;;AAEA,6BAAKiI,iBAAL,GAAyB,YAAW;;AAEhC,qCAAKC,gBAAL;AAEH,yBAJD;;AAMA,6BAAKC,YAAL,CAAkB,KAAKF,iBAAvB,EAA0C,GAA1C;AAEH;;AAED,uBAAOD,QAAP;AAEH,SA/sCI;;AAitCLI,sBAAc,wBAAc;;AAExB,oBAAIb,WAAW,IAAf;;AAEA,oBAAIC,SAAS,EAAb;;AAEA;AACA,qBAAK,IAAI3F,QAAQ,CAAjB,EAAoBA,QAAQ,KAAKK,UAAL,CAAgBmB,MAA5C,EAAoDxB,OAApD,EAA6D;;AAEzD,6BAAK,IAAIC,QAAQ,CAAjB,EAAoBA,QAAQ,KAAKI,UAAL,CAAgBL,KAAhB,EAAuBwB,MAAnD,EAA2DvB,OAA3D,EAAoE;;AAEhE,oCAAK,CAAC,KAAKI,UAAL,CAAgBL,KAAhB,EAAuBC,KAAvB,EAA8BuC,KAApC,EAA4C;;AAExCkD,mDAAW,KAAKrF,UAAL,CAAgBL,KAAhB,EAAuBC,KAAvB,EAA8BwC,MAAzC;;AAEAkD,iDAAWD,SAASrD,YAApB;;AAEAqD,iDAAS5D,YAAT,CAAsB6D,MAAtB,EAA8BnB,SAA9B;AAEH;AAEJ;AACJ;AAGJ,SA1uCI;;AA4uCLgC,mBAAW,qBAAc;;AAErB,qBAAKD,YAAL;;AAEA,qBAAK/I,IAAL;;AAEA,qBAAKC,MAAL;;AAEA,qBAAKC,UAAL;;AAEA,qBAAKC,iBAAL;AAEH,SAxvCI;;AA0vCT;;AAEI;AACAD,oBAAY,sBAAY;;AAEpB,oBAAI+I,WAAc,CAAlB,CAFoB,CAEoB;;AAExC,oBAAIC,SAAc,KAAKtJ,WAAvB,CAJoB,CAIoB;;AAExC,oBAAIuJ,QAAc,CAAlB,CANoB,CAMoB;;AAExC,qBAAKC,QAAL,CAAe,KAAKC,kBAApB,EAAyCJ,QAAzC,EAAmDC,MAAnD,EAA2DC,KAA3D;AAEH,SAvwCI;;AAywCL;AACA9B,qBAAa,uBAAY;;AAErBnE,wBAAQC,GAAR,CAAa,sCAAb;;AAEA,qBAAKmG,UAAL,CAAgB,KAAKD,kBAArB;;AAEA,qBAAKxJ,KAAL,GAAa,EAAb;;AAEA,qBAAKuB,cAAL,GAAsB,KAAtB;;AAEA;AAEH,SAtxCI;;AAwxCL;AACAiI,4BAAoB,8BAAc;;AAE9B,qBAAKxJ,KAAL,IAAc,CAAd;;AAEA,oBAAK,KAAKA,KAAL,GAAa,CAAlB,EAAqB;;AAEjB,6BAAKwH,WAAL;;AAEA,6BAAKd,iBAAL;AAEH,iBAND,MAMO;;AAEH;AACA,6BAAKe,iBAAL;AAEH;AAIJ,SA5yCI;;AA8yCLiC,0BAAkB,4BAAc;;AAE5B,uBAAO,KAAKnI,cAAZ;AAEH,SAlzCI;;AAozCT;;;AAGA;;AAEI;AACA;;;;;;;AAOAuE,0BAAkB,0BAAWnE,GAAX,EAAgBC,GAAhB,EAAqB+H,GAArB,EAA2B;;AAEzC,oBAAIC,UAAU,EAAEC,IAAG,KAAL,EAAYC,MAAK,KAAjB,EAAwBC,MAAK,KAA7B,EAAoCC,OAAM,KAA1C,EAAd;;AAIA,oBAAKrI,MAAM,CAAN,IAAW,CAAhB,EAAmB;;AAEf;AACA;AACA,4BAAIsI,YAAY,KAAKC,mBAAL,CAA2BvI,MAAI,CAA/B,EAAmCC,GAAnC,CAAhB;;AAEA,4BAAKqI,SAAL,EAAiB;;AAEbL,wCAAQC,EAAR,GAAa,IAAb;AAEH;AAEJ;;AAED,oBAAKlI,MAAM,CAAN,IAAW,CAAhB,EAAmB;;AAEf;AACA,4BAAIsI,YAAY,KAAKC,mBAAL,CAA2BvI,MAAI,CAA/B,EAAmCC,GAAnC,CAAhB;;AAEA,4BAAKqI,SAAL,EAAiB;;AAEbL,wCAAQE,IAAR,GAAe,IAAf;AAEH;AAEJ;;AAED,oBAAKlI,MAAM,CAAN,IAAW,CAAhB,EAAoB;;AAEhB;AACA,4BAAIqI,YAAY,KAAKC,mBAAL,CAA0BvI,GAA1B,EAAgCC,MAAI,CAApC,CAAhB;;AAEA,4BAAKqI,SAAL,EAAiB;;AAEbL,wCAAQG,IAAR,GAAe,IAAf;AAEH;AAEJ;;AAED,oBAAKnI,MAAM,CAAN,IAAW,CAAhB,EAAoB;;AAEhB;AACA,4BAAIqI,YAAY,KAAKC,mBAAL,CAA0BvI,GAA1B,EAAgCC,MAAI,CAApC,CAAhB;;AAEA,4BAAKqI,SAAL,EAAiB;;AAEbL,wCAAQI,KAAR,GAAgB,IAAhB;AAEH;AAEJ;;AAED,oBAAMrI,MAAM,CAAN,IAAWC,MAAM,CAAlB,IAA0BD,MAAM,CAAN,IAAWC,MAAM,CAAhD,EAAsD;;AAElDgI,kCAAU,EAAEC,IAAG,KAAL,EAAYC,MAAK,KAAjB,EAAwBC,MAAK,KAA7B,EAAoCC,OAAM,KAA1C,EAAV;AAEH;;AAED;;AAEA,qBAAKrL,QAAL,CAAc2F,CAAd,GAAkB,KAAKtB,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCd,CAAnD;;AAEA,qBAAK3F,QAAL,CAAc4F,CAAd,GAAkB,KAAKvB,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAA1B,CAAiCb,CAAjC,GAAqC,EAAvD;;AAEA,qBAAK4F,kBAAL,CAAyBP,OAAzB;AAEH,SA14CI;;AA44CLM,6BAAqB,6BAAWvI,GAAX,EAAgBC,GAAhB,EAAsB;;AAEvC,oBAAIyG,WAAW,IAAf;;AAEA,oBAAIC,SAAS,EAAb;;AAEA,oBAAI2B,YAAY,KAAhB;;AAEA,oBAAK,CAAC,KAAKjH,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BuD,KAAhC,EAAwC;;AAEpCkD,mCAAW,KAAKrF,UAAL,CAAgBrB,GAAhB,EAAqBC,GAArB,EAA0BwD,MAArC;;AAEAkD,iCAASD,SAASrD,YAAlB;;AAEA;AACA,4BAAK,CAACqD,SAAS5D,YAAT,CAAsB6D,MAAtB,EAA8BC,gBAA9B,EAAN,EAAyD;;AAErD;AACA0B,4CAAY,KAAZ;AAEH,yBALD,MAKO;;AAEH;AACA,oCAAK,KAAKzI,YAAL,IAAqB8G,MAA1B,EAAmC;;AAE/B2B,oDAAY,KAAZ;AAEH,iCAJD,MAIO;;AAEHA,oDAAY,IAAZ;AAEH;AAEJ;AAEJ,iBA3BD,MA2BO;;AAEHA,oCAAY,IAAZ;AAEH;;AAED,uBAAOA,SAAP;AAEH,SAv7CI;;AAy7CD;AACJ;;;;AAIAE,4BAAoB,4BAAWP,OAAX,EAAqB;;AAErC,oBAAKA,QAAQC,EAAb,EAAkB;;AAEd;AACA,6BAAKO,cAAL,CAAqB,KAAKxL,KAA1B,EAAiC,IAAjC;AAEH;;AAED,oBAAKgL,QAAQE,IAAb,EAAoB;;AAEhB;AACA,6BAAKM,cAAL,CAAqB,KAAKtL,OAA1B,EAAmC,MAAnC;AAEH;;AAED,oBAAK8K,QAAQG,IAAb,EAAoB;;AAEhB;AACA,6BAAKK,cAAL,CAAqB,KAAKrL,OAA1B,EAAmC,MAAnC;AAEH;;AAED,oBAAK6K,QAAQI,KAAb,EAAqB;;AAEjB;AACA,6BAAKI,cAAL,CAAqB,KAAKpL,QAA1B,EAAoC,OAApC;AAEH;AAEJ,SA59CI;;AA89CD;;;;AAIJoL,wBAAgB,wBAAWC,OAAX,EAAoBC,MAApB,EAA6B;;AAEzCD,wBAAQ5J,IAAR,CAAaC,MAAb,GAAsB,IAAtB;;AAEA2J,wBAAQ5J,IAAR,CAAaG,OAAb,GAAuB,GAAvB;;AAEA,oBAAI2J,YAAYF,QAAQG,IAAR,CAAaF,MAAb,CAAhB;;AAEA;AACAC,0BAAUE,QAAV,GAAqBjN,GAAGkN,QAAH,CAAYC,IAAjC;;AAEA;AACAJ,0BAAUK,WAAV,GAAwBC,QAAxB;AAEH,SAh/CI;;AAk/CL;AACA/J,sBAAc,wBAAc;;AAExB,qBAAKlC,KAAL,CAAW6B,IAAX,CAAgBC,MAAhB,GAAyB,KAAzB;;AAEA,qBAAK9B,KAAL,CAAW6B,IAAX,CAAgBG,OAAhB,GAA0B,CAA1B;;AAEA,qBAAK9B,OAAL,CAAa2B,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;;AAEA,qBAAK5B,OAAL,CAAa2B,IAAb,CAAkBG,OAAlB,GAA4B,CAA5B;;AAEA,qBAAK7B,OAAL,CAAa0B,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;;AAEA,qBAAK3B,OAAL,CAAa0B,IAAb,CAAkBG,OAAlB,GAA4B,CAA5B;;AAEA,qBAAK5B,QAAL,CAAcyB,IAAd,CAAmBC,MAAnB,GAA4B,KAA5B;;AAEA,qBAAK1B,QAAL,CAAcyB,IAAd,CAAmBG,OAAnB,GAA6B,CAA7B;AAEH,SArgDI;;AAugDT;;AAEA;;AAEIsG,0BAAkB,0BAAWvF,GAAX,EAAgBC,GAAhB,EAAsB;;AAEpC,qBAAK3C,UAAL,CAAgBwB,IAAhB,CAAqB6D,CAArB,GAAyB,KAAKjC,MAAL,CAAYV,GAAZ,EAAiBC,GAAjB,EAAsB0C,CAA/C;;AAEA,qBAAKrF,UAAL,CAAgBwB,IAAhB,CAAqB8D,CAArB,GAAyB,KAAKlC,MAAL,CAAYV,GAAZ,EAAiBC,GAAjB,EAAsB2C,CAA/C;;AAEA,qBAAKuG,kBAAL;AAEH,SAnhDI;;AAqhDLA,4BAAoB,8BAAY;;AAE5B,qBAAK7L,UAAL,CAAgBwB,IAAhB,CAAqBC,MAArB,GAA8B,IAA9B;;AAEA,qBAAKzB,UAAL,CAAgBwB,IAAhB,CAAqBG,OAArB,GAA+B,GAA/B;;AAEA,oBAAI2J,YAAY,KAAKtL,UAAL,CAAgBuL,IAAhB,CAAqB,SAArB,CAAhB;;AAEA,oBAAIO,OAAO,IAAX;;AAEA,yBAASC,UAAT,GAAyB;;AAErB3H,gCAAQC,GAAR,CAAa,YAAb;;AAEAyH,6BAAK9L,UAAL,CAAgBwB,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;;AAEAqK,6BAAK9L,UAAL,CAAgBwB,IAAhB,CAAqBG,OAArB,GAA+B,CAA/B;AAEH;;AAED2J,0BAAUU,EAAV,CAAa,UAAb,EAA0BD,UAA1B,EAAuC,KAAK/L,UAA5C;AAEH,SA3iDI;;AA6iDT;;AAEA;;AAEI;;;;;;;AAOAqB,2BAAmB,6BAAc;;AAE7B,oBAAK,KAAKkB,YAAL,IAAqB,YAA1B,EAAyC;;AAErC,6BAAKkG,aAAL,CAAoB,IAApB;AAEH,iBAJD,MAIO,IAAK,KAAKlG,YAAL,IAAqB,aAA1B,EAA0C;;AAE7C,6BAAKmG,cAAL,CAAqB,IAArB;AAEH;AAEJ,SApkDI;;AAskDL;;;AAGAD,uBAAe,uBAAWwD,WAAX,EAAyB;;AAEpC,oBAAKA,WAAL,EAAmB;AAAA,4BAUNC,gBAVM,GAUf,SAASA,gBAAT,GAA8B;;AAE1BJ,qCAAK7L,QAAL,CAAcuB,IAAd,CAAmBE,KAAnB,GAA2B,CAA3B;;AAEA,oCAAIyK,SAAS5N,GAAG6N,OAAH,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,CAAb;;AAEAN,qCAAK5L,WAAL,CAAiBsB,IAAjB,CAAsB6K,SAAtB,CAAiCF,MAAjC;;AAEAL,qCAAKxJ,cAAL,GAAsB,IAAtB;;AAEAwJ,qCAAK1K,UAAL;AAEH,yBAtBc;;AAEf;;AAEA,4BAAIM,QAAQnD,GAAG6N,OAAH,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,CAAZ;;AAEA,4BAAI/B,QAAQ9L,GAAG+N,SAAH,CAAc,GAAd,CAAZ;;AAEA,4BAAIR,OAAO,IAAX;;AAcC;;AAED,4BAAIS,MAAMhO,GAAGiO,QAAH,CAAc9K,KAAd,EACc2I,KADd,EAEc9L,GAAGkO,QAAH,CAAaP,gBAAb,EAA+B,IAA/B,EAAqC,KAAKjM,QAA1C,CAFd,CAAV;;AAIA,6BAAKA,QAAL,CAAcuB,IAAd,CAAmB6K,SAAnB,CAA8BE,GAA9B;AAEH,iBA9BD,MA8BO;AAAA,4BAOML,iBAPN,GAOH,SAASA,iBAAT,GAA8B,CAG7B,CAVE;;AAEH;AACA,4BAAIxK,QAAQnD,GAAG6N,OAAH,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,CAAZ;;AAEA,4BAAIN,OAAO,IAAX;;AAKC;;AAED,4BAAIS,MAAMhO,GAAGiO,QAAH,CAAa9K,KAAb,EACVnD,GAAGkO,QAAH,CAAaP,iBAAb,EAA+B,IAA/B,EAAqC,KAAKhM,WAA1C,CADU,CAAV;;AAGA,6BAAKA,WAAL,CAAiBsB,IAAjB,CAAsB6K,SAAtB,CAAiCE,GAAjC;AAEH;AAEJ,SA5nDI;;AA8nDL;;;AAGA7D,wBAAgB,wBAAWuD,WAAX,EAAyB;;AAErC,oBAAKA,WAAL,EAAmB;AAAA,4BAUNC,gBAVM,GAUf,SAASA,gBAAT,GAA8B;;AAE1BJ,qCAAK7L,QAAL,CAAcuB,IAAd,CAAmBE,KAAnB,GAA2B,CAA3B;;AAEA,oCAAIgL,SAASnO,GAAG6N,OAAH,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,CAAb;;AAEAN,qCAAK3L,YAAL,CAAkBqB,IAAlB,CAAuB6K,SAAvB,CAAkCK,MAAlC;;AAEAZ,qCAAKxJ,cAAL,GAAsB,IAAtB;;AAEAwJ,qCAAK1K,UAAL;AAEH,yBAtBc;;AAEf;;AAEA,4BAAIM,QAAQnD,GAAG6N,OAAH,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,CAAZ;;AAEA,4BAAI/B,QAAQ9L,GAAG+N,SAAH,CAAc,GAAd,CAAZ;;AAEA,4BAAIR,OAAO,IAAX;;AAcC;;AAED,4BAAIS,MAAMhO,GAAGiO,QAAH,CAAc9K,KAAd,EACc2I,KADd,EAEc9L,GAAGkO,QAAH,CAAaP,gBAAb,EAA+B,IAA/B,EAAqC,KAAKjM,QAA1C,CAFd,CAAV;;AAIA,6BAAKA,QAAL,CAAcuB,IAAd,CAAmB6K,SAAnB,CAA8BE,GAA9B;AAEH,iBA9BD,MA8BO;AAAA,4BAOML,kBAPN,GAOH,SAASA,kBAAT,GAA8B,CAG7B,CAVE;;AAEH;AACA,4BAAIxK,QAAQnD,GAAG6N,OAAH,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,CAAZ;;AAEA,4BAAIN,OAAO,IAAX;;AAKC;;AAED,4BAAIS,MAAMhO,GAAGiO,QAAH,CAAa9K,KAAb,EACcnD,GAAGkO,QAAH,CAAaP,kBAAb,EAA+B,IAA/B,EAAqC,KAAK/L,YAA1C,CADd,CAAV;;AAGA,6BAAKA,YAAL,CAAkBqB,IAAlB,CAAuB6K,SAAvB,CAAkCE,GAAlC;AAEH;AAEJ,SAprDI;;AAsrDD;;;AAGJI,yBAAiB,yBAAWV,WAAX,EAAyB;;AAEtC,oBAAIvK,QAAQnD,GAAG6N,OAAH,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,CAAZ;;AAEA,oBAAIN,OAAO,IAAX;;AAEA,yBAASI,gBAAT,GAA+B;;AAE3BJ,6BAAK7L,QAAL,CAAcuB,IAAd,CAAmBC,MAAnB,GAA4B,KAA5B;;AAEAqK,6BAAK7L,QAAL,CAAcuB,IAAd,CAAmBG,OAAnB,GAA6B,CAA7B;;AAEAmK,6BAAK7L,QAAL,CAAcuB,IAAd,CAAmBI,MAAnB,GAA4B,CAA5B;;AAEAwC,gCAAQC,GAAR,CAAa,oCAAb,EAAmD4H,WAAnD;;AAEA,4BAAKA,eAAe,KAApB,EAA4B;;AAExBH,qCAAKpD,cAAL,CAAqB,IAArB;AAEH,yBAJD,MAIO;;AAEHoD,qCAAKrD,aAAL,CAAoB,IAApB;AAEH;AAEJ;;AAED,oBAAI8D,MAAMhO,GAAGiO,QAAH,CAAa9K,KAAb,EACVnD,GAAGkO,QAAH,CAAYP,gBAAZ,EAA8B,IAA9B,EAAoC,KAAKjM,QAAzC,CADU,CAAV;;AAGA,qBAAKA,QAAL,CAAcuB,IAAd,CAAmB6K,SAAnB,CAA8BE,GAA9B;AAGH,SA3tDI;;AA6tDL;AACA/D,2BAAmB,6BAAc;;AAE7B,oBAAK,KAAKjG,YAAL,IAAqB,aAA1B,EAA0C;;AAEtC,6BAAKlC,eAAL,CAAqBuM,MAArB,GAA8B,KAAK7L,KAAL,CAAW8C,QAAX,KAAwB,GAAtD;AAEH,iBAJD,MAIO;;AAEH,6BAAKzD,cAAL,CAAoBwM,MAApB,GAA6B,KAAK7L,KAAL,CAAW8C,QAAX,KAAwB,GAArD;AAEH;AAEJ,SA1uDI;;AA4uDT;;AAEA;AACA;;;AAGIS,kBAAU,kBAAWuI,MAAX,EAAoB;;AAE1BzI,wBAAQC,GAAR,CAAa,gBAAb,EAA+B,KAAKjC,UAApC;;AAEA,qBAAKhD,SAAL,CAAewN,MAAf,GAAwBC,MAAxB;;AAEA,oBAAK,KAAKzK,UAAV,EAAuB;;AAEnB;AAEH,iBAJD,MAIO;;AAEH,6BAAK0K,SAAL;AAEH;AAEJ,SAlwDI;;AAowDLA,mBAAW,qBAAc;;AAErB1I,wBAAQC,GAAR,CAAa,YAAb;;AAEA,oBAAIyH,OAAO,IAAX;;AAEA,qBAAK1J,UAAL,GAAkB,IAAlB;;AAEA,qBAAKjD,MAAL,CAAYqC,IAAZ,CAAiBC,MAAjB,GAA0B,IAA1B;;AAEA,qBAAKtC,MAAL,CAAYqC,IAAZ,CAAiBG,OAAjB,GAA2B,GAA3B;;AAEA;AACA,oBAAID,QAAQnD,GAAG6N,OAAH,CAAW,GAAX,EAAgB,CAAhB,CAAZ;;AAEA,yBAASW,kBAAT,GAAgC;;AAE5B;AACA,6BAAKC,SAAL;AAEH;;AAED,oBAAI3C,QAAQ9L,GAAG+N,SAAH,CAAa,GAAb,CAAZ;;AAEA,oBAAIC,MAAMhO,GAAGiO,QAAH,CAAa9K,KAAb,EAAoB2I,KAApB,EACc9L,GAAGkO,QAAH,CAAYM,kBAAZ,EAAgC,IAAhC,EAAsC,KAAK5N,MAA3C,CADd,CAAV;;AAGA,qBAAKA,MAAL,CAAYqC,IAAZ,CAAiB6K,SAAjB,CAA4BE,GAA5B;AAEH,SAjyDI;;AAmyDLS,mBAAW,qBAAc;;AAErB;AACA,oBAAItL,QAAQnD,GAAG6N,OAAH,CAAW,GAAX,EAAgB,CAAhB,CAAZ;;AAEA,yBAASW,kBAAT,GAAgC;;AAE5B,6BAAK5N,MAAL,CAAYqC,IAAZ,CAAiBE,KAAjB,GAAyB,CAAzB;;AAEA,6BAAKU,UAAL,GAAkB,KAAlB;AAEH;;AAED,oBAAImK,MAAMhO,GAAGiO,QAAH,CAAa9K,KAAb,EAAoBnD,GAAGkO,QAAH,CAAYM,kBAAZ,EAAgC,IAAhC,EAAsC,KAAK5N,MAA3C,CAApB,CAAV;;AAEA,qBAAKA,MAAL,CAAYqC,IAAZ,CAAiB6K,SAAjB,CAA4BE,GAA5B;AAEH,SApzDI;;AAszDL;AACAhI,oBAAY,oBAAW0I,OAAX,EAAoBC,WAApB,EAAiCC,YAAjC,EAAgD;;AAExD,qBAAK5N,WAAL,CAAiBqN,MAAjB,GAA0BK,OAA1B;;AAEA,qBAAKzN,aAAL,CAAmBoN,MAAnB,GAA4BM,WAA5B;;AAEA,qBAAKzN,cAAL,CAAoBmN,MAApB,GAA6BO,YAA7B;;AAEA,oBAAK,KAAK9K,YAAV,EAAyB;;AAErB;AAEH,iBAJD,MAIO;;AAEH,6BAAK+K,WAAL;AAEH;AAEJ,SAz0DI;;AA20DLA,qBAAa,uBAAc;;AAEvB,oBAAItB,OAAO,IAAX;;AAEA,qBAAKzJ,YAAL,GAAoB,IAApB;;AAEA;AACA,oBAAIX,QAAQnD,GAAG6N,OAAH,CAAW,GAAX,EAAgB,CAAhB,CAAZ;;AAEA,yBAASW,kBAAT,GAAgC,CAG/B;;AAED,oBAAI1C,QAAQ9L,GAAG+N,SAAH,CAAa,GAAb,CAAZ;;AAEA,oBAAIC,MAAMhO,GAAGiO,QAAH,CAAa9K,KAAb,EAAoB2I,KAApB,EACc9L,GAAGkO,QAAH,CAAYM,kBAAZ,EAAgC,IAAhC,EAAsC,KAAKzN,QAA3C,CADd,CAAV;;AAGA,qBAAKA,QAAL,CAAckC,IAAd,CAAmB6K,SAAnB,CAA8BE,GAA9B;AAEH,SAh2DI;;AAk2DL/H,qBAAa,uBAAc;;AAEvB;AACA,oBAAI9C,QAAQnD,GAAG6N,OAAH,CAAW,GAAX,EAAgB,CAAhB,CAAZ;;AAEA,yBAASW,kBAAT,GAAgC;;AAE5B,6BAAKzN,QAAL,CAAckC,IAAd,CAAmBE,KAAnB,GAA2B,CAA3B;;AAEA,6BAAKW,YAAL,GAAoB,KAApB;AAEH;;AAED,oBAAIkK,MAAMhO,GAAGiO,QAAH,CAAa9K,KAAb,EAAoBnD,GAAGkO,QAAH,CAAYM,kBAAZ,EAAgC,IAAhC,EAAsC,KAAKzN,QAA3C,CAApB,CAAV;;AAEA,qBAAKA,QAAL,CAAckC,IAAd,CAAmB6K,SAAnB,CAA8BE,GAA9B;AAEH,SAn3DI;;AAs3DT;;AAEA;;AAEIxC,0BAAkB,4BAAY;;AAE1B,oBAAI+B,OAAO,IAAX;;AAEA,oBAAIuB,cAAc9O,GAAG4G,WAAH,CAAgB,KAAKtE,aAArB,CAAlB;;AAEAwM,4BAAYjI,YAAZ,CAAyB,YAAzB;;AAEAiI,4BAAYvL,cAAZ,CAA2B,GAA3B;;AAEAuL,4BAAY9H,MAAZ,GAAqB,KAAK/E,UAA1B;;AAEA6M,4BAAYhI,CAAZ,GAAgB,GAAhB;;AAEAgI,4BAAY/H,CAAZ,GAAgB,GAAhB;;AAEA,yBAASgI,UAAT,GAAyB;;AAErB;;AAEAxB,6BAAK5B,SAAL;AAEH;;AAEDmD,4BAAY7H,YAAZ,CAAyB,YAAzB,EAAuC+H,QAAvC;;AAEAF,4BAAY7H,YAAZ,CAAyB,YAAzB,EAAuCgI,mBAAvC,CAA4D,QAA5D,EAAsEF,UAAtE;AAEH;;AAEL;AAx5DS,CAAT","file":"Doushouqi_back.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\resources\\Script\\view\\games\\doushouqi","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\n/**\r\n * @brief: 斗兽棋主场景\r\n * @time:  2018-04-28\r\n * @author: JiangTao kungfupandajt@163.com\r\n */\r\n\r\nvar Com = require('Com');\r\nvar onfire=require(\"onfire\");           //处理事件的类库\r\nvar requestHandler = require(\"RequestHandler\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        sp_head_red: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        sp_head_blue: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        node_table: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        sp_tip: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        label_tip: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        sp_alert: {\r\n            default:null,\r\n            type:cc.Sprite,\r\n        },\r\n\r\n        label_alert: {\r\n            default:null,\r\n            type:cc.Label,\r\n        },\r\n\r\n        // 红色按钮文字\r\n        label_red_btn: {\r\n            default:null,\r\n            type:cc.Label,\r\n        },\r\n\r\n        // 蓝色按钮文字\r\n        label_blue_btn: {\r\n            default:null,\r\n            type:cc.Label,\r\n        },\r\n\r\n        node_dir: {\r\n            default: null,\r\n            type:cc.Node\r\n        },\r\n\r\n        sp_up: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_down: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_left: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_right: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        sp_destory: {\r\n            default: null,\r\n            type: cc.Animation\r\n        },\r\n\r\n        // 白板\r\n        sp_white: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n\r\n        // 红色方时间面板\r\n        sp_red_time: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n\r\n        // 蓝色方时间面板\r\n        sp_blue_time: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n\r\n        // 红方时间\r\n        label_red_time: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n\r\n        // 蓝方时间\r\n        label_blue_time: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n\r\n        sp_test:  {\r\n            default: null,\r\n            type: cc.SpriteFrame\r\n        },\r\n\r\n        nodeResult: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        animal_blue_Prefab: cc.Prefab,      // 蓝方预制资源\r\n\r\n        animal_red_Prefab: cc.Prefab,       // 红方预制资源\r\n\r\n        empty_prefab: cc.Prefab,            // 空的预制资源\r\n\r\n        result_prefab: cc.Prefab,           // 结果预知资源\r\n\r\n        defalutTiem:30,     //  默认操作时间\r\n\r\n        count: 30,          //  倒计时计次\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n        Com.onLoadAudio();\r\n\r\n        this.init();\r\n\r\n        this.initUI();\r\n\r\n        this.openUpdate();\r\n\r\n        this.onOptionalTimeAni();\r\n\r\n    },\r\n\r\n    // 销毁时调用\r\n    onDestroy(){\r\n\r\n    },\r\n\r\n    start () {\r\n\r\n\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n\r\n    initUI: function (  ) {\r\n\r\n        this.sp_tip.node.active = true;\r\n\r\n        this.sp_tip.node.scale = 0;\r\n\r\n        this.sp_alert.node.active = true;\r\n\r\n        this.sp_alert.node.scale = 0;\r\n\r\n        this.sp_destory.node.active = false;\r\n\r\n        this.sp_destory.node.opacity = 0;\r\n\r\n        this.sp_white.node.active = true;\r\n\r\n        this.sp_white.node.opacity = 255;\r\n\r\n        this.sp_red_time.node.active = true\r\n\r\n        this.sp_red_time.node.opacity = 255;\r\n\r\n        this.sp_red_time.node.scaleY = 0;\r\n\r\n        this.sp_blue_time.node.active = true\r\n\r\n        this.sp_blue_time.node.opacity = 255;\r\n\r\n        this.sp_blue_time.node.scaleY = 0;\r\n\r\n        this.onHideTipDir();\r\n\r\n        this.node_dir.setLocalZOrder(100);\r\n\r\n        this.sp_destory.node.setLocalZOrder(100);\r\n\r\n    },\r\n\r\n    // init 初始化\r\n    init: function (  ) {\r\n\r\n        this._blueAnimal = [];\r\n\r\n        this._redAnimal = [];\r\n\r\n        this._rand01     = -1;\r\n\r\n        this._blueSelf   = true;\r\n\r\n        this._pinkSelf   = false;\r\n\r\n        this._isShowTip  = false;\r\n\r\n        this._isShowAlert = false;\r\n\r\n        this._isCanOptional = false;        //当前是否可以进行操作\r\n\r\n        this._optionalObj= \"Animal_blue\";   //默认操作对象为blue\r\n\r\n        this._selectedPoint = [-1, -1];     //记录被选中的动物\r\n\r\n        // row:行\r\n        this._selectedObj= {row:-1, col:-1, count:0}; //\r\n\r\n        // eq:相等 gt:(greater than) 大于 lt:(less than) 小与\r\n        this._compareState = { eq:0, gt:1, lt:2, same:3 };\r\n\r\n        this.width = cc.winSize.width;\r\n\r\n        this.height = cc.winSize.height;\r\n\r\n        // 所有点集合\r\n        this.allPos =   [   [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\r\n                            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\r\n                            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\r\n                            [cc.Vec2, cc.Vec2, cc.Vec2, cc.Vec2],\r\n                        ];\r\n\r\n        this.allBtnEmpty = [\r\n\r\n                            [cc.Button, cc.Button, cc.Button, cc.Button],\r\n                            [cc.Button, cc.Button, cc.Button, cc.Button],\r\n                            [cc.Button, cc.Button, cc.Button, cc.Button],\r\n                            [cc.Button, cc.Button, cc.Button, cc.Button],\r\n                            \r\n                        ];\r\n\r\n        var pos = null;\r\n\r\n        var emptyNode = null;\r\n\r\n        for (let index = 0; index < 4; index++) {\r\n\r\n            for (let jndex = 0; jndex < 4; jndex++ ) {\r\n\r\n                emptyNode = this.node_table.getChildByName(\"node_pos_\" + index.toString() + jndex.toString())\r\n\r\n                pos = emptyNode.position;\r\n\r\n                this.allPos[index][jndex] = pos;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // 所有动物集合\r\n        this.tableNodes =   [   [{}, {}, {}, {}],\r\n                                [{}, {}, {}, {}],\r\n                                [{}, {}, {}, {}],\r\n                                [{}, {}, {}, {}],\r\n                            ];\r\n\r\n        this.onInitTable();\r\n\r\n    },\r\n\r\n    // 按钮事件监听\r\n    onTouchListener: function ( event, customEventData ){\r\n\r\n        console.log( \" customEventData \", customEventData );\r\n\r\n        if ( customEventData == \"back\" ) {\r\n\r\n            this.onAddTip( \"back-home\" ); \r\n            // this.onAddAlert( \"确定要退出游戏吗？\", \"取消\", \"确认\" );\r\n\r\n        } else if ( customEventData == \"help\" ) {\r\n\r\n            // this.onBlueBoardAni( true );\r\n            // this.sp_test.node.height = 300;\r\n\r\n\r\n        } else if ( customEventData == \"qiuhe\" ) {\r\n\r\n            this.onAddAlert( \"对方向您求平局\", \"拒绝\", \"同意\" );\r\n\r\n        } else if ( customEventData == \"renshu\" ) {\r\n\r\n            this.onAddAlert( \"您确定要认输吗？\", \"取消\", \"确认\" );\r\n\r\n        } else if ( customEventData == \"btn_refuse\" ) {\r\n\r\n            // 拒绝按钮\r\n            this.onHideAlert();\r\n\r\n        } else if ( customEventData == \"btn_agree\" ) {\r\n\r\n            // 确认按钮\r\n            this.onHideAlert();\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 玩家头像加载\r\n    onLoadHeadImg: function (  ) {\r\n\r\n\r\n\r\n    },\r\n\r\n    // 初始化玩家棋盘\r\n    onInitTable: function () {\r\n        // 随机生成动物\r\n        /**\r\n         *  首先：当前格子生成那个颜色的动物 0 蓝色动物 1 粉色动物\r\n         *  其次：根据颜色，随机生成相应的动物。【1-8】 分别代表不同的动物，去重随机，如果发现\r\n         *      随机到相同的数字，则删除，重新随机\r\n         *  在每次随机的时候都要判断0或1（也就是蓝色动物或粉色动物）是否已经随机了8中动物，如果随机够了，则不在\r\n         *  进行随机；此时只随机另一种颜色的动物。 如果两种动物都随机够了，则停止。\r\n         */\r\n        this.onDelRepeatRandBlue();\r\n\r\n        this.onDelRepeatRandPink();\r\n\r\n        var empty = null;\r\n\r\n        var btnEmpty = null;\r\n\r\n        var _animal = null;\r\n\r\n        var _rand0Count = 0;\r\n\r\n        var _rand1Count = 0;\r\n\r\n        var _componentStr = '';\r\n\r\n        for (let index = 0; index < this.tableNodes.length; index++) {\r\n\r\n            for (let jndex =0; jndex < this.tableNodes[index].length; jndex++ ) {\r\n\r\n                btnEmpty = cc.instantiate( this.empty_prefab );\r\n\r\n                btnEmpty.addComponent('BtnEmpty');\r\n\r\n                btnEmpty.x = this.allPos[index][jndex].x;\r\n\r\n                btnEmpty.y = this.allPos[index][jndex].y;\r\n\r\n                btnEmpty.setLocalZOrder(0);\r\n\r\n                btnEmpty.parent = this.node_table;\r\n\r\n                this.allBtnEmpty[index][jndex] = btnEmpty;\r\n\r\n                btnEmpty.getComponent('BtnEmpty').onSetRowAndCol( index, jndex );\r\n\r\n                btnEmpty.getComponent('BtnEmpty').onSetTouchCallback( this.onEmptyTouchCallback.bind(this) );\r\n\r\n                var rand01 = Com.onRandomNum(0, 2);\r\n\r\n                if ( _rand0Count == 8 ) {\r\n\r\n                    rand01 = 1;\r\n\r\n                }else if ( _rand1Count == 8 ) {\r\n\r\n                    rand01 = 0;\r\n\r\n                }\r\n\r\n                if ( rand01 == 0 ) {\r\n\r\n                    _animal = cc.instantiate( this.animal_blue_Prefab )\r\n\r\n                    _rand0Count += 1;\r\n\r\n                    _componentStr = 'Animal_blue';\r\n\r\n                    _animal.componentStr = 'Animal_blue';\r\n\r\n                    _animal.addComponent(_componentStr);\r\n\r\n                    _animal.getComponent(_componentStr).init();\r\n\r\n                    _animal.getComponent(_componentStr).onLoadAnimal( this._blueAnimal[_rand0Count - 1] );\r\n\r\n                    _animal.getComponent(_componentStr).onSetSelf( this._blueSelf );\r\n\r\n                } else if ( rand01 == 1 ) {\r\n\r\n                    _animal = cc.instantiate( this.animal_red_Prefab )\r\n\r\n                    _rand1Count += 1;\r\n\r\n                    _componentStr = 'Animal_red';\r\n\r\n                    _animal.componentStr = 'Animal_red';\r\n\r\n                    _animal.addComponent(_componentStr);\r\n\r\n                    _animal.getComponent(_componentStr).init();\r\n\r\n                    _animal.getComponent(_componentStr).onLoadAnimal( this._redAnimal[_rand1Count - 1] );\r\n\r\n                    _animal.getComponent(_componentStr).onSetSelf( this._pinkSelf );\r\n\r\n                }\r\n\r\n                _animal.x = this.allPos[index][jndex].x;\r\n\r\n                _animal.y = this.allPos[index][jndex].y;\r\n\r\n                _animal.active = true;\r\n\r\n                _animal.opacity = 255;\r\n\r\n                _animal.setLocalZOrder(2);\r\n\r\n                _animal.parent = this.node_table;\r\n\r\n                this.tableNodes[index][jndex] = { isDie:false, animal:_animal }\r\n\r\n                _animal.getComponent(_componentStr).onSetRowAndCol( index, jndex );\r\n\r\n                _animal.getComponent(_componentStr).onBreakBombCallback( this.onBombTouchCallback.bind(this) );\r\n\r\n                _animal.getComponent(_componentStr).onSetTouchCallback( this.onTouchCallback.bind(this) );\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n    },\r\n\r\n    // 去重随机 蓝色动物\r\n    /**\r\n     * for(i=0;i<10;i++)                    //产生10个随机数\r\n        {\r\n            A[i]=1+rand()%10;                //得到随机数(范围在1-10之间)\r\n                for(j=0;j<i;j++)                 //判断和前面的数是否重复\r\n                    if(A[i]==A[j]) {\r\n                        i--;\r\n                        break;\r\n                    }  //如果重复,重新产生随机数\r\n        }\r\n     */\r\n    onDelRepeatRandBlue: function (  ) {\r\n\r\n        var idx = 0;\r\n\r\n        for (;idx < 8; idx++) {\r\n\r\n            var randNum = Com.onRandomNum(1, 9);\r\n\r\n            this._blueAnimal.push(randNum); \r\n\r\n            for (let jndex = 0; jndex < idx; jndex++) {\r\n\r\n                if ( randNum == this._blueAnimal[jndex] ) {\r\n\r\n                    this._blueAnimal.splice( idx, 1 );\r\n\r\n                    idx--;\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        \r\n\r\n    },\r\n\r\n    // 去重随机 粉色动物\r\n    onDelRepeatRandPink: function (  ) {\r\n\r\n        var idx = 0;\r\n\r\n        for (; idx < 8; idx++) {\r\n\r\n            var randNum = Com.onRandomNum(1, 9);\r\n\r\n            this._redAnimal.push(randNum); \r\n\r\n            for (let jndex = 0; jndex < idx; jndex++) {\r\n\r\n                if ( randNum == this._redAnimal[jndex] ) {\r\n\r\n                    this._redAnimal.splice( idx, 1 );\r\n\r\n                    idx--;\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 点击棋子回调；一次只能点击一个自己的棋子；如果点击自己的第二枚棋子，则取消前一个选中的棋子；\r\n    // 如果点击自己的棋子后，在点击对方的棋子则进行对比大小，然后进行消除的逻辑\r\n    // 如果点击的是初始的方块，则是翻棋子，然后轮到对方操作\r\n\r\n    // 首先判断当前是否为蓝方操作，如果是，在没有选中蓝方的情况下，是不可以点击粉色动物的；在选中蓝方情况下，\r\n    // 点击任意一种颜色动物，都要进行判断（是否相邻，如果相邻，可以进行比较吃或被吃，如果不相邻，取消被选中状态）\r\n\r\n\r\n    //切换动物操作时候有问题\r\n    /**\r\n     *  有哪些操作需要切换用户操作\r\n     *  1.默认是蓝色方操作（不管是蓝方操作还是粉方操作），在点击翻开棋子动作后切换用户\r\n     *  2.点击棋子移动（或者吃掉另一方的棋子），切换用户\r\n     */\r\n    onTouchCallback: function ( row, col, componentStr, isSelected ) {\r\n\r\n        // console.log( \"onTouchCall&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\", this._isCanOptional );\r\n\r\n        if ( !this._isCanOptional ) {\r\n\r\n            this.onAddTip( \"您操作太频繁，请稍等...\" );\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        // 当前蓝色方是否被选中 选中（可以随便点任何一个地方，如果点击的地方不与它相邻，则恢复到正常状态，如果点击的\r\n        // 的是扣着的对象，则直接翻开，显示小动物并且恢复到正常状态）\r\n\r\n        // console.log( \" this._optionalObj onTouchCallback \", this._optionalObj, isSelected);\r\n\r\n        // 首先操作对象要一致 然后判断当前是否被选中 在判断：如果选中了同颜色的\r\n        if ( this._optionalObj == componentStr && isSelected) {\r\n\r\n            if ( this._selectedObj.count == 0 ) {\r\n\r\n                this._selectedObj.count = 1;\r\n\r\n                this._selectedObj.row = row;\r\n\r\n                this._selectedObj.col = col;\r\n\r\n                this.tableNodes[row][col].animal.getComponent(this._optionalObj).onRunBig();\r\n\r\n                this.onCheckRoundMove( row, col, this.tableNodes[row][col].animal.getComponent(this._optionalObj) );\r\n\r\n                console.log( \"this._selectedObj.count == 0\" );\r\n\r\n            } else if ( this._selectedObj.count >= 1 ) {\r\n\r\n                console.log( \"this._selectedObj.count >= 1\" );\r\n\r\n                this.tableNodes[this._selectedObj.row][this._selectedObj.col].animal.getComponent(this._optionalObj).onRunSmall();\r\n\r\n                this.onHideTipDir();\r\n\r\n                this._selectedObj.count = 0;\r\n\r\n                this._selectedObj.row = -1;\r\n\r\n                this._selectedObj.col = -1;\r\n\r\n            }\r\n\r\n        } else if ( this._optionalObj == componentStr && !isSelected ) {\r\n\r\n            this._selectedObj.count = 0;\r\n\r\n            this._selectedObj.row = -1;\r\n\r\n            this._selectedObj.col = -1;\r\n\r\n            this.onHideTipDir();\r\n\r\n        } else {\r\n            //如果没有被选中的棋子，就点击了其它颜色的棋子 提示玩家不允许操作其它玩家的棋子\r\n            if ( !this.onCheckOptionalValid() ) {\r\n\r\n                this.onAddTip( \"不可以操作其他玩家棋子\" );\r\n\r\n                return;\r\n\r\n            }\r\n\r\n            // 消除操作 计算 根据\r\n            /**\r\n             *  已经记录了被选中的点\r\n             *  1.计算传过来的点是否与被选中的点是否相邻\r\n             *  2.具体算法：(row - 1 >= 0 && row - 1 == selected[0])\r\n             */\r\n\r\n            if ( this.onClearAlgorithm( row, col ) && !this.onCheckAnimalSame( row, col ) ) {\r\n\r\n                // 可以进行消除逻辑 让当前被选中的小动物，进行移动到将被消除的小动物位置\r\n\r\n                var index0 = this._selectedObj.row;\r\n\r\n                var index1 = this._selectedObj.col;\r\n\r\n                var targetPos = { x:this.tableNodes[row][col].animal.x,\r\n                                    y:this.tableNodes[row][col].animal.y };\r\n\r\n                // var targetPos = this.node_table.node.convertToNodeSpaceAR(tempPos)\r\n\r\n                // console.log( \"selected x y\", this.tableNodes[index0][index1].x, this.tableNodes[index0][index1].y );\r\n\r\n                // console.log( \"index0 index1\", index0, index1 );\r\n\r\n                // console.log( \"targetPos \", targetPos.x, targetPos.y );\r\n\r\n                this.tableNodes[index0][index1].animal.getComponent(this._optionalObj).node.setLocalZOrder(99);\r\n\r\n                // 移动 回调删除被吃掉的棋子（被吃掉的棋子进行删除）\r\n                this.tableNodes[index0][index1].animal.getComponent(this._optionalObj).onMoveToTarget( targetPos, row, col, this.onMoveCallbackDel.bind(this) );\r\n\r\n            } else {\r\n\r\n                var index0 = this._selectedObj.row;\r\n\r\n                var index1 = this._selectedObj.col;\r\n\r\n                this.tableNodes[index0][index1].animal.getComponent(this._optionalObj).onRunSmall();\r\n\r\n                this.onHideTipDir();\r\n\r\n                // 不可以进行消除 原地不动\r\n                this._selectedObj.row = -1;\r\n\r\n                this._selectedObj.col = -1;\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // 点击默认占位的对象后回调\r\n    onBombTouchCallback: function ( row, col, componentStr ) {\r\n\r\n        console.log( \"onBombTouchCall\", this._isCanOptional );\r\n\r\n        if ( !this._isCanOptional ) {\r\n\r\n            this.onAddTip( \"您操作太频繁，请稍等...\" );\r\n            \r\n            return;\r\n\r\n        } else {\r\n\r\n            this.tableNodes[row][col].animal.getComponent(componentStr).playAnimation( this.onAnimaltionBreakCallback.bind(this) );\r\n\r\n        }\r\n\r\n    },\r\n\r\n    onAnimaltionBreakCallback: function ( row, col ) {\r\n\r\n        this.onCheckOptionSelf();\r\n\r\n        this.tableNodes[row][col].animal.active = true;\r\n\r\n        this.tableNodes[row][col].animal.opacity = 255;\r\n\r\n        // var tempNode = null;\r\n\r\n        // var comStr   = \"\";\r\n\r\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\r\n        // for (let index = 0; index < this.tableNodes.length; index++) {\r\n\r\n        //     for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\r\n\r\n        //         if ( !this.tableNodes[index][jndex].isDie ) {\r\n\r\n        //             tempNode = this.tableNodes[index][jndex].animal;\r\n\r\n        //             comStr   = tempNode.componentStr;\r\n\r\n        //             if ( tempNode.getComponent(comStr).getAnimalIsBig() ) {\r\n\r\n        //                 tempNode.getComponent(comStr).onRunSmall();\r\n\r\n        //             } else {\r\n\r\n\r\n        //             }\r\n\r\n        //         }\r\n\r\n        //     }\r\n        // }\r\n\r\n        this.onResetStatus();\r\n\r\n        this.onHideTipDir();\r\n\r\n    },\r\n\r\n    // 点击空白方块的回调\r\n    onEmptyTouchCallback: function ( row, col ) {\r\n\r\n        console.log( \"onEmptyTouchCallback\", row, col );\r\n        // 把被选中的动物移动到当前位置\r\n        if ( this.onClearAlgorithm( row, col ) ) {\r\n\r\n            // this._optionalObj\r\n            var index0 = this._selectedObj.row;\r\n\r\n            var index1 = this._selectedObj.col;\r\n\r\n            var targetPos = { x:this.allBtnEmpty[row][col].x,\r\n                                y:this.allBtnEmpty[row][col].y };\r\n\r\n            this.tableNodes[index0][index1].animal.getComponent(this._optionalObj).onMoveToTarget( targetPos, row, col, this.onMoveCallback.bind(this) );                \r\n\r\n        } else {\r\n\r\n            // 不能移动\r\n\r\n        }\r\n\r\n\r\n    },\r\n\r\n    // 移动后并且删除被吃掉的棋子\r\n    onMoveCallbackDel: function ( row, col ) {\r\n\r\n        // 设置操作棋子的row col\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        if ( this.onCheckCompare( row, col ) == this._compareState.eq ) {\r\n\r\n            // 两个棋子都删除\r\n\r\n            var delStrTarget = this.tableNodes[row][col].animal.componentStr;\r\n\r\n            var delStrSelected = this.tableNodes[selected0][selected1].animal.componentStr;\r\n\r\n            this.onPlayDestoryAni( row, col );\r\n    \r\n            // 删除被吃掉的棋子\r\n            this.tableNodes[row][col].animal.getComponent(delStrTarget).onDestory();\r\n\r\n            this.tableNodes[selected0][selected1].animal.getComponent(delStrSelected).onDestory();\r\n\r\n            this.tableNodes[row][col].isDie = true;\r\n\r\n            this.tableNodes[selected0][selected1].isDie = true;\r\n\r\n        } else if ( this.onCheckCompare( row, col ) == this._compareState.gt ) {\r\n\r\n            // selected被吃掉\r\n\r\n            var delStr = this.tableNodes[selected0][selected1].animal.componentStr;\r\n    \r\n            this.tableNodes[selected0][selected1].isDie = true;\r\n\r\n            this.tableNodes[row][col].isDie = false;\r\n    \r\n            this.onPlayDestoryAni( row, col );\r\n            // 删除被吃掉的棋子\r\n            this.tableNodes[selected0][selected1].animal.getComponent(delStr).onDestory();\r\n\r\n        } else if ( this.onCheckCompare( row, col ) == this._compareState.lt ) {\r\n\r\n            // 目标被吃掉\r\n            var delStr = this.tableNodes[row][col].animal.componentStr;\r\n\r\n            var selectedStr = this.tableNodes[selected0][selected1].animal.componentStr;\r\n            \r\n            this.tableNodes[row][col].isDie = true;\r\n\r\n            this.tableNodes[selected0][selected1].isDie = false;\r\n\r\n            this.tableNodes[selected0][selected1].animal.getComponent(selectedStr).node.setLocalZOrder(1);\r\n    \r\n            this.onPlayDestoryAni( row, col );\r\n            // 删除被吃掉的棋子\r\n            this.tableNodes[row][col].animal.getComponent(delStr).onDestory();\r\n    \r\n            this.tableNodes[row][col].animal = this.tableNodes[selected0][selected1].animal;\r\n\r\n            this.tableNodes[row][col].isDie = this.tableNodes[selected0][selected1].isDie;\r\n\r\n            this.tableNodes[selected0][selected1].isDie = true;\r\n\r\n            this.tableNodes[selected0][selected1].animal.getComponent(this._optionalObj).onSetRowAndCol( row, col );\r\n\r\n        } else if ( this.onCheckCompare( row, col ) == -1 ) {\r\n\r\n            // this.onAddTip( \"比较大小出错(-1),请检查参数是否正确\" );\r\n            return;\r\n\r\n        }\r\n\r\n        // console.log( \"onMoveCallbackDel === \", this.tableNodes[row][col].isDie );\r\n\r\n        // 检测游戏结果\r\n        if ( this.onCheckResult() ) {\r\n\r\n            // this.closeUpdate();\r\n\r\n        } else {\r\n\r\n            // 切换操作对象\r\n            this.onCheckOptionSelf();\r\n\r\n        }\r\n\r\n    },\r\n\r\n    //  移动结果回调\r\n    onMoveCallback: function ( row, col ) {\r\n\r\n        // 切换操作用户\r\n        console.log( \"移动完成\" );\r\n        // 移动后属性互换\r\n\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        var targetDie = this.tableNodes[row][col].isDie;\r\n\r\n        this.tableNodes[row][col].animal = this.tableNodes[selected0][selected1].animal;\r\n\r\n        this.tableNodes[row][col].isDie = this.tableNodes[selected0][selected1].isDie;\r\n\r\n        this.tableNodes[selected0][selected1].isDie = targetDie;\r\n\r\n        this.tableNodes[selected0][selected1].animal.getComponent(this._optionalObj).onSetRowAndCol( row, col );\r\n\r\n        this.onCheckOptionSelf();\r\n        // this.closeUpdate();\r\n\r\n    },\r\n\r\n    // 切换用户\r\n    onCheckOptionSelf: function (  ) {\r\n\r\n        this.closeUpdate();\r\n\r\n        this.onSetOptionalTime();\r\n\r\n        // 要清理 自己的棋子的状态\r\n        this.onResetStatus();\r\n\r\n        this._selectedObj.row = -1;\r\n\r\n        this._selectedObj.col = -1;\r\n\r\n        this._selectedObj.count = 0;\r\n\r\n        if ( this._optionalObj == \"Animal_blue\" ) {\r\n\r\n            this._optionalObj = \"Animal_red\";\r\n\r\n            this.onRedBoardAni( true );\r\n\r\n            this.onBlueBoardAni( false );\r\n\r\n        } else if ( this._optionalObj == \"Animal_red\" ) {\r\n\r\n            this._optionalObj = \"Animal_blue\";\r\n\r\n            this.onBlueBoardAni( true );\r\n\r\n            this.onRedBoardAni( false );\r\n\r\n        }\r\n\r\n        // this.onAddTip( this._optionalObj );\r\n\r\n        this.onHideTipDir();\r\n\r\n        this.onShowValidOptionalObj();\r\n\r\n    },\r\n\r\n    //计算点击后是否可以进行移动\r\n    onClearAlgorithm: function ( row, col ) {\r\n\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        var isClear = false;\r\n\r\n        if ( row - 1 == selected0 && col == selected1 ) {\r\n\r\n            // 消除\r\n            isClear = true;\r\n            // console.log( \" row  - 1 \" );\r\n\r\n        } else if ( row + 1 == selected0 && col == selected1 ) {\r\n\r\n            // 消除\r\n            isClear = true;\r\n            // console.log( \" row  + 1 \" );\r\n\r\n        } else if ( row == selected0 && col - 1 == selected1 ) {\r\n\r\n            // 消除\r\n            isClear = true;\r\n            // console.log( \" col  - 1 \" );\r\n            \r\n        } else if ( row == selected0 && col + 1 == selected1 ) {\r\n\r\n            // 消除\r\n            isClear = true;\r\n            // console.log( \" col + 1 \" );\r\n\r\n        } else if ( selected0 == -1 && selected1 == -1 ) {\r\n\r\n            // 不可以消除 直接\r\n            isClear = false;\r\n            // console.log( \" selected0 -1 selected1 -1\" );\r\n\r\n        } else {\r\n\r\n            // 不可以消除 直接\r\n            isClear = false;  \r\n            // console.log( \" else \" );  \r\n\r\n        }\r\n\r\n        console.log( \"isClear ===== \", isClear );\r\n\r\n        return isClear;\r\n\r\n    },\r\n\r\n    // 点击后是否能吃掉对方  消除\r\n    /**\r\n     *  比较大小\r\n     *  1.如果移动的棋子比固定的棋子大，则吃掉对方；否则被吃掉；\r\n     *  2.如果相等，则两个棋子都消失\r\n     */\r\n    onCheckCompare: function ( row, col ) {\r\n\r\n        // this._compareState\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        var targetObj = this.tableNodes[row][col].animal.componentStr;\r\n\r\n        var selectedIndex = this.tableNodes[selected0][selected1].animal.getComponent(this._optionalObj).onGetAnimalIndex(  );\r\n\r\n        var targetIndex   = this.tableNodes[row][col].animal.getComponent(targetObj).onGetAnimalIndex(  );\r\n\r\n        // 首先是特殊情况 老鼠可以吃大象 所以\r\n        /**\r\n         *  所有这个两个对象 如果index一个是8 并且一个是1  要特殊处理\r\n         *  要把大象吃掉\r\n         * \r\n         *  相同颜色的动物不可以互相吃掉\r\n         */\r\n\r\n        // console.log( \"selectedIndex targetIndex\", selectedIndex, targetIndex );\r\n\r\n        var compareState = -1;\r\n\r\n        if ( (selectedIndex == 8 && targetIndex == 1 ) ) {\r\n\r\n            // 假设被选中的是大象，目标是老鼠 这时候，大象被吃\r\n            compareState = this._compareState.lt;\r\n\r\n        } else if ( (selectedIndex == 1 && targetIndex == 8 ) ) {\r\n\r\n            // 假设被选中的是老鼠，目标是大象 这时候，大象被吃\r\n            compareState = this._compareState.gt;\r\n\r\n        } else if ( selectedIndex == targetIndex ) {\r\n\r\n            compareState = this._compareState.eq;\r\n\r\n        } else if ( selectedIndex > targetIndex ) {\r\n\r\n            compareState = this._compareState.gt;\r\n\r\n        } else if ( selectedIndex < targetIndex ) {\r\n\r\n            compareState = this._compareState.lt;\r\n\r\n        }\r\n\r\n        return compareState;\r\n\r\n    },\r\n\r\n    // 判断两个动物是否相同\r\n    onCheckAnimalSame: function ( row, col ) {\r\n\r\n        var isSame = false;\r\n\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        var targetComStr = this.tableNodes[row][col].animal.componentStr;\r\n\r\n        var selectedStr = this.tableNodes[selected0][selected1].animal.componentStr;\r\n\r\n        // console.log( \" onCheckAnimalSame \", row, col, targetComStr, selectedStr );\r\n\r\n        if ( targetComStr == selectedStr ) {\r\n\r\n            this.tableNodes[selected0][selected1].animal.getComponent(selectedStr).onRunSmall();\r\n\r\n            this.tableNodes[row][col].animal.getComponent(targetComStr).onRunSmall();\r\n\r\n            this.onHideTipDir();\r\n\r\n            isSame = true;\r\n\r\n        }\r\n\r\n        return isSame;\r\n\r\n    },\r\n\r\n    // 检测操作是否合法\r\n    onCheckOptionalValid: function (  ) {\r\n\r\n        var selected0 = this._selectedObj.row;\r\n\r\n        var selected1 = this._selectedObj.col;\r\n\r\n        if ( selected0 == -1 && selected1 == -1 ) {\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    },\r\n\r\n    // 显示有效的操作对象\r\n    onShowValidOptionalObj: function (  ) {\r\n\r\n        console.log( \" onShowValidOptionalObj \" );\r\n\r\n        var tempNode = null;\r\n\r\n        var comStr = '';\r\n\r\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\r\n        for (let index = 0; index < this.tableNodes.length; index++) {\r\n\r\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\r\n\r\n                if ( !this.tableNodes[index][jndex].isDie ) {\r\n\r\n                    tempNode = this.tableNodes[index][jndex].animal;\r\n\r\n                    comStr   = tempNode.componentStr;\r\n\r\n                    if ( tempNode.getComponent(comStr).getAnimalIsBreak() ) {\r\n\r\n                        if ( this._optionalObj == comStr ) {\r\n\r\n                            tempNode.getComponent(comStr).onShowSelfTip();\r\n\r\n                        } else {\r\n\r\n                            tempNode.getComponent(comStr).onHideTip();\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        tempNode.getComponent(comStr).onOptionalObj();\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    // 重置棋子的状态\r\n    onResetStatus: function (  ) {\r\n\r\n        var tempNode = null;\r\n\r\n        var comStr = '';\r\n\r\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\r\n        for (let index = 0; index < this.tableNodes.length; index++) {\r\n\r\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\r\n\r\n                if ( !this.tableNodes[index][jndex].isDie ) {\r\n\r\n                    tempNode = this.tableNodes[index][jndex].animal;\r\n\r\n                    comStr   = tempNode.componentStr;\r\n\r\n                    if ( comStr == this._optionalObj ){\r\n\r\n                        if ( tempNode.getComponent(comStr).getAnimalIsBig() ) {\r\n\r\n                            tempNode.getComponent(comStr).onRunSmall();\r\n\r\n                        } else {\r\n\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n        // 检测游戏结果\r\n    /**\r\n     * 判断某方玩家的输赢\r\n     * 看哪一方的棋子剩下的多，如果所有的棋子都没有了，算平局\r\n     */\r\n    onCheckResult: function (  ) {\r\n\r\n        var blueCount = 0;\r\n\r\n        var pinkCount = 0;\r\n\r\n        var tempNode = null;\r\n\r\n        var comStr = \"\";\r\n\r\n        // 如果点击翻棋后，要把所有的被选中的棋子恢复成原来状态\r\n        for (let index = 0; index < this.tableNodes.length; index++) {\r\n\r\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\r\n\r\n                if ( !this.tableNodes[index][jndex].isDie ) {\r\n\r\n                    tempNode = this.tableNodes[index][jndex].animal;\r\n\r\n                    comStr   = tempNode.componentStr;\r\n\r\n                    // console.log( \" comStr === \", comStr );\r\n\r\n                    if ( comStr == \"Animal_blue\" ) {\r\n\r\n                        blueCount += 1;\r\n\r\n                    } else if ( comStr == \"Animal_red\" ) {\r\n\r\n                        pinkCount += 1;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        // \r\n\r\n        console.log( \"blueCount === \", blueCount );\r\n\r\n        console.log( \"pinkCount === \", pinkCount );\r\n\r\n        var isResult = false;\r\n\r\n        if ( blueCount == 0 && pinkCount == 0 ) {\r\n            \r\n            // 平局\r\n            isResult = true;\r\n\r\n        } else if ( pinkCount == 0 && blueCount > pinkCount ) {\r\n\r\n            //蓝方胜利\r\n            isResult = true;\r\n\r\n        } else if ( blueCount == 0 && pinkCount > blueCount ) {\r\n\r\n            //粉方胜利\r\n            isResult = true;\r\n\r\n        }\r\n\r\n        if ( isResult ) {\r\n\r\n            this.closeUpdate();\r\n\r\n            this.onHideTipDir();\r\n\r\n            this._playAnimCallback = function() {\r\n    \r\n                this.onAddResultLayer();\r\n    \r\n            };\r\n    \r\n            this.scheduleOnce(this._playAnimCallback, 0.5);\r\n\r\n        }\r\n\r\n        return isResult;\r\n\r\n    },\r\n\r\n    onClearTabel: function (  ) {\r\n\r\n        var tempNode = null;\r\n\r\n        var comStr = '';\r\n\r\n        // 清除所有动物 需要重新初始化\r\n        for (let index = 0; index < this.tableNodes.length; index++) {\r\n\r\n            for (let jndex = 0; jndex < this.tableNodes[index].length; jndex++) {\r\n\r\n                if ( !this.tableNodes[index][jndex].isDie ) {\r\n\r\n                    tempNode = this.tableNodes[index][jndex].animal;\r\n\r\n                    comStr   = tempNode.componentStr;\r\n\r\n                    tempNode.getComponent(comStr).onDestory();\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n    },\r\n\r\n    onRestart: function (  ) {\r\n\r\n        this.onClearTabel();\r\n\r\n        this.init();\r\n\r\n        this.initUI();\r\n\r\n        this.openUpdate();\r\n\r\n        this.onOptionalTimeAni();\r\n\r\n    },\r\n\r\n// ******** 操作倒计时 ************\r\n\r\n    // 打开倒计时函数\r\n    openUpdate: function () {\r\n\r\n        var interval    = 1;                    //以秒为单位的时间间隔\r\n\r\n        var repeat      = this.defalutTiem;     //重复次数\r\n\r\n        var delay       = 0;                    //开始延时\r\n        \r\n        this.schedule( this.onTimeDownCallback,  interval, repeat, delay);\r\n\r\n    },\r\n\r\n    // 关闭倒计时函数\r\n    closeUpdate: function () {\r\n\r\n        console.log( \" closeUpdate ********************** \" );\r\n\r\n        this.unschedule(this.onTimeDownCallback);\r\n\r\n        this.count = 30;\r\n\r\n        this._isCanOptional = false;\r\n\r\n        // this.onCheckOptionSelf();\r\n\r\n    },\r\n\r\n    // 倒计时回调\r\n    onTimeDownCallback: function (  ) {\r\n\r\n        this.count -= 1;\r\n\r\n        if ( this.count < 0 ){\r\n\r\n            this.closeUpdate();\r\n\r\n            this.onCheckOptionSelf();\r\n\r\n        } else {\r\n\r\n            // 设置文本信息\r\n            this.onSetOptionalTime();\r\n\r\n        }\r\n\r\n        \r\n\r\n    },\r\n\r\n    onCanOptionalObj: function (  ) {\r\n\r\n        return this._isCanOptional;\r\n\r\n    },\r\n\r\n// ******** 操作倒计时 ************\r\n    \r\n\r\n// ******** 对象可以移动的方向指示 ********\r\n\r\n    // 检测上下左右是否可以移动\r\n    /**\r\n     * \r\n     * 移动规则为：如果四周有空位置，提示➡箭头出现\r\n     * 1.如果旁边还有箱子，不提箭头\r\n     * 2.如果旁边右自己的动物，不提示箱子\r\n     * \r\n     */\r\n    onCheckRoundMove: function ( row, col, obj ) {\r\n\r\n        var moveDir = { up:false, down:false, left:false, right:false };\r\n\r\n\r\n    \r\n        if ( row - 1 >= 0) {\r\n    \r\n            // 找出(row-1, col) 这个位置的对像\r\n            // 上移动\r\n            var isShowDir = this.onFindAnimalOfIndex( (row-1), col );\r\n\r\n            if ( isShowDir ) {\r\n\r\n                moveDir.up = true;\r\n\r\n            }\r\n            \r\n        }\r\n        \r\n        if ( row + 1 <= 3) {\r\n    \r\n            // 下移动\r\n            var isShowDir = this.onFindAnimalOfIndex( (row+1), col );\r\n\r\n            if ( isShowDir ) {\r\n\r\n                moveDir.down = true;\r\n\r\n            }\r\n    \r\n        } \r\n    \r\n        if ( col - 1 >= 0 ) {\r\n    \r\n            // 左移动\r\n            var isShowDir = this.onFindAnimalOfIndex( row, (col-1) );\r\n\r\n            if ( isShowDir ) {\r\n\r\n                moveDir.left = true;\r\n\r\n            }\r\n            \r\n        } \r\n        \r\n        if ( col + 1 <= 3 ) {\r\n    \r\n            // 右移动\r\n            var isShowDir = this.onFindAnimalOfIndex( row, (col+1) );\r\n\r\n            if ( isShowDir ) {\r\n\r\n                moveDir.right = true;\r\n\r\n            }\r\n    \r\n        }\r\n\r\n        if ( (row < 0 || col < 0) || ( row > 3 || col > 3 ) ) {\r\n    \r\n            moveDir = { up:false, down:false, left:false, right:false };\r\n    \r\n        }\r\n\r\n        // obj.onTipMoveDirection( moveDir );\r\n\r\n        this.node_dir.x = this.tableNodes[row][col].animal.x;\r\n\r\n        this.node_dir.y = this.tableNodes[row][col].animal.y + 10;\r\n\r\n        this.onTipMoveDirection( moveDir );\r\n\r\n    },\r\n\r\n    onFindAnimalOfIndex: function ( row, col ) {\r\n\r\n        var tempNode = null;\r\n\r\n        var comStr = '';\r\n\r\n        var isShowDir = false;\r\n\r\n        if ( !this.tableNodes[row][col].isDie ) {\r\n\r\n            tempNode = this.tableNodes[row][col].animal;\r\n\r\n            comStr = tempNode.componentStr;\r\n\r\n            // 当前箱子没有坏掉\r\n            if ( !tempNode.getComponent(comStr).getAnimalIsBreak() ) {\r\n\r\n                // 此种情况 不显示这个方向的 方向标\r\n                isShowDir = false;\r\n\r\n            } else {\r\n\r\n                // isShowDir = true;\r\n                if ( this._optionalObj == comStr ) {\r\n\r\n                    isShowDir = false;\r\n    \r\n                } else {\r\n\r\n                    isShowDir = true;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            isShowDir = true;\r\n\r\n        }\r\n\r\n        return isShowDir;\r\n\r\n    },\r\n\r\n        //  选中后提示玩家可以移动的方向 ()\r\n    /**\r\n     * 根据当前位置（x y）计算 上下左右 四个方向是否可以移动\r\n     * 如果某个方向可以移动，则展示提示动画\r\n     */\r\n    onTipMoveDirection: function ( moveDir ) {\r\n\r\n        if ( moveDir.up ) {\r\n\r\n            // 播放上动画\r\n            this.onRepeatAction( this.sp_up, \"up\" );\r\n\r\n        }\r\n\r\n        if ( moveDir.down ) {\r\n\r\n            // 播放下动画\r\n            this.onRepeatAction( this.sp_down, \"down\" );\r\n\r\n        }\r\n\r\n        if ( moveDir.left ) {\r\n\r\n            // 播放左动画\r\n            this.onRepeatAction( this.sp_left, \"left\" );\r\n\r\n        }\r\n\r\n        if ( moveDir.right ) {\r\n\r\n            // 播放右动画\r\n            this.onRepeatAction( this.sp_right, \"right\" );\r\n\r\n        }\r\n\r\n    },\r\n\r\n        /**\r\n     * @nodeObj: 哪个对象执行\r\n     * @dirStr: 方向\r\n     */\r\n    onRepeatAction: function ( nodeObj, dirStr ) {\r\n\r\n        nodeObj.node.active = true;\r\n\r\n        nodeObj.node.opacity = 255;\r\n\r\n        var animState = nodeObj.play(dirStr);\r\n\r\n        // 设置循环模式为 Loop\r\n        animState.wrapMode = cc.WrapMode.Loop;\r\n\r\n        // 设置动画循环次数为无限次\r\n        animState.repeatCount = Infinity;\r\n\r\n    },\r\n\r\n    // 隐藏四个方向小标\r\n    onHideTipDir: function (  ) {\r\n\r\n        this.sp_up.node.active = false;\r\n\r\n        this.sp_up.node.opacity = 0;\r\n\r\n        this.sp_down.node.active = false;\r\n\r\n        this.sp_down.node.opacity = 0;\r\n\r\n        this.sp_left.node.active = false;\r\n\r\n        this.sp_left.node.opacity = 0;\r\n\r\n        this.sp_right.node.active = false;\r\n\r\n        this.sp_right.node.opacity = 0;\r\n\r\n    },\r\n\r\n// ****************** 对象可以移动的方向指示 ******************\r\n\r\n// ******************     被消灭的动画     ******************\r\n\r\n    onPlayDestoryAni: function ( row, col ) {\r\n\r\n        this.sp_destory.node.x = this.allPos[row][col].x;\r\n\r\n        this.sp_destory.node.y = this.allPos[row][col].y;\r\n\r\n        this.onDestoryAnimation();\r\n        \r\n    },\r\n\r\n    onDestoryAnimation: function () {\r\n\r\n        this.sp_destory.node.active = true;\r\n\r\n        this.sp_destory.node.opacity = 255;\r\n\r\n        var animState = this.sp_destory.play(\"destory\");\r\n\r\n        var self = this;\r\n\r\n        function onFinished (  ) {\r\n\r\n            console.log( \"onFinished\" );\r\n\r\n            self.sp_destory.node.active = false;\r\n\r\n            self.sp_destory.node.opacity = 0;\r\n\r\n        };\r\n\r\n        animState.on('finished',  onFinished,  this.sp_destory);\r\n\r\n    },\r\n\r\n// ******************  被消灭的动画   ******************\r\n\r\n// ****************** 操作时间过度动画 ******************\r\n\r\n    /**\r\n     * 随机出操作方\r\n     * 根据随机出来的对象，显示操作时间\r\n     * 显示要求：（假设，随机出来的是红方先操作）\r\n     * 1.红方时间面板从0放大到1的过程；30s后面板从1到0缩小，然后显示白板0.5s，0.5s后白板隐藏，\r\n     * 蓝色面板从0放大到1的过程；然后重复循环此过程\r\n     */\r\n    onOptionalTimeAni: function (  ) {\r\n\r\n        if ( this._optionalObj == \"Animal_red\" ) {\r\n\r\n            this.onRedBoardAni( true );\r\n\r\n        } else if ( this._optionalObj == \"Animal_blue\" ) {\r\n\r\n            this.onBlueBoardAni( true );\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * optionalObj: 操作方\r\n     */\r\n    onRedBoardAni: function ( optionalObj ) {\r\n\r\n        if ( optionalObj ) {\r\n\r\n            // 红面板从0放大到1的过程；\r\n\r\n            var scale = cc.scaleTo( 0.2, 1, 1 );\r\n\r\n            var delay = cc.delayTime( 0.2 );\r\n\r\n            var self = this;\r\n\r\n            function onFinishCallback (  ){\r\n\r\n                self.sp_white.node.scale = 0;\r\n\r\n                var scale2 = cc.scaleTo( 0.2, 1, 1 );\r\n    \r\n                self.sp_red_time.node.runAction( scale2 );\r\n\r\n                self._isCanOptional = true;\r\n\r\n                self.openUpdate();\r\n\r\n            };\r\n\r\n            var seq = cc.sequence(  scale,\r\n                                    delay,\r\n                                    cc.callFunc( onFinishCallback, this, this.sp_white ) );\r\n\r\n            this.sp_white.node.runAction( seq );\r\n\r\n        } else {\r\n\r\n            // 红面板从1缩小到0的过程；\r\n            var scale = cc.scaleTo( 0.2, 1, 0 );\r\n\r\n            var self = this;\r\n\r\n            function onFinishCallback (  ){\r\n\r\n\r\n            };\r\n\r\n            var seq = cc.sequence( scale, \r\n            cc.callFunc( onFinishCallback, this, this.sp_red_time ) );\r\n\r\n            this.sp_red_time.node.runAction( seq );\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * optionalObj: 操作方\r\n     */\r\n    onBlueBoardAni: function ( optionalObj ) {\r\n\r\n        if ( optionalObj ) {\r\n\r\n            // 红面板从0放大到1的过程\r\n\r\n            var scale = cc.scaleTo( 0.2, 1, 1 );\r\n\r\n            var delay = cc.delayTime( 0.2 );\r\n\r\n            var self = this;\r\n\r\n            function onFinishCallback (  ){\r\n\r\n                self.sp_white.node.scale = 0;\r\n\r\n                var scale1 = cc.scaleTo( 0.2, 1, 1 );\r\n\r\n                self.sp_blue_time.node.runAction( scale1 );\r\n\r\n                self._isCanOptional = true;\r\n\r\n                self.openUpdate();\r\n\r\n            };\r\n\r\n            var seq = cc.sequence(  scale,\r\n                                    delay,\r\n                                    cc.callFunc( onFinishCallback, this, this.sp_white ) );\r\n\r\n            this.sp_white.node.runAction( seq );\r\n\r\n        } else {\r\n\r\n            // 红面板从1缩小到0的过程；\r\n            var scale = cc.scaleTo( 0.2, 1, 0 );\r\n\r\n            var self = this;\r\n\r\n            function onFinishCallback (  ){\r\n\r\n\r\n            };\r\n\r\n            var seq = cc.sequence( scale, \r\n                                    cc.callFunc( onFinishCallback, this, this.sp_blue_time ) );\r\n\r\n            this.sp_blue_time.node.runAction( seq );\r\n\r\n        }\r\n\r\n    },\r\n\r\n        /**\r\n     * optionalObj: 操作方\r\n     */\r\n    onWhiteBoardAni: function ( optionalObj ) {\r\n\r\n        var scale = cc.scaleTo( 0.5, 1, 1 );\r\n\r\n        var self = this;\r\n\r\n        function onFinishCallback (  ) {\r\n\r\n            self.sp_white.node.active = false;\r\n\r\n            self.sp_white.node.opacity = 0;\r\n\r\n            self.sp_white.node.scaleY = 0;\r\n\r\n            console.log( \" onFinishCallback onWhiteBoardAni \", optionalObj );\r\n\r\n            if ( optionalObj == \"red\" ) {\r\n\r\n                self.onBlueBoardAni( true );\r\n\r\n            } else {\r\n\r\n                self.onRedBoardAni( true );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var seq = cc.sequence( scale, \r\n        cc.callFunc(onFinishCallback, this, this.sp_white) );\r\n\r\n        this.sp_white.node.runAction( seq );\r\n\r\n\r\n    },\r\n\r\n    // 设置玩家操作时间\r\n    onSetOptionalTime: function (  ) {\r\n\r\n        if ( this._optionalObj == \"Animal_blue\" ) {\r\n\r\n            this.label_blue_time.string = this.count.toString() + \"s\";\r\n\r\n        } else {\r\n\r\n            this.label_red_time.string = this.count.toString() + \"s\";\r\n\r\n        }\r\n\r\n    },\r\n\r\n// ****************** 操作时间过度动画 ******************\r\n\r\n// ******************     提示框     ******************\r\n/**\r\n * tipStr: 提示文字\r\n */\r\n    onAddTip: function ( tipStr ) {\r\n\r\n        console.log( \" add------tip \", this._isShowTip );\r\n\r\n        this.label_tip.string = tipStr;\r\n\r\n        if ( this._isShowTip ) {\r\n\r\n            return;\r\n\r\n        } else {\r\n\r\n            this.onShowtip();\r\n\r\n        }\r\n\r\n    },\r\n\r\n    onShowtip: function (  ) {\r\n\r\n        console.log( \" onShowtip\" );\r\n\r\n        var self = this;\r\n\r\n        this._isShowTip = true;\r\n\r\n        this.sp_tip.node.active = true;\r\n\r\n        this.sp_tip.node.opacity = 255;\r\n\r\n        // 缩小放大动画\r\n        var scale = cc.scaleTo(0.2, 1);\r\n\r\n        function onActionFinishCall (  ){\r\n\r\n            // this.sp_tip.node.scale = 0;\r\n            this.onHidetip();\r\n\r\n        };\r\n\r\n        var delay = cc.delayTime(0.8);\r\n\r\n        var seq = cc.sequence( scale, delay, \r\n                                cc.callFunc(onActionFinishCall, this, this.sp_tip) );\r\n\r\n        this.sp_tip.node.runAction( seq );\r\n\r\n    },\r\n\r\n    onHidetip: function (  ) {\r\n\r\n        // 缩小放大动画\r\n        var scale = cc.scaleTo(0.1, 0);\r\n\r\n        function onActionFinishCall (  ){\r\n\r\n            this.sp_tip.node.scale = 0;\r\n\r\n            this._isShowTip = false;\r\n\r\n        };\r\n\r\n        var seq = cc.sequence( scale, cc.callFunc(onActionFinishCall, this, this.sp_tip));\r\n\r\n        this.sp_tip.node.runAction( seq );\r\n\r\n    },\r\n\r\n    // 弹出 确认取消框\r\n    onAddAlert: function ( descStr, labelRedBtn, labelBlueBtn ) {\r\n\r\n        this.label_alert.string = descStr;\r\n\r\n        this.label_red_btn.string = labelRedBtn;\r\n\r\n        this.label_blue_btn.string = labelBlueBtn;\r\n\r\n        if ( this._isShowAlert ) {\r\n\r\n            return;\r\n\r\n        } else {\r\n\r\n            this.onShowAlert();\r\n\r\n        }\r\n\r\n    },\r\n\r\n    onShowAlert: function (  ) {\r\n\r\n        var self = this;\r\n\r\n        this._isShowAlert = true;\r\n\r\n        // 缩小放大动画\r\n        var scale = cc.scaleTo(0.2, 1);\r\n\r\n        function onActionFinishCall (  ){\r\n\r\n\r\n        };\r\n\r\n        var delay = cc.delayTime(0.8);\r\n\r\n        var seq = cc.sequence( scale, delay, \r\n                                cc.callFunc(onActionFinishCall, this, this.sp_alert) );\r\n\r\n        this.sp_alert.node.runAction( seq );\r\n\r\n    },\r\n\r\n    onHideAlert: function (  ) {\r\n\r\n        // 缩小放大动画\r\n        var scale = cc.scaleTo(0.1, 0);\r\n\r\n        function onActionFinishCall (  ){\r\n\r\n            this.sp_alert.node.scale = 0;\r\n\r\n            this._isShowAlert = false;\r\n\r\n        };\r\n\r\n        var seq = cc.sequence( scale, cc.callFunc(onActionFinishCall, this, this.sp_alert));\r\n\r\n        this.sp_alert.node.runAction( seq );\r\n\r\n    },\r\n\r\n\r\n// ******************    提示框    ******************\r\n\r\n// ******************    结算页面    ******************\r\n\r\n    onAddResultLayer: function () {\r\n\r\n        var self = this;\r\n\r\n        var resutlLayer = cc.instantiate( this.result_prefab );\r\n\r\n        resutlLayer.addComponent('GameResult');\r\n\r\n        resutlLayer.setLocalZOrder(100);\r\n\r\n        resutlLayer.parent = this.nodeResult;\r\n\r\n        resutlLayer.x = 320;\r\n\r\n        resutlLayer.y = 568;\r\n\r\n        function onCallback (  ) {\r\n\r\n            // console.log( \" onCallback \" );\r\n\r\n            self.onRestart();\r\n\r\n        };\r\n\r\n        resutlLayer.getComponent('GameResult').onInitUI();\r\n\r\n        resutlLayer.getComponent('GameResult').onSetGameResultInfo( \"fdsklf\", onCallback );\r\n\r\n    }\r\n\r\n// ******************    结算页面    ******************\r\n});\r\n"]}